{"version":3,"file":"BaseTable.js","sources":["../../../components/table/BaseTable.tsx"],"sourcesContent":["import React, { forwardRef, RefAttributes, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport { pick } from 'lodash-es';\nimport log from '@tdesign/common-js/log/index';\nimport { getIEVersion } from '@tdesign/common-js/utils/helper';\nimport Affix, { type AffixRef } from '../affix';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport useElementLazyRender from '../hooks/useElementLazyRender';\nimport useVirtualScroll from '../hooks/useVirtualScroll';\nimport Loading from '../loading';\nimport TBody, { extendTableProps, type TableBodyProps } from './TBody';\nimport TFoot from './TFoot';\nimport THead, { type TheadProps } from './THead';\nimport { ROW_LISTENERS } from './TR';\nimport { baseTableDefaultProps } from './defaultProps';\nimport useAffix from './hooks/useAffix';\nimport useClassName from './hooks/useClassName';\nimport useColumnResize from './hooks/useColumnResize';\nimport useFixed from './hooks/useFixed';\nimport usePagination from './hooks/usePagination';\nimport useStyle, { formatCSSUnit } from './hooks/useStyle';\nimport useTableHeader from './hooks/useTableHeader';\nimport { getAffixProps } from './utils';\n\nimport type { Styles } from '../common';\nimport type { BaseTableProps, BaseTableRef } from './interface';\nimport type { TableRowData } from './type';\n\nexport const BASE_TABLE_EVENTS = ['page-change', 'cell-click', 'scroll', 'scrollX', 'scrollY'];\nexport const BASE_TABLE_ALL_EVENTS = ROW_LISTENERS.map((t) => `row-${t}`).concat(BASE_TABLE_EVENTS);\n\nexport interface TableListeners {\n  [key: string]: Function;\n}\n\nconst BaseTable = forwardRef<BaseTableRef, BaseTableProps>((originalProps, ref) => {\n  const props = useDefaultProps<BaseTableProps<TableRowData>>(originalProps, baseTableDefaultProps);\n  const {\n    rowKey,\n    showHeader,\n    tableLayout,\n    height,\n    data,\n    columns,\n    style,\n    headerAffixedTop,\n    bordered,\n    resizable,\n    lazyLoad,\n    pagination,\n  } = props;\n  const tableRef = useRef<HTMLDivElement>(null);\n  const tableElmRef = useRef<HTMLTableElement>(null);\n  const bottomContentRef = useRef<HTMLDivElement>(null);\n  const [tableFootHeight, setTableFootHeight] = useState(0);\n\n  const allTableClasses = useClassName();\n  const { classPrefix, virtualScrollClasses, tableLayoutClasses, tableBaseClass, tableColFixedClasses } =\n    allTableClasses;\n  // 表格基础样式类\n  const { tableClasses, sizeClassNames, tableContentStyles, tableElementStyles } = useStyle(props);\n  const { isMultipleHeader, spansAndLeafNodes, thList } = useTableHeader({ columns: props.columns });\n  const finalColumns = useMemo(\n    () => spansAndLeafNodes?.leafColumns || columns,\n    [spansAndLeafNodes?.leafColumns, columns],\n  );\n\n  const { showElement } = useElementLazyRender(tableRef, lazyLoad);\n  const paginationAffixRef = useRef<AffixRef>(null);\n  const horizontalScrollAffixRef = useRef<AffixRef>(null);\n  const headerTopAffixRef = useRef<AffixRef>(null);\n  const footerBottomAffixRef = useRef<AffixRef>(null);\n\n  // 1. 表头吸顶；2. 表尾吸底；3. 底部滚动条吸底；4. 分页器吸底\n  const {\n    affixHeaderRef,\n    affixFooterRef,\n    horizontalScrollbarRef,\n    paginationRef,\n    showAffixHeader,\n    showAffixFooter,\n    showAffixPagination,\n    onHorizontalScroll,\n    setTableContentRef,\n    updateAffixHeaderOrFooter,\n  } = useAffix(props, { showElement });\n\n  // 固定表头和固定列逻辑\n  const {\n    scrollbarWidth,\n    tableWidth,\n    tableElmWidth,\n    tableContentRef,\n    isFixedHeader,\n    isWidthOverflow,\n    isFixedColumn,\n    thWidthList,\n    showColumnShadow,\n    rowAndColFixedPosition,\n    setData,\n    refreshTable,\n    setTableElmWidth,\n    emitScrollEvent,\n    setUseFixedTableElmRef,\n    updateColumnFixedShadow,\n    getThWidthList,\n    updateThWidthList,\n    addTableResizeObserver,\n    updateTableAfterColumnResize,\n  } = useFixed(props, finalColumns, {\n    paginationAffixRef,\n    horizontalScrollAffixRef,\n    headerTopAffixRef,\n    footerBottomAffixRef,\n  });\n\n  const { dataSource, innerPagination, isPaginateData, renderPagination } = usePagination(props, tableContentRef);\n\n  // 列宽拖拽逻辑\n  const columnResizeParams = useColumnResize({\n    isWidthOverflow,\n    tableContentRef,\n    showColumnShadow,\n    getThWidthList,\n    updateThWidthList,\n    setTableElmWidth,\n    updateTableAfterColumnResize,\n    onColumnResizeChange: props.onColumnResizeChange,\n  });\n  const { resizeLineRef, resizeLineStyle, setEffectColMap, updateTableWidthOnColumnChange } = columnResizeParams;\n\n  const dynamicBaseTableClasses = classNames(\n    tableClasses.concat({\n      [tableBaseClass.headerFixed]: isFixedHeader,\n      [tableBaseClass.columnFixed]: isFixedColumn,\n      [tableBaseClass.widthOverflow]: isWidthOverflow,\n      [tableBaseClass.multipleHeader]: isMultipleHeader,\n      [tableColFixedClasses.leftShadow]: showColumnShadow.left,\n      [tableColFixedClasses.rightShadow]: showColumnShadow.right,\n      [tableBaseClass.columnResizableTable]: props.resizable,\n    }),\n  );\n\n  const tableElmClasses = classNames([\n    [tableLayoutClasses[tableLayout || 'fixed']],\n    { [tableBaseClass.fullHeight]: height },\n  ]);\n\n  const showRightDivider = useMemo(\n    () => props.bordered && isFixedHeader && ((isMultipleHeader && isWidthOverflow) || !isMultipleHeader),\n    [isFixedHeader, isMultipleHeader, isWidthOverflow, props.bordered],\n  );\n\n  const [dividerBottom, setDividerBottom] = useState(0);\n  useEffect(() => {\n    if (!bordered) return;\n    const bottomRect = bottomContentRef.current?.getBoundingClientRect();\n    const paginationRect = paginationRef.current?.getBoundingClientRect();\n    const bottom = (bottomRect?.height || 0) + (paginationRect?.height || 0);\n    setDividerBottom(bottom);\n  }, [bottomContentRef, paginationRef, bordered]);\n\n  useEffect(() => {\n    setUseFixedTableElmRef(tableElmRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableElmRef]);\n\n  useEffect(() => {\n    setData(isPaginateData ? dataSource : props.data);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.data, dataSource, isPaginateData]);\n\n  const [lastLeafColumns, setLastLeafColumns] = useState(props.columns || []);\n\n  useEffect(() => {\n    if (lastLeafColumns.map((t) => t.colKey).join() !== spansAndLeafNodes.leafColumns.map((t) => t.colKey).join()) {\n      props.onLeafColumnsChange?.(spansAndLeafNodes.leafColumns);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      setLastLeafColumns(spansAndLeafNodes.leafColumns);\n    }\n    setEffectColMap(spansAndLeafNodes.leafColumns, null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [spansAndLeafNodes.leafColumns]);\n\n  const onFixedChange = () => {\n    const timer = setTimeout(() => {\n      onHorizontalScroll();\n      updateAffixHeaderOrFooter();\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  const virtualScrollParams = useMemo(() => {\n    let virtualData: any[] = data;\n\n    // HACK：虚拟滚动时，需要考虑 fullRow 的高度，因此在这插入占位数据\n    if (props.firstFullRow) {\n      const firstFullRowData = {\n        __VIRTUAL_FAKE_DATA: 'FIRST_FULL_ROW',\n      };\n      // 不使用展开运算符进行合并，而是保留原有引用\n      // 否则会导致 Reflect.set 时，数据无法同步到原始 data\n      virtualData = ([firstFullRowData] as any[]).concat(data);\n    }\n    if (props.lastFullRow) {\n      const lastFullRowData = {\n        __VIRTUAL_FAKE_DATA: 'LAST_FULL_ROW',\n      };\n      virtualData = virtualData.concat(lastFullRowData);\n    }\n\n    return {\n      data: virtualData,\n      scroll: { ...props.scroll, fixedRows: props.fixedRows },\n    };\n  }, [data, props.firstFullRow, props.lastFullRow, props.scroll, props.fixedRows]);\n\n  const virtualConfig = useVirtualScroll(tableContentRef, virtualScrollParams);\n\n  useEffect(() => {\n    // 仅处理「初始化 data 数量已达到虚拟滚动阈值」的场景（此时 visibleData 为 []）\n    // 如果是通过滚动过程陆续新增数据，再触发虚拟滚动，不需要这一步，以避免卡顿\n    if (!virtualConfig.isVirtualScroll || virtualConfig.visibleData.length) return;\n    setTimeout(() => {\n      if (!tableContentRef.current) return;\n      // HACK：强制触发重绘，确保滚动条长度正确\n      // 若未来有更优实现，可替换此方案\n      tableContentRef.current.style.display = 'none';\n      tableContentRef.current.offsetHeight;\n      tableContentRef.current.style.display = '';\n    }, 0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableContentRef, virtualConfig.isVirtualScroll]);\n\n  let lastScrollY = -1;\n  const onInnerVirtualScroll = (e: React.WheelEvent<HTMLDivElement>) => {\n    const target = e.target as HTMLElement;\n    const top = target.scrollTop;\n    // 排除横向滚动触发的纵向虚拟滚动计算\n    if (lastScrollY !== top) {\n      virtualConfig.isVirtualScroll && virtualConfig.handleScroll();\n    } else {\n      lastScrollY = -1;\n      updateColumnFixedShadow(target);\n    }\n    lastScrollY = top;\n    onHorizontalScroll(target);\n    emitScrollEvent(e);\n  };\n\n  /**\n   * 横向滚动到指定列\n   * 对外暴露方法，修改时需谨慎（expose）\n   */\n  const scrollColumnIntoView = (colKey: string) => {\n    if (!tableContentRef.current) return;\n    const thDom = tableContentRef.current.querySelector(`th[data-colkey=\"${colKey}\"]`);\n    const fixedThDom = tableContentRef.current.querySelectorAll('th.t-table__cell--fixed-left');\n    let totalWidth = 0;\n    for (let i = 0, len = fixedThDom.length; i < len; i++) {\n      totalWidth += fixedThDom[i].getBoundingClientRect().width;\n    }\n    const domRect = thDom.getBoundingClientRect();\n    const contentRect = tableContentRef.current.getBoundingClientRect();\n    const distance = domRect.left - contentRect.left - totalWidth;\n    tableContentRef.current.scrollTo({ left: distance, behavior: 'smooth' });\n  };\n\n  useImperativeHandle(ref, () => ({\n    showColumnShadow,\n    tableElement: tableRef.current,\n    tableHtmlElement: tableElmRef.current,\n    tableContentElement: tableContentRef.current,\n    affixHeaderElement: affixHeaderRef.current,\n    refreshTable,\n    scrollToElement: virtualConfig.scrollToElement,\n    scrollColumnIntoView,\n    updateTableWidthOnColumnChange,\n  }));\n\n  // used for top margin\n  const getTFootHeight = () => {\n    requestAnimationFrame(() => {\n      if (!tableElmRef.current) return;\n      const height = tableElmRef.current.querySelector('tfoot')?.offsetHeight;\n      setTableFootHeight(height || 0);\n    });\n  };\n\n  useEffect(getTFootHeight, [tableElmRef, props.footData, props.footerSummary]);\n\n  useEffect(() => {\n    setTableContentRef(tableContentRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableContentRef]);\n\n  useEffect(\n    () => addTableResizeObserver(tableRef.current),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [tableRef],\n  );\n\n  const newData = isPaginateData ? dataSource : data;\n\n  const renderColGroup = (isFixedHeader = true) => (\n    <colgroup>\n      {finalColumns.map((col, index) => {\n        const style: Styles = {\n          width: formatCSSUnit((isFixedHeader || resizable ? thWidthList.current[col.colKey] : undefined) || col.width),\n        };\n        if (col.minWidth) {\n          style.minWidth = formatCSSUnit(col.minWidth);\n        }\n        // 没有设置任何宽度的场景下，需要保留表格正常显示的最小宽度，否则会出现因宽度过小的抖动问题\n        if (!style.width && !col.minWidth && props.tableLayout === 'fixed') {\n          style.minWidth = '80px';\n        }\n        return <col key={col.colKey || index} style={style} />;\n      })}\n    </colgroup>\n  );\n  const headProps: TheadProps = {\n    isFixedHeader,\n    rowAndColFixedPosition,\n    isMultipleHeader,\n    bordered: props.bordered,\n    maxHeight: props.maxHeight,\n    height: props.height,\n    spansAndLeafNodes,\n    thList,\n    thWidthList: thWidthList.current,\n    resizable: props.resizable,\n    columnResizeParams,\n    classPrefix,\n    ellipsisOverlayClassName: props.size !== 'medium' ? sizeClassNames[props.size] : '',\n    attach: props.attach,\n    thDraggable: props.thDraggable,\n    showColumnShadow,\n  };\n\n  const headUseMemoDependencies = [\n    resizable,\n    thWidthList,\n    isFixedHeader,\n    rowAndColFixedPosition,\n    isMultipleHeader,\n    spansAndLeafNodes,\n    thList,\n    columnResizeParams,\n    classPrefix,\n    props.bordered,\n    props.resizable,\n    props.size,\n  ];\n\n  // 多级表头左边线缺失\n  const affixedLeftBorder = props.bordered ? 1 : 0;\n\n  // IE浏览器需要遮挡header吸顶滚动条，要减去getBoundingClientRect.height的滚动条高度4像素\n  const IEHeaderWrap = getIEVersion() <= 11 ? 4 : 0;\n  const affixHeaderHeight = (affixHeaderRef.current?.getBoundingClientRect().height || 0) - IEHeaderWrap;\n  /**\n   * Affixed Header\n   */\n  const renderFixedHeader = () => {\n    if (!showHeader) return null;\n    // 两类场景：1. 虚拟滚动，永久显示表头，直到表头消失在可视区域； 2. 表头吸顶，根据滚动情况判断是否显示吸顶表头\n    const headerOpacity = headerAffixedTop ? Number(showAffixHeader) : 1;\n    const barWidth = isWidthOverflow ? scrollbarWidth : 0;\n    const affixHeaderWrapHeight = affixHeaderHeight - barWidth;\n    const affixHeaderWrapHeightStyle = {\n      width: `${tableWidth.current}px`,\n      height: `${affixHeaderWrapHeight}px`,\n      opacity: headerOpacity,\n    };\n    const affixedHeader = Boolean((headerAffixedTop || virtualConfig.isVirtualScroll) && tableWidth.current) && (\n      <div\n        ref={affixHeaderRef}\n        style={{ width: `${tableWidth.current - affixedLeftBorder - barWidth}px`, opacity: headerOpacity }}\n        className={classNames([\n          'scrollbar',\n          {\n            [tableBaseClass.affixedHeaderElm]: props.headerAffixedTop || virtualConfig.isVirtualScroll,\n          },\n        ])}\n      >\n        <table\n          className={classNames(tableElmClasses)}\n          style={{ ...tableElementStyles, width: tableElmWidth.current ? `${tableElmWidth.current}px` : undefined }}\n        >\n          {renderColGroup(true)}\n          {showHeader && <THead {...headProps} />}\n        </table>\n      </div>\n    );\n\n    // 添加这一层，是为了隐藏表头的横向滚动条。如果以后不需要照顾 IE 10 以下的项目，则可直接移除这一层\n    // 彼时，可更为使用 CSS 样式中的 .hideScrollbar()\n    const affixHeaderWithWrap = (\n      <div className={tableBaseClass.affixedHeaderWrap} style={affixHeaderWrapHeightStyle}>\n        {affixedHeader}\n      </div>\n    );\n    return affixHeaderWithWrap;\n  };\n\n  const renderAffixedHeader = () => {\n    if (!showHeader) return null;\n    return (\n      !!(virtualConfig.isVirtualScroll || props.headerAffixedTop) &&\n      (props.headerAffixedTop ? (\n        <Affix\n          offsetTop={0}\n          {...getAffixProps(props.headerAffixedTop, props.headerAffixProps)}\n          ref={headerTopAffixRef}\n          onFixedChange={onFixedChange}\n        >\n          {renderFixedHeader()}\n        </Affix>\n      ) : (\n        isFixedHeader && renderFixedHeader()\n      ))\n    );\n  };\n\n  /**\n   * Affixed Footer\n   */\n  const renderAffixedFooter = () => {\n    let marginScrollbarWidth = isWidthOverflow ? scrollbarWidth : 0;\n    if (bordered) {\n      marginScrollbarWidth += 1;\n    }\n    // Hack: Affix 组件，marginTop 临时使用 负 margin 定位位置\n    const totalMarginTop = tableFootHeight + marginScrollbarWidth;\n    const affixedFooter = Boolean(\n      (virtualConfig.isVirtualScroll || props.footerAffixedBottom) && props.footData?.length && tableWidth.current,\n    ) && (\n      <Affix\n        className={tableBaseClass.affixedFooterWrap}\n        onFixedChange={onFixedChange}\n        offsetBottom={marginScrollbarWidth || 0}\n        {...getAffixProps(props.footerAffixedBottom)}\n        ref={footerBottomAffixRef}\n        style={{ marginTop: `${-1 * totalMarginTop}px` }}\n      >\n        <div\n          ref={affixFooterRef}\n          style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: Number(showAffixFooter) }}\n          className={classNames([\n            'scrollbar',\n            { [tableBaseClass.affixedFooterElm]: props.footerAffixedBottom || virtualConfig.isVirtualScroll },\n          ])}\n        >\n          <table\n            className={tableElmClasses}\n            style={{ ...tableElementStyles, width: tableElmWidth.current ? `${tableElmWidth.current}px` : undefined }}\n          >\n            {renderColGroup(true)}\n            <TFoot\n              rowKey={props.rowKey}\n              isFixedHeader={isFixedHeader}\n              rowAndColFixedPosition={rowAndColFixedPosition}\n              footData={props.footData}\n              columns={spansAndLeafNodes?.leafColumns || columns}\n              rowAttributes={props.rowAttributes}\n              rowClassName={props.rowClassName}\n              thWidthList={thWidthList.current}\n              footerSummary={props.footerSummary}\n              rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n            ></TFoot>\n          </table>\n        </div>\n      </Affix>\n    );\n    return affixedFooter;\n  };\n\n  const tableBodyProps: TableBodyProps = {\n    classPrefix,\n    ellipsisOverlayClassName: props.size !== 'medium' ? sizeClassNames[props.size] : '',\n    rowAndColFixedPosition,\n    showColumnShadow,\n    data: newData,\n    virtualConfig,\n    handleRowMounted: virtualConfig.handleRowMounted,\n    columns: spansAndLeafNodes?.leafColumns || columns,\n    tableRef,\n    tableContentRef,\n    tableWidth,\n    isWidthOverflow,\n    allTableClasses,\n    rowKey,\n    scroll: props.scroll,\n    cellEmptyContent: props.cellEmptyContent,\n    renderExpandedRow: props.renderExpandedRow,\n    ...pick(props, extendTableProps),\n    pagination: innerPagination,\n  };\n  const translate = `translate(0, ${virtualConfig.scrollHeight + (affixHeaderHeight || 0) + (tableFootHeight || 0)}px)`;\n  const virtualStyle = {\n    transform: translate,\n    msTransform: translate,\n    MozTransform: translate,\n    WebkitTransform: translate,\n  };\n  const tableContent = (\n    <div\n      ref={tableContentRef}\n      className={tableBaseClass.content}\n      style={tableContentStyles}\n      onScroll={onInnerVirtualScroll}\n    >\n      {virtualConfig.isVirtualScroll && <div className={virtualScrollClasses.cursor} style={virtualStyle} />}\n\n      <table\n        ref={tableElmRef}\n        className={classNames(tableElmClasses)}\n        style={{\n          ...tableElementStyles,\n          width:\n            resizable && isWidthOverflow && tableElmWidth.current\n              ? `${tableElmWidth.current}px`\n              : tableElementStyles.width,\n        }}\n      >\n        {renderColGroup(false)}\n        {useMemo(() => {\n          if (!showHeader) return null;\n          return <THead {...{ ...headProps, thWidthList: resizable ? thWidthList.current : {} }} />;\n          // eslint-disable-next-line\n        }, headUseMemoDependencies)}\n\n        {useMemo(\n          () => (\n            <TBody {...tableBodyProps} />\n          ),\n          // eslint-disable-next-line\n          [\n            allTableClasses,\n            tableBodyProps.ellipsisOverlayClassName,\n            tableBodyProps.rowAndColFixedPosition,\n            tableBodyProps.showColumnShadow,\n            tableBodyProps.data,\n            tableBodyProps.columns,\n            tableRef,\n            tableContentRef,\n            tableWidth,\n            isWidthOverflow,\n            virtualConfig,\n            props.rowKey,\n            props.rowClassName,\n            props.rowAttributes,\n            props.loading,\n            props.empty,\n            props.fixedRows,\n            props.firstFullRow,\n            props.lastFullRow,\n            props.rowspanAndColspan,\n            props.scroll,\n            props.cellEmptyContent,\n          ],\n        )}\n\n        {useMemo(\n          () => (\n            <TFoot\n              rowKey={rowKey}\n              isFixedHeader={isFixedHeader}\n              rowAndColFixedPosition={rowAndColFixedPosition}\n              footData={props.footData}\n              columns={spansAndLeafNodes?.leafColumns || columns}\n              rowAttributes={props.rowAttributes}\n              rowClassName={props.rowClassName}\n              thWidthList={thWidthList.current}\n              footerSummary={props.footerSummary}\n              rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n              virtualScroll={virtualConfig.isVirtualScroll}\n            ></TFoot>\n          ),\n          // eslint-disable-next-line\n          [\n            isFixedHeader,\n            rowAndColFixedPosition,\n            spansAndLeafNodes,\n            columns,\n            thWidthList,\n            props.rowKey,\n            props.footData,\n            props.rowAttributes,\n            props.rowClassName,\n            props.footerSummary,\n            virtualConfig.isVirtualScroll,\n          ],\n        )}\n      </table>\n    </div>\n  );\n\n  const { loading, loadingProps } = props;\n  const customLoadingText = loading;\n  const loadingContent = tableRef.current && loading !== undefined && (\n    <Loading\n      loading={!!loading}\n      text={customLoadingText}\n      attach={() => tableRef.current}\n      showOverlay\n      size=\"small\"\n      {...loadingProps}\n    />\n  );\n\n  const { topContent, bottomContent } = props;\n  const paginationNode = pagination ? (\n    <div ref={paginationRef} className={tableBaseClass.paginationWrap} style={{ opacity: Number(showAffixPagination) }}>\n      {renderPagination()}\n    </div>\n  ) : null;\n  const bottom = !!bottomContent && (\n    <div ref={bottomContentRef} className={tableBaseClass.bottomContent}>\n      {bottomContent}\n    </div>\n  );\n\n  const affixedHeaderContent = useMemo(\n    renderAffixedHeader,\n    // eslint-disable-next-line\n    [\n      // eslint-disable-next-line\n      ...headUseMemoDependencies,\n      showAffixHeader,\n      tableWidth,\n      tableElmWidth,\n      affixHeaderRef,\n      affixedLeftBorder,\n      tableElmClasses,\n      tableElementStyles,\n      columns,\n      spansAndLeafNodes,\n      showHeader,\n      props.headerAffixedTop,\n    ],\n  );\n\n  const affixedFooterContent = useMemo(\n    renderAffixedFooter,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      showAffixFooter,\n      isFixedHeader,\n      rowAndColFixedPosition,\n      spansAndLeafNodes,\n      columns,\n      thWidthList,\n      tableBaseClass,\n      tableElementStyles,\n      tableElmWidth,\n      affixFooterRef,\n      affixedLeftBorder,\n      bordered,\n      isWidthOverflow,\n      scrollbarWidth,\n      tableElmClasses,\n      tableFootHeight,\n      tableWidth,\n      virtualConfig.isVirtualScroll,\n      props.rowKey,\n      props.footData,\n      props.rowAttributes,\n      props.rowClassName,\n      props.footerSummary,\n      props.footerAffixedBottom,\n      props.rowspanAndColspanInFooter,\n      tableWidth.current,\n    ],\n  );\n\n  const scrollbarDivider = useMemo(() => {\n    if (!showRightDivider) return null;\n    return (\n      <div\n        className={tableBaseClass.scrollbarDivider}\n        style={{\n          right: `${scrollbarWidth}px`,\n          bottom: dividerBottom ? `${dividerBottom}px` : undefined,\n          height: `${tableContentRef.current?.getBoundingClientRect().height}px`,\n        }}\n      ></div>\n    );\n  }, [tableBaseClass, showRightDivider, scrollbarWidth, dividerBottom, tableContentRef]);\n\n  const affixedScrollbar = props.horizontalScrollAffixedBottom && (\n    <Affix\n      offsetBottom={0}\n      {...getAffixProps(props.horizontalScrollAffixedBottom)}\n      ref={horizontalScrollAffixRef}\n      style={{ marginTop: `-${scrollbarWidth * 2}px` }}\n    >\n      <div\n        ref={horizontalScrollbarRef}\n        className={classNames(['scrollbar', tableBaseClass.obviousScrollbar])}\n        style={{\n          width: `${tableWidth.current}px`,\n          overflow: 'auto',\n          opacity: Number(showAffixFooter),\n        }}\n      >\n        <div style={{ width: `${tableElmWidth.current}px`, height: '5px' }}></div>\n      </div>\n    </Affix>\n  );\n\n  const affixedPaginationContent = props.paginationAffixedBottom ? (\n    <Affix offsetBottom={0} {...getAffixProps(props.paginationAffixedBottom)} ref={paginationAffixRef}>\n      {paginationNode}\n    </Affix>\n  ) : (\n    paginationNode\n  );\n\n  const tableElements = (\n    <>\n      {!!topContent && <div className={tableBaseClass.topContent}>{topContent}</div>}\n\n      {affixedHeaderContent}\n\n      {tableContent}\n\n      {affixedFooterContent}\n\n      {loadingContent}\n\n      {scrollbarDivider}\n\n      {bottom}\n\n      {/* 吸底的滚动条 */}\n      {affixedScrollbar}\n\n      {/* 吸底的分页器 */}\n      {affixedPaginationContent}\n\n      {/* 调整列宽时的指示线。由于层级需要比较高，因而放在根节点，避免被吸顶表头覆盖。非必要情况，请勿调整辅助线位置 */}\n      {resizable && <div ref={resizeLineRef} className={tableBaseClass.resizeLine} style={resizeLineStyle}></div>}\n    </>\n  );\n\n  if (resizable && tableLayout === 'auto') {\n    log.warn(\n      'Table',\n      'table-layout can not be `auto`, cause you are using column resizable, set `table-layout: fixed` please.',\n    );\n  }\n\n  if (!showElement) {\n    <div ref={tableRef}></div>;\n  }\n\n  return (\n    <div ref={tableRef} className={classNames(dynamicBaseTableClasses)} style={{ position: 'relative', ...style }}>\n      {tableElements}\n    </div>\n  );\n});\n\nBaseTable.displayName = 'BaseTable';\n\nexport default BaseTable as <T extends TableRowData = TableRowData>(\n  props: BaseTableProps<T> & RefAttributes<BaseTableRef>,\n) => React.ReactElement;\n"],"names":["BASE_TABLE_EVENTS","BASE_TABLE_ALL_EVENTS","ROW_LISTENERS","map","t","concat","BaseTable","forwardRef","originalProps","ref","_affixHeaderRef$curre","props","useDefaultProps","baseTableDefaultProps","rowKey","showHeader","tableLayout","height","data","columns","style","headerAffixedTop","bordered","resizable","lazyLoad","pagination","tableRef","useRef","tableElmRef","bottomContentRef","_useState","useState","_useState2","_slicedToArray","tableFootHeight","setTableFootHeight","allTableClasses","useClassName","classPrefix","virtualScrollClasses","tableLayoutClasses","tableBaseClass","tableColFixedClasses","_useStyle","useStyle","tableClasses","sizeClassNames","tableContentStyles","tableElementStyles","_useTableHeader","useTableHeader","isMultipleHeader","spansAndLeafNodes","thList","finalColumns","useMemo","leafColumns","_useElementLazyRender","useElementLazyRender","showElement","paginationAffixRef","horizontalScrollAffixRef","headerTopAffixRef","footerBottomAffixRef","_useAffix","useAffix","affixHeaderRef","affixFooterRef","horizontalScrollbarRef","paginationRef","showAffixHeader","showAffixFooter","showAffixPagination","onHorizontalScroll","setTableContentRef","updateAffixHeaderOrFooter","_useFixed","useFixed","scrollbarWidth","tableWidth","tableElmWidth","tableContentRef","isFixedHeader","isWidthOverflow","isFixedColumn","thWidthList","showColumnShadow","rowAndColFixedPosition","setData","refreshTable","setTableElmWidth","emitScrollEvent","setUseFixedTableElmRef","updateColumnFixedShadow","getThWidthList","updateThWidthList","addTableResizeObserver","updateTableAfterColumnResize","_usePagination","usePagination","dataSource","innerPagination","isPaginateData","renderPagination","columnResizeParams","useColumnResize","onColumnResizeChange","resizeLineRef","resizeLineStyle","setEffectColMap","updateTableWidthOnColumnChange","dynamicBaseTableClasses","classNames","_defineProperty","headerFixed","columnFixed","widthOverflow","multipleHeader","leftShadow","left","rightShadow","right","columnResizableTable","tableElmClasses","fullHeight","showRightDivider","_useState3","_useState4","dividerBottom","setDividerBottom","useEffect","_bottomContentRef$cur","_paginationRef$curren","bottomRect","current","getBoundingClientRect","paginationRect","bottom","_useState5","_useState6","lastLeafColumns","setLastLeafColumns","colKey","join","_props$onLeafColumnsC","onLeafColumnsChange","call","onFixedChange","timer","setTimeout","clearTimeout","virtualScrollParams","virtualData","firstFullRow","firstFullRowData","__VIRTUAL_FAKE_DATA","lastFullRow","lastFullRowData","scroll","fixedRows","virtualConfig","useVirtualScroll","isVirtualScroll","visibleData","length","display","offsetHeight","lastScrollY","onInnerVirtualScroll","e","target","top","scrollTop","handleScroll","scrollColumnIntoView","thDom","querySelector","fixedThDom","querySelectorAll","totalWidth","i","len","width","domRect","contentRect","distance","scrollTo","behavior","useImperativeHandle","tableElement","tableHtmlElement","tableContentElement","affixHeaderElement","scrollToElement","getTFootHeight","requestAnimationFrame","_tableElmRef$current$","footData","footerSummary","newData","renderColGroup","React","createElement","col","index","formatCSSUnit","minWidth","key","headProps","maxHeight","ellipsisOverlayClassName","size","attach","thDraggable","headUseMemoDependencies","affixedLeftBorder","IEHeaderWrap","getIEVersion","affixHeaderHeight","renderFixedHeader","headerOpacity","Number","barWidth","affixHeaderWrapHeight","affixHeaderWrapHeightStyle","opacity","affixedHeader","Boolean","className","affixedHeaderElm","_objectSpread","THead","affixHeaderWithWrap","affixedHeaderWrap","renderAffixedHeader","Affix","offsetTop","getAffixProps","headerAffixProps","renderAffixedFooter","_props$footData","marginScrollbarWidth","totalMarginTop","affixedFooter","footerAffixedBottom","affixedFooterWrap","offsetBottom","marginTop","affixedFooterElm","TFoot","rowAttributes","rowClassName","rowspanAndColspanInFooter","tableBodyProps","handleRowMounted","cellEmptyContent","renderExpandedRow","pick","extendTableProps","translate","scrollHeight","virtualStyle","transform","msTransform","MozTransform","WebkitTransform","tableContent","content","onScroll","cursor","TBody","loading","empty","rowspanAndColspan","virtualScroll","loadingProps","customLoadingText","loadingContent","Loading","text","showOverlay","topContent","bottomContent","paginationNode","paginationWrap","affixedHeaderContent","affixedFooterContent","scrollbarDivider","_tableContentRef$curr","affixedScrollbar","horizontalScrollAffixedBottom","obviousScrollbar","overflow","affixedPaginationContent","paginationAffixedBottom","tableElements","Fragment","resizeLine","log","warn","position","displayName"],"mappings":"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"}