{"version":3,"file":"Header.js","sources":["../../../../components/date-picker/base/Header.tsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useCallback, useRef } from 'react';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport useConfig from '../../hooks/useConfig';\nimport Select from '../../select';\nimport { TdDatePickerProps } from '../type';\nimport { PaginationMini, TdPaginationMiniProps } from '../../pagination';\n\nexport interface DatePickerHeaderProps extends Pick<TdDatePickerProps, 'mode'> {\n  year?: number;\n  month?: number;\n  internalYear: Array<number>;\n  partial: 'start' | 'end';\n  onMonthChange?: Function;\n  onYearChange?: Function;\n  onJumperClick?: TdPaginationMiniProps['onChange'];\n}\n\nconst useDatePickerLocalConfig = () => {\n  const [local, t] = useLocaleReceiver('datePicker');\n\n  return {\n    months: t(local.months),\n    nextYear: t(local.nextYear),\n    preYear: t(local.preYear),\n    nextMonth: t(local.nextMonth),\n    preMonth: t(local.preMonth),\n    preDecade: t(local.preDecade),\n    nextDecade: t(local.nextDecade),\n    now: t(local.now),\n  };\n};\n\nconst DatePickerHeader = (props: DatePickerHeaderProps) => {\n  const { classPrefix } = useConfig();\n\n  const { mode, year, month, onMonthChange, onYearChange, onJumperClick, partial, internalYear = [] } = props;\n\n  const { now, months, preMonth, preYear, nextMonth, nextYear, preDecade, nextDecade } = useDatePickerLocalConfig();\n\n  const scrollAnchorRef = useRef('default');\n\n  const monthOptions = months.map((item: string, index: number) => ({ label: item, value: index }));\n\n  const initOptions = useCallback(\n    (year: number) => {\n      const options = [];\n      if (mode === 'year') {\n        const extraYear = year % 10;\n        const minYear = year - extraYear - 100;\n        const maxYear = year - extraYear + 100;\n\n        for (let i = minYear; i <= maxYear; i += 10) {\n          options.push({ label: `${i} - ${i + 9}`, value: i + 9 });\n        }\n      } else {\n        options.push({ label: `${year}`, value: year });\n\n        for (let i = 1; i <= 10; i++) {\n          options.push({ label: `${year + i}`, value: year + i });\n          options.unshift({ label: `${year - i}`, value: year - i });\n        }\n      }\n\n      return options;\n    },\n    [mode],\n  );\n  const [yearOptions, setYearOptions] = useState(() => initOptions(year));\n\n  // 年份选择展示区间\n  const nearestYear: number = useMemo(() => {\n    // 右侧面板年份选择需要保持大于左侧面板年份选择\n    const extraYear = partial === 'end' && mode === 'year' && internalYear[1] - internalYear[0] <= 9 ? 9 : 0;\n    return (\n      yearOptions.find((option) => option.value - (year + extraYear) <= 9 && option.value - (year + extraYear) >= 0)\n        ?.value || year\n    );\n  }, [yearOptions, year, mode, partial, internalYear]);\n\n  useEffect(() => {\n    const yearRange = initOptions(year);\n    setYearOptions(yearRange);\n  }, [initOptions, year]);\n\n  function loadMoreYear(year: number, type?: 'add' | 'reduce') {\n    const options = [];\n    if (mode === 'year') {\n      const extraYear = year % 10;\n      if (type === 'add') {\n        for (let i = year - extraYear + 10; i <= year - extraYear + 50; i += 10) {\n          options.push({ label: `${i} - ${i + 9}`, value: i });\n        }\n      } else {\n        for (let i = year - extraYear - 1; i > year - extraYear - 50; i -= 10) {\n          options.unshift({ label: `${i - 9} - ${i}`, value: i });\n        }\n      }\n    } else if (type === 'add') {\n      for (let i = year + 1; i <= year + 10; i++) {\n        options.push({ label: `${i}`, value: i });\n      }\n    } else {\n      for (let i = year - 1; i > year - 10; i--) {\n        options.unshift({ label: `${i}`, value: i });\n      }\n    }\n\n    return options;\n  }\n\n  // hover title\n  const labelMap = {\n    year: {\n      prev: preDecade,\n      current: now,\n      next: nextDecade,\n    },\n    month: {\n      prev: preYear,\n      current: now,\n      next: nextYear,\n    },\n    date: {\n      prev: preMonth,\n      current: now,\n      next: nextMonth,\n    },\n  };\n\n  const headerClassName = `${classPrefix}-date-picker__header`;\n  const showMonthPicker = mode === 'date' || mode === 'week';\n\n  function handlePanelTopClick(e?: React.MouseEvent) {\n    e?.stopPropagation?.();\n    e?.nativeEvent?.stopImmediatePropagation?.();\n\n    const firstYear = yearOptions[0].value;\n    const options = loadMoreYear(firstYear, 'reduce');\n    setYearOptions([...options, ...yearOptions]);\n  }\n\n  function handlePanelBottomClick(e?: React.MouseEvent) {\n    e?.stopPropagation?.();\n    e?.nativeEvent?.stopImmediatePropagation();\n\n    const lastYear = yearOptions.slice(-1)[0].value;\n    const options = loadMoreYear(lastYear, 'add');\n    setYearOptions([...yearOptions, ...options]);\n  }\n\n  // 滚动顶部底部自动加载\n  function handleScroll({ e }) {\n    if (e.target.scrollTop === 0) {\n      handlePanelTopClick();\n      scrollAnchorRef.current = 'top';\n    } else if (e.target.scrollTop === e.target.scrollHeight - e.target.clientHeight) {\n      handlePanelBottomClick();\n      scrollAnchorRef.current = 'bottom';\n    }\n  }\n\n  function handleUpdateScrollTop(content: HTMLElement) {\n    if (scrollAnchorRef.current === 'top') {\n      // eslint-disable-next-line no-param-reassign\n      content.scrollTop = 30 * 10;\n    } else if (scrollAnchorRef.current === 'bottom') {\n      // eslint-disable-next-line no-param-reassign\n      content.scrollTop = content.scrollHeight - 30 * 10;\n    } else {\n      const firstSelectedNode: HTMLDivElement = content.querySelector(`.${classPrefix}-is-selected`);\n\n      if (firstSelectedNode) {\n        const { paddingBottom } = getComputedStyle(firstSelectedNode);\n        const { marginBottom } = getComputedStyle(content);\n        const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n        // 小于0时不需要特殊处理，会被设为0\n        const updateValue =\n          firstSelectedNode.offsetTop -\n          content.offsetTop -\n          (content.clientHeight - firstSelectedNode.clientHeight) +\n          elementBottomHeight;\n        // eslint-disable-next-line no-param-reassign\n        content.scrollTop = updateValue;\n      }\n    }\n  }\n\n  return (\n    <div className={headerClassName}>\n      <div className={`${headerClassName}-controller`}>\n        {showMonthPicker && (\n          <Select\n            className={`${headerClassName}-controller-month`}\n            value={month}\n            options={monthOptions}\n            onChange={(val) => onMonthChange(val)}\n            popupProps={{\n              attach: (triggerElement: HTMLElement) => triggerElement.parentNode as HTMLElement,\n              overlayClassName: `${headerClassName}-controller-month-popup`,\n            }}\n          />\n        )}\n        <Select\n          className={`${headerClassName}-controller-year`}\n          value={mode === 'year' ? nearestYear : year}\n          options={yearOptions}\n          onChange={(val) => onYearChange(val)}\n          onPopupVisibleChange={(visible) => {\n            if (!visible) scrollAnchorRef.current = 'default';\n          }}\n          popupProps={{\n            onScroll: handleScroll,\n            updateScrollTop: handleUpdateScrollTop,\n            attach: (triggerElement: HTMLElement) => triggerElement.parentNode as HTMLElement,\n            overlayClassName: `${headerClassName}-controller-year-popup`,\n          }}\n          panelTopContent={\n            <div className={`${classPrefix}-select-option`} onClick={handlePanelTopClick}>\n              ...\n            </div>\n          }\n          panelBottomContent={\n            <div className={`${classPrefix}-select-option`} onClick={handlePanelBottomClick}>\n              ...\n            </div>\n          }\n        />\n      </div>\n\n      <PaginationMini tips={labelMap[mode]} size=\"small\" onChange={onJumperClick} />\n    </div>\n  );\n};\n\nDatePickerHeader.displayName = 'DatePickerHeader';\n\nexport default React.memo(DatePickerHeader);\n"],"names":["useDatePickerLocalConfig","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","months","nextYear","preYear","nextMonth","preMonth","preDecade","nextDecade","now","DatePickerHeader","props","_useConfig","useConfig","classPrefix","mode","year","month","onMonthChange","onYearChange","onJumperClick","partial","_props$internalYear","internalYear","_useDatePickerLocalCo","scrollAnchorRef","useRef","monthOptions","map","item","index","label","value","initOptions","useCallback","options","extraYear","minYear","maxYear","i","push","concat","unshift","_useState","useState","_useState2","yearOptions","setYearOptions","nearestYear","useMemo","_yearOptions$find","find","option","useEffect","yearRange","loadMoreYear","type","labelMap","prev","current","next","date","headerClassName","showMonthPicker","handlePanelTopClick","e","_e$stopPropagation","_e$nativeEvent","_e$nativeEvent$stopIm","stopPropagation","call","nativeEvent","stopImmediatePropagation","firstYear","_toConsumableArray","handlePanelBottomClick","_e$stopPropagation2","_e$nativeEvent2","lastYear","slice","handleScroll","_ref","target","scrollTop","scrollHeight","clientHeight","handleUpdateScrollTop","content","firstSelectedNode","querySelector","_getComputedStyle","getComputedStyle","paddingBottom","_getComputedStyle2","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","React","createElement","className","Select","onChange","val","popupProps","attach","triggerElement","parentNode","overlayClassName","onPopupVisibleChange","visible","onScroll","updateScrollTop","panelTopContent","onClick","panelBottomContent","PaginationMini","tips","size","displayName","memo"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAMA,2BAA2B,SAA3BA,2BAAiC;AACrC,EAAA,IAAAC,kBAAA,GAAmBC,kBAAkB,YAAY,CAAA;IAAAC,mBAAA,GAAAC,cAAA,CAAAH,kBAAA,EAAA,CAAA,CAAA;AAA1CI,IAAAA,KAAA,GAAAF,mBAAA,CAAA,CAAA,CAAA;AAAOG,IAAAA,CAAC,GAAAH,mBAAA,CAAA,CAAA,CAAA,CAAA;EAER,OAAA;AACLI,IAAAA,MAAA,EAAQD,CAAE,CAAAD,KAAA,CAAME,MAAM,CAAA;AACtBC,IAAAA,QAAA,EAAUF,CAAE,CAAAD,KAAA,CAAMG,QAAQ,CAAA;AAC1BC,IAAAA,OAAA,EAASH,CAAE,CAAAD,KAAA,CAAMI,OAAO,CAAA;AACxBC,IAAAA,SAAA,EAAWJ,CAAE,CAAAD,KAAA,CAAMK,SAAS,CAAA;AAC5BC,IAAAA,QAAA,EAAUL,CAAE,CAAAD,KAAA,CAAMM,QAAQ,CAAA;AAC1BC,IAAAA,SAAA,EAAWN,CAAE,CAAAD,KAAA,CAAMO,SAAS,CAAA;AAC5BC,IAAAA,UAAA,EAAYP,CAAE,CAAAD,KAAA,CAAMQ,UAAU,CAAA;AAC9BC,IAAAA,GAAA,EAAKR,CAAE,CAAAD,KAAA,CAAMS,GAAG,CAAA;GAClB,CAAA;AACF,CAAA,CAAA;AAEA,IAAMC,gBAAA,GAAmB,SAAnBA,gBAAAA,CAAoBC,KAAiC,EAAA;AACnD,EAAA,IAAAC,UAAA,GAAkBC,SAAU,EAAA;IAA1BC,WAAY,GAAAF,UAAA,CAAZE,WAAY,CAAA;AAEd,EAAA,IAAEC,IAAM,GAAwFJ,KAAA,CAA9FI,IAAM;IAAAC,IAAA,GAAwFL,KAAA,CAAxFK,IAAA;IAAMC,KAAO,GAA2EN,KAAA,CAAlFM,KAAO;IAAAC,aAAA,GAA2EP,KAAA,CAA3EO,aAAA;IAAeC,YAAc,GAA8CR,KAAA,CAA5DQ,YAAc;IAAAC,aAAA,GAA8CT,KAAA,CAA9CS,aAAA;IAAeC,OAAS,GAAsBV,KAAA,CAA/BU,OAAS;IAAAC,mBAAA,GAAsBX,KAAA,CAAtBY,YAAA;AAAAA,IAAAA,YAAA,GAAAD,mBAAA,KAAe,KAAA,CAAA,GAAA,EAAC,GAAAA,mBAAA,CAAA;AAE1F,EAAA,IAAAE,qBAAA,GAAiF7B,wBAAyB,EAAA;IAAxGc,GAAK,GAAAe,qBAAA,CAALf,GAAK;IAAAP,MAAA,GAAAsB,qBAAA,CAAAtB,MAAA;IAAQI,QAAU,GAAAkB,qBAAA,CAAVlB,QAAU;IAAAF,OAAA,GAAAoB,qBAAA,CAAApB,OAAA;IAASC,kCAAAA;IAAWF,QAAU,GAAAqB,qBAAA,CAAVrB,QAAU;IAAAI,SAAA,GAAAiB,qBAAA,CAAAjB,SAAA;IAAWC,UAAW,GAAAgB,qBAAA,CAAXhB,UAAW,CAAA;AAE7E,EAAA,IAAAiB,eAAA,GAAkBC,OAAO,SAAS,CAAA,CAAA;EAElC,IAAAC,YAAA,GAAezB,MAAO,CAAA0B,GAAA,CAAI,UAACC,IAAA,EAAcC,KAAmB,EAAA;IAAA,OAAA;AAAEC,MAAAA,KAAO,EAAAF,IAAA;AAAMG,MAAAA,KAAO,EAAAF,KAAAA;KAAQ,CAAA;AAAA,GAAA,CAAA,CAAA;AAEhG,EAAA,IAAMG,WAAc,GAAAC,WAAA,CAClB,UAAClB,KAAiB,EAAA;IAChB,IAAMmB,UAAU,EAAC,CAAA;IACjB,IAAIpB,SAAS,MAAQ,EAAA;AACnB,MAAA,IAAMqB,YAAYpB,KAAO,GAAA,EAAA,CAAA;AACnB,MAAA,IAAAqB,OAAA,GAAUrB,QAAOoB,SAAY,GAAA,GAAA,CAAA;AAC7B,MAAA,IAAAE,OAAA,GAAUtB,QAAOoB,SAAY,GAAA,GAAA,CAAA;AAEnC,MAAA,KAAA,IAASG,CAAI,GAAAF,OAAA,EAASE,CAAK,IAAAD,OAAA,EAASC,KAAK,EAAI,EAAA;QACnCJ,OAAA,CAAAK,IAAA,CAAK;UAAET,KAAA,EAAA,EAAA,CAAAU,MAAA,CAAUF,CAAA,EAAA,KAAA,CAAA,CAAAE,MAAA,CAAOF,IAAI,CAAK,CAAA;UAAAP,KAAA,EAAOO,CAAI,GAAA,CAAA;AAAE,SAAC,CAAA,CAAA;AACzD,OAAA;AACF,KAAO,MAAA;MACLJ,OAAA,CAAQK,KAAK;AAAET,QAAAA,KAAA,EAAAU,EAAAA,CAAAA,MAAA,CAAUzB,KAAQ,CAAA;AAAAgB,QAAAA,KAAA,EAAOhB,KAAAA;AAAK,OAAC,CAAA,CAAA;MAE9C,KAAA,IAASuB,EAAI,GAAA,CAAA,EAAGA,EAAK,IAAA,EAAA,EAAIA,EAAK,EAAA,EAAA;QACpBJ,OAAA,CAAAK,IAAA,CAAK;AAAET,UAAAA,KAAO,KAAAU,MAAA,CAAGzB,QAAOuB,EAAK,CAAA;UAAAP,KAAA,EAAOhB,KAAO,GAAAuB,EAAAA;AAAE,SAAC,CAAA,CAAA;QAC9CJ,OAAA,CAAAO,OAAA,CAAQ;AAAEX,UAAAA,KAAO,KAAAU,MAAA,CAAGzB,QAAOuB,EAAK,CAAA;UAAAP,KAAA,EAAOhB,KAAO,GAAAuB,EAAAA;AAAE,SAAC,CAAA,CAAA;AAC3D,OAAA;AACF,KAAA;AAEO,IAAA,OAAAJ,OAAA,CAAA;AACT,GAAA,EACA,CAACpB,IAAI,CACP,CAAA,CAAA;EACM,IAAA4B,SAAA,GAAgCC,SAAS,YAAA;MAAA,OAAMX,WAAA,CAAYjB,IAAI,CAAC,CAAA;KAAA,CAAA;IAAA6B,UAAA,GAAA9C,cAAA,CAAA4C,SAAA,EAAA,CAAA,CAAA;AAA/DG,IAAAA;AAAaC,IAAAA,cAAc,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;AAG5B,EAAA,IAAAG,WAAA,GAAsBC,QAAQ,YAAM;AAAA,IAAA,IAAAC,iBAAA,CAAA;IAElC,IAAAd,SAAA,GAAYf,OAAY,KAAA,KAAA,IAASN,IAAS,KAAA,MAAA,IAAUQ,aAAa,CAAK,CAAA,GAAAA,YAAA,CAAa,CAAM,CAAA,IAAA,CAAA,GAAI,CAAI,GAAA,CAAA,CAAA;IACvG,OACE,CAAA,CAAA2B,iBAAA,GAAAJ,WAAY,CAAAK,IAAA,CAAK,UAACC,MAAA,EAAA;MAAA,OAAWA,OAAOpB,KAAS,IAAAhB,IAAA,GAAOoB,SAAc,CAAA,IAAA,CAAA,IAAKgB,OAAOpB,KAAS,IAAAhB,IAAA,GAAOoB,SAAc,CAAA,IAAA,CAAC,CAAA;AAAA,KAAA,uDAA7Gc,iBAAA,CACIlB,KAAS,KAAAhB,IAAA,CAAA;AAEjB,KAAG,CAAC8B,WAAA,EAAa9B,MAAMD,IAAM,EAAAM,OAAA,EAASE,YAAY,CAAC,CAAA,CAAA;AAEnD8B,EAAAA,SAAA,CAAU,YAAM;AACR,IAAA,IAAAC,SAAA,GAAYrB,YAAYjB,IAAI,CAAA,CAAA;IAClC+B,cAAA,CAAeO,SAAS,CAAA,CAAA;AAC1B,GAAG,EAAA,CAACrB,WAAa,EAAAjB,IAAI,CAAC,CAAA,CAAA;AAEb,EAAA,SAAAuC,YAAAA,CAAavC,OAAcwC,IAAyB,EAAA;IAC3D,IAAMrB,UAAU,EAAC,CAAA;IACjB,IAAIpB,SAAS,MAAQ,EAAA;AACnB,MAAA,IAAMqB,YAAYpB,KAAO,GAAA,EAAA,CAAA;MACzB,IAAIwC,SAAS,KAAO,EAAA;QACT,KAAA,IAAAjB,CAAA,GAAIvB,QAAOoB,SAAY,GAAA,EAAA,EAAIG,KAAKvB,KAAO,GAAAoB,SAAA,GAAY,EAAI,EAAAG,CAAA,IAAK,EAAI,EAAA;UAC/DJ,OAAA,CAAAK,IAAA,CAAK;YAAET,KAAO,EAAA,EAAA,CAAAU,MAAA,CAAGF,iBAAOA,CAAI,GAAA,CAAA,CAAA;AAAKP,YAAAA,KAAO,EAAAO,CAAAA;AAAE,WAAC,CAAA,CAAA;AACrD,SAAA;AACF,OAAO,MAAA;QACI,KAAA,IAAAA,GAAA,GAAIvB,QAAOoB,SAAY,GAAA,CAAA,EAAGG,MAAIvB,KAAO,GAAAoB,SAAA,GAAY,EAAI,EAAAG,GAAA,IAAK,EAAI,EAAA;UAC7DJ,OAAA,CAAAO,OAAA,CAAQ;YAAEX,KAAO,EAAA,EAAA,CAAAU,MAAA,CAAGF,MAAI,CAAO,EAAAE,KAAAA,CAAAA,CAAAA,MAAA,CAAAF,GAAA,CAAA;AAAKP,YAAAA,KAAO,EAAAO,GAAAA;AAAE,WAAC,CAAA,CAAA;AACxD,SAAA;AACF,OAAA;AACF,KAAA,MAAA,IAAWiB,SAAS,KAAO,EAAA;AACzB,MAAA,KAAA,IAASjB,MAAIvB,KAAO,GAAA,CAAA,EAAGuB,GAAKvB,IAAAA,KAAAA,GAAO,IAAIuB,GAAK,EAAA,EAAA;QAC1CJ,OAAA,CAAQK,KAAK;AAAET,UAAAA,KAAA,EAAAU,EAAAA,CAAAA,MAAA,CAAUF,GAAK,CAAA;AAAAP,UAAAA,KAAA,EAAOO,GAAAA;AAAE,SAAC,CAAA,CAAA;AAC1C,OAAA;AACF,KAAO,MAAA;AACL,MAAA,KAAA,IAASA,MAAIvB,KAAO,GAAA,CAAA,EAAGuB,GAAIvB,GAAAA,KAAAA,GAAO,IAAIuB,GAAK,EAAA,EAAA;QACzCJ,OAAA,CAAQO,QAAQ;AAAEX,UAAAA,KAAA,EAAAU,EAAAA,CAAAA,MAAA,CAAUF,GAAK,CAAA;AAAAP,UAAAA,KAAA,EAAOO,GAAAA;AAAE,SAAC,CAAA,CAAA;AAC7C,OAAA;AACF,KAAA;AAEO,IAAA,OAAAJ,OAAA,CAAA;AACT,GAAA;AAGA,EAAA,IAAMsB,QAAW,GAAA;AACfzC,IAAAA,IAAM,EAAA;AACJ0C,MAAAA,IAAM,EAAAnD,SAAA;AACNoD,MAAAA,OAAS,EAAAlD,GAAA;AACTmD,MAAAA,IAAM,EAAApD,UAAAA;KACR;AACAS,IAAAA,KAAO,EAAA;AACLyC,MAAAA,IAAM,EAAAtD,OAAA;AACNuD,MAAAA,OAAS,EAAAlD,GAAA;AACTmD,MAAAA,IAAM,EAAAzD,QAAAA;KACR;AACA0D,IAAAA,IAAM,EAAA;AACJH,MAAAA,IAAM,EAAApD,QAAA;AACNqD,MAAAA,OAAS,EAAAlD,GAAA;AACTmD,MAAAA,IAAM,EAAAvD,SAAAA;AACR,KAAA;GACF,CAAA;AAEA,EAAA,IAAMyD,4BAAqBhD,WAAA,EAAA,sBAAA,CAAA,CAAA;EACrB,IAAAiD,eAAA,GAAkBhD,IAAS,KAAA,MAAA,IAAUA,IAAS,KAAA,MAAA,CAAA;EAEpD,SAASiD,oBAAoBC,CAAsB,EAAA;AAAA,IAAA,IAAAC,kBAAA,EAAAC,cAAA,EAAAC,qBAAA,CAAA;AACjDH,IAAAA,CAAA,aAAAA,CAAA,KAAA,KAAA,CAAA,IAAA,CAAAC,kBAAA,GAAAD,CAAA,CAAGI,eAAkB,MAAAH,IAAAA,IAAAA,kBAAA,eAArBA,kBAAA,CAAAI,IAAA,CAAAL,CAAqB,CAAA,CAAA;IACrBA,CAAA,KAAA,IAAA,IAAAA,CAAA,KAAA,KAAA,CAAA,IAAA,CAAAE,cAAA,GAAAF,CAAA,CAAGM,+EAAHJ,cAAA,CAAgBK,wBAA2B,MAAA,IAAA,IAAAJ,qBAAA,KAAA,KAAA,CAAA,IAA3CA,qBAAA,CAAAE,IAAA,CAAAH,cAA2C,CAAA,CAAA;AAErC,IAAA,IAAAM,SAAA,GAAY3B,YAAY,CAAG,CAAA,CAAAd,KAAA,CAAA;AAC3B,IAAA,IAAAG,OAAA,GAAUoB,YAAa,CAAAkB,SAAA,EAAW,QAAQ,CAAA,CAAA;IAChD1B,cAAA,CAAA,EAAA,CAAAN,MAAA,CAAAiC,kBAAA,CAAmBvC,OAAS,CAAA,EAAAuC,kBAAA,CAAG5B,WAAW,CAAA,CAAC,CAAA,CAAA;AAC7C,GAAA;EAEA,SAAS6B,uBAAuBV,CAAsB,EAAA;IAAA,IAAAW,mBAAA,EAAAC,eAAA,CAAA;AACpDZ,IAAAA,CAAA,aAAAA,CAAA,KAAA,KAAA,CAAA,IAAA,CAAAW,mBAAA,GAAAX,CAAA,CAAGI,eAAkB,MAAAO,IAAAA,IAAAA,mBAAA,eAArBA,mBAAA,CAAAN,IAAA,CAAAL,CAAqB,CAAA,CAAA;AACrBA,IAAAA,CAAA,KAAAA,IAAAA,IAAAA,CAAA,KAAAY,KAAAA,CAAAA,IAAAA,CAAAA,eAAA,GAAAZ,CAAA,CAAGM,6CAAHM,KAAAA,CAAAA,IAAAA,eAAA,CAAgBL,wBAAyB,EAAA,CAAA;AAEzC,IAAA,IAAMM,QAAW,GAAAhC,WAAA,CAAYiC,KAAM,CAAA,CAAA,CAAE,EAAE,CAAG,CAAA,CAAA/C,KAAA,CAAA;AACpC,IAAA,IAAAG,OAAA,GAAUoB,YAAa,CAAAuB,QAAA,EAAU,KAAK,CAAA,CAAA;IAC5C/B,cAAA,CAAA,EAAA,CAAAN,MAAA,CAAAiC,kBAAA,CAAmB5B,WAAa,CAAA,EAAA4B,kBAAA,CAAGvC,OAAO,CAAA,CAAC,CAAA,CAAA;AAC7C,GAAA;EAGS,SAAA6C,YAAAA,CAAAC,IAAA,EAAoB;AAAA,IAAA,IAALhB,CAAA,GAAAgB,IAAA,CAAAhB,CAAA,CAAA;AAClB,IAAA,IAAAA,CAAA,CAAEiB,MAAO,CAAAC,SAAA,KAAc,CAAG,EAAA;AACRnB,MAAAA,mBAAA,EAAA,CAAA;MACpBvC,eAAA,CAAgBkC,OAAU,GAAA,KAAA,CAAA;AAC5B,KAAA,MAAA,IAAWM,EAAEiB,MAAO,CAAAC,SAAA,KAAclB,EAAEiB,MAAO,CAAAE,YAAA,GAAenB,CAAE,CAAAiB,MAAA,CAAOG,YAAc,EAAA;AACxDV,MAAAA,sBAAA,EAAA,CAAA;MACvBlD,eAAA,CAAgBkC,OAAU,GAAA,QAAA,CAAA;AAC5B,KAAA;AACF,GAAA;EAEA,SAAS2B,sBAAsBC,OAAsB,EAAA;AAC/C,IAAA,IAAA9D,eAAA,CAAgBkC,YAAY,KAAO,EAAA;AAErC4B,MAAAA,OAAA,CAAQJ,YAAY,EAAK,GAAA,EAAA,CAAA;AAC3B,KAAA,MAAA,IAAW1D,eAAgB,CAAAkC,OAAA,KAAY,QAAU,EAAA;MAEvC4B,OAAA,CAAAJ,SAAA,GAAYI,OAAQ,CAAAH,YAAA,GAAe,EAAK,GAAA,EAAA,CAAA;AAClD,KAAO,MAAA;MACL,IAAMI,iBAAoC,GAAAD,OAAA,CAAQE,aAAc,KAAAhD,MAAA,CAAI3B,WAAyB,EAAA,cAAA,CAAA,CAAA,CAAA;AAE7F,MAAA,IAAI0E,iBAAmB,EAAA;AACrB,QAAA,IAAAE,iBAAA,GAA0BC,gBAAA,CAAiBH,iBAAiB,CAAA;UAApDI,aAAA,GAAAF,iBAAA,CAAAE,aAAA,CAAA;AACR,QAAA,IAAAC,kBAAA,GAAyBF,gBAAA,CAAiBJ,OAAO,CAAA;UAAzCO,YAAA,GAAAD,kBAAA,CAAAC,YAAA,CAAA;AACR,QAAA,IAAMC,sBAAsBC,QAAS,CAAAJ,aAAA,EAAe,EAAE,CAAI,GAAAI,QAAA,CAASF,cAAc,EAAE,CAAA,CAAA;AAE7E,QAAA,IAAAG,WAAA,GACJT,kBAAkBU,SAClB,GAAAX,OAAA,CAAQW,aACPX,OAAQ,CAAAF,YAAA,GAAeG,kBAAkBH,YAC1C,CAAA,GAAAU,mBAAA,CAAA;QAEFR,OAAA,CAAQJ,SAAY,GAAAc,WAAA,CAAA;AACtB,OAAA;AACF,KAAA;AACF,GAAA;AAEA,EAAA,sBACGE,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIC,IAAAA,SAAW,EAAAvC,eAAAA;AAAA,GAAA,iBACbqC,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAIC,qBAAcvC,eAAA,EAAA,aAAA,CAAA;GAAA,EAChBC,kCACEoC,KAAA,CAAAC,aAAA,CAAAE,MAAA,EAAA;AACCD,IAAAA,qBAAcvC,eAAA,EAAA,mBAAA,CAAA;AACd9B,IAAAA,KAAO,EAAAf,KAAA;AACPkB,IAAAA,OAAS,EAAAR,YAAA;AACT4E,IAAAA,QAAU,EAAA,SAAVA,QAAUA,CAACC,GAAQ,EAAA;MAAA,OAAAtF,aAAA,CAAcsF,GAAG,CAAA,CAAA;AAAA,KAAA;AACpCC,IAAAA,UAAY,EAAA;AACVC,MAAAA,MAAA,EAAQ,SAARA,MAAAA,CAASC,cAAA,EAAA;QAAA,OAAgCA,cAAe,CAAAC,UAAA,CAAA;AAAA,OAAA;MACxDC,4BAAqB/C,eAAA,EAAA,yBAAA,CAAA;AACvB,KAAA;GACF,kBAEDqC,KAAA,CAAAC,aAAA,CAAAE,MAAA,EAAA;AACCD,IAAAA,qBAAcvC,eAAA,EAAA,kBAAA,CAAA;AACd9B,IAAAA,KAAA,EAAOjB,IAAS,KAAA,MAAA,GAASiC,WAAc,GAAAhC,IAAA;AACvCmB,IAAAA,OAAS,EAAAW,WAAA;AACTyD,IAAAA,QAAU,EAAA,SAAVA,QAAUA,CAACC,GAAQ,EAAA;MAAA,OAAArF,YAAA,CAAaqF,GAAG,CAAA,CAAA;AAAA,KAAA;AACnCM,IAAAA,oBAAA,EAAsB,SAAtBA,oBAAAA,CAAuBC,OAAY,EAAA;AACjC,MAAA,IAAI,CAACA,OAAA,EAAStF,eAAA,CAAgBkC,OAAU,GAAA,SAAA,CAAA;KAC1C;AACA8C,IAAAA,UAAY,EAAA;AACVO,MAAAA,QAAU,EAAAhC,YAAA;AACViC,MAAAA,eAAiB,EAAA3B,qBAAA;AACjBoB,MAAAA,MAAA,EAAQ,SAARA,MAAAA,CAASC,cAAA,EAAA;QAAA,OAAgCA,cAAe,CAAAC,UAAA,CAAA;AAAA,OAAA;MACxDC,4BAAqB/C,eAAA,EAAA,wBAAA,CAAA;KACvB;AACAoD,IAAAA,gCACGf,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIC,MAAAA,qBAAcvF,WAAA,EAAA,gBAAA,CAAA;AAA6BqG,MAAAA,OAAS,EAAAnD,mBAAAA;KAAA,EAAqB,KAE9E,CAAA;AAEFoD,IAAAA,mCACGjB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIC,MAAAA,qBAAcvF,WAAA,EAAA,gBAAA,CAAA;AAA6BqG,MAAAA,OAAS,EAAAxC,sBAAAA;AAAA,KAAA,EAAwB,KAEjF,CAAA;GAEJ,CACF,kBAECwB,KAAA,CAAAC,aAAA,CAAAiB,cAAA,EAAA;AAAeC,IAAAA,MAAM7D,QAAS,CAAA1C,IAAA,CAAA;AAAOwG,IAAAA,IAAK,EAAA,OAAA;AAAQhB,IAAAA,QAAU,EAAAnF,aAAAA;AAAA,GAAe,CAC9E,CAAA,CAAA;AAEJ,CAAA,CAAA;AAEAV,gBAAA,CAAiB8G,WAAc,GAAA,kBAAA,CAAA;AAE/B,iBAAA,aAAerB,KAAA,CAAMsB,KAAK/G,gBAAgB,CAAA;;;;"}