{"version":3,"file":"PopupContent.js","sources":["../../../../components/select/base/PopupContent.tsx"],"sourcesContent":["import React, { Children, cloneElement, isValidElement, useMemo, useRef } from 'react';\n\nimport classNames from 'classnames';\nimport { isEqual } from 'lodash-es';\n\nimport useConfig from '../../hooks/useConfig';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport usePanelVirtualScroll from '../hooks/usePanelVirtualScroll';\nimport { getSelectValueArr } from '../util/helper';\nimport Option, { type SelectOptionProps } from './Option';\nimport OptionGroup from './OptionGroup';\n\nimport type {\n  SelectOption,\n  SelectOptionGroup,\n  SelectValue,\n  SelectValueChangeTrigger,\n  TdOptionProps,\n  TdSelectProps,\n} from '../type';\n\ninterface SelectPopupProps\n  extends Pick<\n    TdSelectProps,\n    | 'value'\n    | 'size'\n    | 'multiple'\n    | 'empty'\n    | 'options'\n    | 'max'\n    | 'loadingText'\n    | 'loading'\n    | 'valueType'\n    | 'keys'\n    | 'panelTopContent'\n    | 'panelBottomContent'\n    | 'scroll'\n  > {\n  onChange?: (\n    value: SelectValue,\n    context?: {\n      label?: string | number;\n      value?: SelectValue;\n      restData?: Record<string, any>;\n      e: React.MouseEvent<HTMLLIElement>;\n      trigger: SelectValueChangeTrigger;\n    },\n  ) => void;\n  /**\n   * 是否展示popup\n   */\n  showPopup: boolean;\n  /**\n   * 控制popup展示的函数\n   */\n  setShowPopup: (show: boolean) => void;\n  children?: React.ReactNode;\n  onCheckAllChange?: (checkAll: boolean, e: React.MouseEvent<HTMLLIElement>) => void;\n  getPopupInstance?: () => HTMLDivElement;\n}\n\nconst PopupContent = React.forwardRef<HTMLDivElement, SelectPopupProps>((props, ref) => {\n  const {\n    value,\n    size,\n    max,\n    multiple,\n    showPopup,\n    setShowPopup,\n    empty,\n    loadingText,\n    loading,\n    valueType,\n    children,\n    keys,\n    panelTopContent,\n    panelBottomContent,\n    onChange,\n    onCheckAllChange,\n    getPopupInstance,\n    options: propsOptions,\n    scroll: propsScroll,\n  } = props;\n\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('select');\n  const emptyText = t(local.empty);\n  const popupContentRef = useRef<HTMLDivElement>(null);\n\n  popupContentRef.current = getPopupInstance();\n\n  const { visibleData, handleRowMounted, isVirtual, panelStyle, cursorStyle } = usePanelVirtualScroll({\n    popupContentRef,\n    scroll: propsScroll,\n    options: propsOptions,\n    size,\n  });\n\n  const optionsExcludedCheckAll = useMemo(() => {\n    const uniqueOptions = {};\n    propsOptions?.forEach((option: SelectOption) => {\n      if ((option as SelectOptionGroup).group) {\n        (option as SelectOptionGroup).children.forEach((item) => {\n          if (!item.checkAll) {\n            uniqueOptions[item.value] = item;\n          }\n        });\n      } else if (!(option as TdOptionProps).checkAll) {\n        uniqueOptions[(option as TdOptionProps).value] = option;\n      }\n    });\n    return Object.values(uniqueOptions);\n  }, [propsOptions]);\n\n  const { classPrefix } = useConfig();\n  if (!children && !propsOptions) {\n    return null;\n  }\n\n  const onSelect: SelectOptionProps['onSelect'] = (selectedValue, { label, selected, event, restData }) => {\n    const isValObj = valueType === 'object';\n    let objVal = {};\n    if (isValObj) {\n      objVal = { ...restData };\n      if (!keys?.label) {\n        Object.assign(objVal, { label });\n      }\n      if (!keys?.value) {\n        Object.assign(objVal, { value: selectedValue });\n      }\n    }\n\n    if (!Object.keys(objVal).length) {\n      Object.assign(objVal, { [keys?.label || 'label']: label, [keys?.value || 'value']: selectedValue });\n    }\n\n    if (multiple) {\n      // calc multiple select values\n      const values = getSelectValueArr(value, selectedValue, selected, valueType, keys, objVal);\n      onChange(values, { label, value: selectedValue, e: event, trigger: selected ? 'uncheck' : 'check' });\n    } else {\n      // calc single select value\n      const selectVal = valueType === 'object' ? objVal : selectedValue;\n\n      if (!isEqual(value, selectVal)) {\n        onChange(selectVal, { label, value: selectVal, e: event, trigger: 'check' });\n      }\n      setShowPopup(!showPopup);\n    }\n  };\n\n  const childrenWithProps = Children.map(children, (child) => {\n    if (isValidElement(child)) {\n      const addedProps = { size, max, multiple, selectedValue: value, onSelect };\n      return cloneElement(child, { ...addedProps });\n    }\n    return child;\n  });\n\n  // 渲染 options\n  const renderOptions = (options: SelectOption[]) => {\n    if (options) {\n      // 通过 options API配置的\n      return (\n        <ul className={`${classPrefix}-select__list`}>\n          {options.map((item, index) => {\n            const { group, divider, ...rest } = item as SelectOptionGroup;\n            if (group) {\n              return (\n                <OptionGroup label={group} divider={divider} key={index} {...rest}>\n                  {renderOptions(rest.children)}\n                </OptionGroup>\n              );\n            }\n\n            const { value: optionValue, label, disabled, children, ...restData } = item as TdOptionProps;\n            // 当 keys 属性配置 content 作为 value 或 label 时，确保 restData 中也包含它, 不参与渲染计算\n            const { content } = item as TdOptionProps;\n            const shouldOmitContent = Object.values(keys || {}).includes('content');\n            return (\n              <Option\n                key={index}\n                max={max}\n                label={label}\n                value={optionValue}\n                onSelect={onSelect}\n                selectedValue={value}\n                optionLength={optionsExcludedCheckAll.length}\n                multiple={multiple}\n                size={size}\n                disabled={disabled}\n                restData={restData}\n                keys={keys}\n                onCheckAllChange={onCheckAllChange}\n                onRowMounted={handleRowMounted}\n                {...(isVirtual\n                  ? {\n                      isVirtual,\n                      bufferSize: propsScroll?.bufferSize,\n                      scrollType: propsScroll?.type,\n                    }\n                  : {})}\n                {...restData}\n                content={shouldOmitContent ? null : content}\n              >\n                {children}\n              </Option>\n            );\n          })}\n        </ul>\n      );\n    }\n    return <ul className={`${classPrefix}-select__list`}>{childrenWithProps}</ul>;\n  };\n\n  const isEmpty =\n    (Array.isArray(childrenWithProps) && !childrenWithProps.length) || (propsOptions && propsOptions.length === 0);\n\n  const renderPanel = (renderedOptions: SelectOption[], extraStyle?: React.CSSProperties) => (\n    <div\n      ref={ref}\n      className={classNames(`${classPrefix}-select__dropdown-inner`, {\n        [`${classPrefix}-select__dropdown-inner--size-s`]: size === 'small',\n        [`${classPrefix}-select__dropdown-inner--size-l`]: size === 'large',\n        [`${classPrefix}-select__dropdown-inner--size-m`]: size === 'medium',\n      })}\n      style={extraStyle}\n    >\n      {loading && <div className={`${classPrefix}-select__loading-tips`}>{loadingText}</div>}\n      {!loading && isEmpty && (\n        <div className={`${classPrefix}-select__empty`}>{empty ? empty : <p>{emptyText}</p>}</div>\n      )}\n      {!loading && !isEmpty && renderOptions(renderedOptions)}\n    </div>\n  );\n  if (isVirtual) {\n    return (\n      <>\n        {panelTopContent}\n        <div>\n          <div style={cursorStyle}></div>\n          {renderPanel(visibleData, panelStyle)}\n        </div>\n        {panelBottomContent}\n      </>\n    );\n  }\n\n  return (\n    <>\n      {panelTopContent}\n      {renderPanel(propsOptions)}\n      {panelBottomContent}\n    </>\n  );\n});\n\nexport default PopupContent;\n"],"names":["PopupContent","React","forwardRef","props","ref","value","size","max","multiple","showPopup","setShowPopup","empty","loadingText","loading","valueType","children","keys","panelTopContent","panelBottomContent","onChange","onCheckAllChange","getPopupInstance","propsOptions","options","propsScroll","scroll","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","emptyText","popupContentRef","useRef","current","_usePanelVirtualScrol","usePanelVirtualScroll","visibleData","handleRowMounted","isVirtual","panelStyle","cursorStyle","optionsExcludedCheckAll","useMemo","uniqueOptions","forEach","option","group","item","checkAll","Object","values","_useConfig","useConfig","classPrefix","onSelect","selectedValue","_ref","label","selected","event","restData","isValObj","objVal","_objectSpread","assign","length","_defineProperty","getSelectValueArr","e","trigger","selectVal","isEqual","childrenWithProps","Children","map","child","isValidElement","addedProps","cloneElement","renderOptions","createElement","className","index","divider","rest","_objectWithoutProperties","_excluded","OptionGroup","key","optionValue","disabled","_excluded2","content","shouldOmitContent","includes","Option","optionLength","onRowMounted","bufferSize","scrollType","type","isEmpty","Array","isArray","renderPanel","renderedOptions","extraStyle","classNames","concat","style","Fragment"],"mappings":"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"}