{"version":3,"file":"Slider.js","sources":["../../../components/slider/Slider.tsx"],"sourcesContent":["import React, { useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport { isFunction, isString, isNumber } from 'lodash-es';\nimport { largeNumberToFixed } from '@tdesign/common-js/input-number/large-number';\nimport { accAdd } from '../_util/number';\nimport type { StyledProps, TNode } from '../common';\nimport useConfig from '../hooks/useConfig';\nimport useControlled from '../hooks/useControlled';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport type { MouseCallback } from '../hooks/useMouseEvent';\nimport InputNumber from '../input-number/InputNumber';\nimport { sliderDefaultProps } from './defaultProps';\nimport SliderHandleButton from './SliderHandleButton';\nimport type { TdSliderProps } from './type';\nimport { numberToPercent } from './utils/handleNumber';\n\nexport type SliderProps = TdSliderProps & StyledProps;\n\nconst LEFT_NODE = 0;\nconst RIGHT_NODE = 1;\ntype SliderHandleNode = typeof LEFT_NODE | typeof RIGHT_NODE;\n\nconst Slider = React.forwardRef<HTMLDivElement, SliderProps>((originalProps, ref) => {\n  const { classPrefix } = useConfig();\n  const props = useDefaultProps(originalProps, sliderDefaultProps);\n  const {\n    disabled,\n    inputNumberProps,\n    label,\n    layout,\n    marks,\n    max,\n    min,\n    range,\n    step,\n    tooltipProps,\n    className,\n    style,\n    onChange,\n  } = props;\n\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const [value, internalOnChange] = useControlled(props, 'value', onChange);\n  const isVertical = layout === 'vertical';\n\n  const renderValue = Array.isArray(value) ? value : [min, value];\n  const start = (renderValue[LEFT_NODE] - min) / (max - min);\n  const width = (renderValue[RIGHT_NODE] - renderValue[LEFT_NODE]) / (max - min);\n  const end = start + width;\n\n  const precision = useMemo(() => {\n    if (!Number.isInteger(step)) return step.toString().split('.')[1].length;\n    return undefined;\n  }, [step]);\n\n  const dots = useMemo<{ value: number; label: TNode; position: number }[]>(() => {\n    // 当 marks 为数字数组\n    if (Array.isArray(marks)) {\n      if (marks.some((mark) => typeof mark !== 'number')) {\n        console.warn('The props \"marks\" only support number!');\n        return [];\n      }\n      return marks.map((mark) => ({ value: mark, position: (mark - min) / (max - min), label: mark }));\n    }\n    // 当 marks 为对象\n    if (marks && typeof marks === 'object') {\n      const result = [];\n      Object.keys(marks).forEach((key) => {\n        const numberKey = Number(key);\n        if (typeof numberKey !== 'number') {\n          console.warn('The props \"marks\" key only support number!');\n        } else {\n          result.push({\n            value: numberKey,\n            label: marks[numberKey],\n            position: (numberKey - min) / (max - min),\n          });\n        }\n      });\n      return result;\n    }\n    return [];\n  }, [max, min, marks]);\n\n  const allDots = useMemo(() => {\n    // 默认\n    const result = [];\n    for (let i = min; i <= max; i = accAdd(i, step)) {\n      result.push({\n        value: i,\n        position: (i - min) / (max - min),\n      });\n    }\n    return result;\n  }, [max, min, step]);\n\n  const startDirection = isVertical ? 'bottom' : 'left';\n  const stepDirection = isVertical ? 'top' : 'left';\n  const sizeKey = isVertical ? 'height' : 'width';\n  const renderDots = isVertical ? dots.map((item) => ({ ...item, position: 1 - item.position })) : dots;\n\n  const handleInputChange = (newValue: number, nodeIndex: SliderHandleNode) => {\n    const safeValue = Number(newValue.toFixed(32));\n    let resultValue = Math.max(Math.min(max, safeValue), min);\n    if (precision) resultValue = Number(largeNumberToFixed(String(resultValue), precision));\n    // 判断是否出现左值大于右值\n    if (nodeIndex === LEFT_NODE && value && safeValue > value[RIGHT_NODE]) resultValue = value[RIGHT_NODE];\n    // 判断是否出现右值大于左值\n    if (nodeIndex === RIGHT_NODE && value && safeValue < value[LEFT_NODE]) resultValue = value[LEFT_NODE];\n    if (Array.isArray(value)) {\n      const arrValue = value.slice();\n      arrValue[nodeIndex] = resultValue;\n      internalOnChange(arrValue);\n    } else {\n      internalOnChange(resultValue);\n    }\n  };\n\n  const createInput = (nodeIndex: SliderHandleNode) => {\n    const inputProps = typeof inputNumberProps === 'object' ? inputNumberProps : {};\n    const currentValue = renderValue[nodeIndex];\n\n    return (\n      <InputNumber\n        value={currentValue}\n        onChange={(v: number) => {\n          if (typeof v !== 'undefined') {\n            handleInputChange(Number(v), nodeIndex);\n          }\n        }}\n        className={classNames(`${classPrefix}-slider-input`, { 'is-vertical': isVertical })}\n        disabled={disabled}\n        theme=\"column\"\n        min={min}\n        max={max}\n        {...inputProps}\n      />\n    );\n  };\n\n  const nearbyValueChange = (value: number) => {\n    const buttonBias =\n      Math.abs(value - renderValue[LEFT_NODE]) > Math.abs(value - renderValue[RIGHT_NODE]) ? RIGHT_NODE : LEFT_NODE;\n    handleInputChange(value, buttonBias);\n  };\n\n  const setPosition = (position: number, nodeIndex?: SliderHandleNode) => {\n    let index = 0;\n    let minDistance = 1;\n    for (let i = 0; i < allDots.length; i++) {\n      const diff = Math.abs(allDots[i].position - position);\n      if (minDistance > diff) {\n        index = i;\n        minDistance = diff;\n      }\n    }\n    const { value } = allDots[index];\n    if (nodeIndex === undefined && range) {\n      nearbyValueChange(value);\n    } else {\n      handleInputChange(value, nodeIndex);\n    }\n  };\n\n  const onSliderChange = (event: MouseCallback, nodeIndex?: SliderHandleNode) => {\n    if (disabled || !sliderRef.current) return;\n\n    const clientKey = isVertical ? 'clientY' : 'clientX';\n    const sliderPositionInfo = sliderRef.current.getBoundingClientRect();\n    const sliderOffset = sliderPositionInfo[startDirection];\n    const position = ((event[clientKey] - sliderOffset) / sliderPositionInfo[sizeKey]) * (isVertical ? -1 : 1);\n    setPosition(position, nodeIndex);\n  };\n\n  const handleClickMarks = (event: React.MouseEvent, value: number) => {\n    event.stopPropagation();\n    nearbyValueChange(value);\n  };\n\n  const createHandleButton = (nodeIndex: SliderHandleNode, style: React.CSSProperties) => {\n    const currentValue = renderValue[nodeIndex];\n    // 模板替换\n    let tipLabel: React.ReactNode = currentValue;\n\n    if (isFunction(label)) {\n      tipLabel = label({ value: currentValue, position: nodeIndex === LEFT_NODE ? 'start' : 'end' });\n    }\n    if (isString(label)) {\n      tipLabel = label.replace(/\\$\\{value\\}/g, currentValue.toString());\n    }\n    if (isNumber(tipLabel) && precision) tipLabel = largeNumberToFixed(String(tipLabel), precision);\n\n    return (\n      <SliderHandleButton\n        toolTipProps={{ content: tipLabel, ...tooltipProps }}\n        hideTips={label === false}\n        classPrefix={classPrefix}\n        style={style}\n        onChange={(e) => onSliderChange(e, nodeIndex)}\n      />\n    );\n  };\n\n  return (\n    <div\n      style={{ ...style }}\n      className={classNames(`${classPrefix}-slider__container`, { 'is-vertical': isVertical })}\n      ref={ref}\n    >\n      <div\n        ref={sliderRef}\n        className={classNames(`${classPrefix}-slider`, className, {\n          [`${classPrefix}-is-disabled`]: disabled,\n          [`${classPrefix}-slider--vertical`]: isVertical,\n          [`${classPrefix}-slider--with-input`]: inputNumberProps,\n        })}\n        onClick={onSliderChange}\n      >\n        <div className={classNames(`${classPrefix}-slider__rail`)}>\n          <div\n            style={{ [startDirection]: numberToPercent(start), [sizeKey]: numberToPercent(width) }}\n            className={classNames(`${classPrefix}-slider__track`)}\n          ></div>\n          {range ? createHandleButton(LEFT_NODE, { [startDirection]: numberToPercent(start) }) : null}\n          {createHandleButton(RIGHT_NODE, { [startDirection]: numberToPercent(end) })}\n          <div className={`${classPrefix}-slider__stops`}>\n            {renderDots.map(({ position, value }) => {\n              if (position === 0 || position === 1) {\n                return null;\n              }\n              return (\n                <div\n                  key={value}\n                  style={{ [stepDirection]: numberToPercent(position) }}\n                  className={classNames(`${classPrefix}-slider__stop`)}\n                ></div>\n              );\n            })}\n          </div>\n          <div className={classNames(`${classPrefix}-slider__mark`)}>\n            {renderDots.map(({ position, value, label }) => (\n              <div\n                key={value}\n                onClick={(event) => handleClickMarks(event, value)}\n                style={{ [stepDirection]: numberToPercent(position) }}\n                className={classNames(`${classPrefix}-slider__mark-text`)}\n              >\n                {label}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n      {inputNumberProps ? (\n        <div className={classNames(`${classPrefix}-slider__input-container`, { 'is-vertical': isVertical })}>\n          {range && createInput(LEFT_NODE)}\n          {range && <div className={`${classPrefix}-slider__center-line`}></div>}\n          {createInput(RIGHT_NODE)}\n        </div>\n      ) : null}\n    </div>\n  );\n});\n\nSlider.displayName = 'Slider';\n\nexport default Slider;\n"],"names":["LEFT_NODE","RIGHT_NODE","Slider","React","forwardRef","originalProps","ref","_useConfig","useConfig","classPrefix","props","useDefaultProps","sliderDefaultProps","disabled","inputNumberProps","label","layout","marks","max","min","range","step","tooltipProps","className","style","onChange","sliderRef","useRef","_useControlled","useControlled","_useControlled2","_slicedToArray","value","internalOnChange","isVertical","renderValue","Array","isArray","start","width","end","precision","useMemo","Number","isInteger","toString","split","length","dots","some","mark","console","warn","map","position","_typeof","result","Object","keys","forEach","key","numberKey","push","allDots","i","accAdd","startDirection","stepDirection","sizeKey","renderDots","item","_objectSpread","handleInputChange","newValue","nodeIndex","safeValue","toFixed","resultValue","Math","largeNumberToFixed","String","arrValue","slice","createInput","inputProps","currentValue","createElement","InputNumber","v","classNames","concat","theme","nearbyValueChange","buttonBias","abs","setPosition","index","minDistance","diff","onSliderChange","event","current","clientKey","sliderPositionInfo","getBoundingClientRect","sliderOffset","handleClickMarks","stopPropagation","createHandleButton","tipLabel","isFunction","isString","replace","isNumber","SliderHandleButton","toolTipProps","content","hideTips","e","_defineProperty","onClick","numberToPercent","_ref","_ref2","displayName"],"mappings":"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"}