{"version":3,"file":"Drawer.js","sources":["../../../components/drawer/Drawer.tsx"],"sourcesContent":["import React, { forwardRef, isValidElement, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-react';\nimport classnames from 'classnames';\nimport { isFunction, isObject, isString, isUndefined } from 'lodash-es';\nimport parseTNode from '../_util/parseTNode';\nimport Button, { type ButtonProps } from '../button';\nimport Portal from '../common/Portal';\nimport useAttach from '../hooks/useAttach';\nimport useConfig from '../hooks/useConfig';\nimport useDeepEffect from '../hooks/useDeepEffect';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport useSetState from '../hooks/useSetState';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { drawerDefaultProps } from './defaultProps';\nimport useDrag from './hooks/useDrag';\nimport useLockStyle from './hooks/useLockStyle';\n\nimport type { StyledProps } from '../common';\nimport type { DrawerEventSource, DrawerInstance, TdDrawerProps } from './type';\n\nexport const CloseTriggerType: { [key: string]: DrawerEventSource } = {\n  CLICK_OVERLAY: 'overlay',\n  CLICK_CLOSE_BTN: 'close-btn',\n  CLICK_CANCEL_BTN: 'cancel',\n  KEYDOWN_ESC: 'esc',\n};\n\nexport interface DrawerProps extends TdDrawerProps, StyledProps {\n  isPlugin?: boolean; // 是否以插件形式调用\n}\n\nconst Drawer = forwardRef<DrawerInstance, DrawerProps>((originalProps, ref) => {\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('drawer');\n  const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n  const confirmText = t(local.confirm);\n  const cancelText = t(local.cancel);\n\n  const props = useDefaultProps<DrawerProps>(originalProps, drawerDefaultProps);\n  const { body, children, header, footer, ...restProps } = props;\n  const [state, setState] = useSetState<DrawerProps>({ isPlugin: false, ...restProps });\n  const {\n    className,\n    style,\n    visible,\n    attach,\n    showOverlay,\n    size: propsSize,\n    placement,\n    onBeforeOpen,\n    onBeforeClose,\n    onCancel,\n    onConfirm,\n    onClose,\n    onCloseBtnClick,\n    onOverlayClick,\n    onEscKeydown,\n    onSizeDragEnd,\n    showInAttachedElement,\n    closeOnOverlayClick,\n    closeOnEscKeydown,\n    closeBtn,\n    cancelBtn = cancelText,\n    confirmBtn = confirmText,\n    zIndex,\n    destroyOnClose,\n    sizeDraggable,\n    forceRender,\n    isPlugin,\n    lazy,\n  } = state;\n\n  const size = propsSize ?? local.size;\n  const { classPrefix } = useConfig();\n  const drawerAttach = useAttach('drawer', attach);\n  const maskRef = useRef<HTMLDivElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const drawerWrapperRef = useRef<HTMLElement>(null); // 即最终的 attach dom，默认为 document.body\n  const prefixCls = `${classPrefix}-drawer`;\n\n  const closeIcon = isValidElement(closeBtn) ? closeBtn : <CloseIcon />;\n  const { dragSizeValue, enableDrag, draggableLineStyles, draggingStyles } = useDrag(\n    placement,\n    sizeDraggable,\n    onSizeDragEnd,\n  );\n  const [animationStart, setAnimationStart] = useState(visible);\n\n  const sizeValue = useMemo(() => {\n    const sizeMap = { small: '300px', medium: '500px', large: '760px' };\n    return dragSizeValue || sizeMap[size] || size;\n  }, [dragSizeValue, size]);\n\n  useLockStyle({ ...state, sizeValue, drawerWrapper: drawerWrapperRef.current });\n  useImperativeHandle(ref, () => ({\n    show() {\n      setState({ visible: true });\n    },\n    hide() {\n      setState({ visible: false });\n    },\n    destroy() {\n      setState({ visible: false, destroyOnClose: true });\n    },\n    update(options) {\n      setState((prevState) => ({ ...prevState, ...options }));\n    },\n  }));\n\n  useEffect(() => {\n    if (visible) {\n      // 聚焦到 Drawer 最外层元素即 containerRef.current，KeyDown 事件才有效。\n      containerRef.current?.focus?.();\n    }\n  }, [visible]);\n\n  useDeepEffect(() => {\n    // 非插件式调用 更新props\n    if (isPlugin) return;\n    setState((prevState) => ({ ...prevState, ...props }));\n  }, [props, setState]);\n\n  function onMaskClick(e: React.MouseEvent<HTMLDivElement>) {\n    onOverlayClick?.({ e });\n    (closeOnOverlayClick ?? local.closeOnOverlayClick) && onClose?.({ e, trigger: CloseTriggerType.CLICK_OVERLAY });\n  }\n  function onClickCloseBtn(e: React.MouseEvent<HTMLDivElement>) {\n    onCloseBtnClick?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CLOSE_BTN });\n  }\n  function onKeyDownEsc(e: React.KeyboardEvent<HTMLDivElement>) {\n    if (e.key !== 'Escape') return;\n\n    onEscKeydown?.({ e });\n    (closeOnEscKeydown ?? local.closeOnEscKeydown) && onClose?.({ e, trigger: CloseTriggerType.KEYDOWN_ESC });\n  }\n  function onCancelClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onCancel?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CANCEL_BTN });\n  }\n  function onConfirmClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onConfirm?.({ e });\n  }\n\n  const contentWrapperStyle = useMemo(\n    () => ({\n      transform: visible && animationStart ? 'translateX(0)' : undefined,\n      width: ['left', 'right'].includes(placement) ? sizeValue : '',\n      height: ['top', 'bottom'].includes(placement) ? sizeValue : '',\n    }),\n    [visible, placement, sizeValue, animationStart],\n  );\n\n  const renderDrawerButton = (btn: DrawerProps['cancelBtn'], defaultProps: ButtonProps) => {\n    let result = null;\n\n    if (isString(btn)) {\n      result = <Button {...defaultProps}>{btn}</Button>;\n    } else if (isValidElement(btn)) {\n      result = btn;\n    } else if (isObject(btn)) {\n      result = <Button {...defaultProps} {...(btn as {})} />;\n    } else if (isFunction(btn)) {\n      result = btn();\n    }\n\n    return result;\n  };\n\n  const renderFooter = () => {\n    const defaultFooter = () => {\n      const renderCancelBtn = renderDrawerButton(cancelBtn, {\n        theme: 'default',\n        onClick: (e: React.MouseEvent<HTMLButtonElement>) => onCancelClick?.(e),\n        className: `${prefixCls}__cancel`,\n      });\n      const renderConfirmBtn = renderDrawerButton(confirmBtn, {\n        theme: 'primary',\n        onClick: (e: React.MouseEvent<HTMLButtonElement>) => onConfirmClick?.(e),\n        className: `${prefixCls}__confirm`,\n      });\n\n      const footerStyle = {\n        display: 'flex',\n        justifyContent: placement === 'right' ? 'flex-start' : 'flex-end',\n      };\n\n      return (\n        <div style={footerStyle}>\n          {placement === 'right' ? (\n            <>\n              {renderConfirmBtn} {renderCancelBtn}\n            </>\n          ) : (\n            <>\n              {renderCancelBtn} {renderConfirmBtn}\n            </>\n          )}\n        </div>\n      );\n    };\n\n    return <div className={`${prefixCls}__footer`}>{parseTNode(footer, null, defaultFooter())}</div>;\n  };\n\n  const renderOverlay = showOverlay && (\n    <CSSTransition in={visible} timeout={200} classNames={`${prefixCls}-fade`} nodeRef={maskRef}>\n      <div ref={maskRef} className={`${prefixCls}__mask`} onClick={onMaskClick} />\n    </CSSTransition>\n  );\n  const renderCloseBtn = closeBtn && (\n    <div onClick={onClickCloseBtn} className={`${prefixCls}__close-btn`}>\n      {closeIcon}\n    </div>\n  );\n  const renderHeader = header && <div className={`${prefixCls}__header`}>{header}</div>;\n  const renderBody = <div className={`${prefixCls}__body`}>{body || children}</div>;\n\n  return (\n    <CSSTransition\n      in={visible}\n      nodeRef={drawerWrapperRef}\n      mountOnEnter={isUndefined(forceRender) ? lazy : !forceRender}\n      unmountOnExit={destroyOnClose}\n      timeout={{ appear: 10, enter: 10, exit: 300 }}\n      onEnter={() => onBeforeOpen?.()}\n      onEntered={() => setAnimationStart(true)}\n      onExit={() => onBeforeClose?.()}\n      onExited={() => setAnimationStart(false)}\n    >\n      <Portal attach={drawerAttach} ref={drawerWrapperRef}>\n        <div\n          ref={containerRef}\n          className={classnames(prefixCls, className, `${prefixCls}--${placement}`, {\n            [`${prefixCls}--open`]: visible,\n            [`${prefixCls}--attach`]: showInAttachedElement,\n            [`${prefixCls}--without-mask`]: !showOverlay,\n          })}\n          style={{ zIndex, ...style }}\n          tabIndex={-1} // https://stackoverflow.com/questions/43503964/onkeydown-event-not-working-on-divs-in-react\n          onKeyDown={onKeyDownEsc}\n        >\n          {renderOverlay}\n          <div\n            className={classnames(`${prefixCls}__content-wrapper`, `${prefixCls}__content-wrapper--${placement}`)}\n            style={{ ...contentWrapperStyle, ...draggingStyles }}\n          >\n            {renderCloseBtn}\n            {renderHeader}\n            {renderBody}\n            {!!footer && renderFooter()}\n            {sizeDraggable && <div style={draggableLineStyles} onMouseDown={enableDrag}></div>}\n          </div>\n        </div>\n      </Portal>\n    </CSSTransition>\n  );\n});\n\nDrawer.displayName = 'Drawer';\n\nexport default Drawer;\n"],"names":["CloseTriggerType","CLICK_OVERLAY","CLICK_CLOSE_BTN","CLICK_CANCEL_BTN","KEYDOWN_ESC","Drawer","forwardRef","originalProps","ref","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","local","t","_useGlobalIcon","useGlobalIcon","CloseIcon","TdCloseIcon","confirmText","confirm","cancelText","cancel","props","useDefaultProps","drawerDefaultProps","body","children","header","footer","restProps","_excluded","_useSetState","useSetState","_objectSpread","isPlugin","_useSetState2","state","setState","className","style","visible","attach","showOverlay","propsSize","size","placement","onBeforeOpen","onBeforeClose","onCancel","onConfirm","onClose","onCloseBtnClick","onOverlayClick","onEscKeydown","onSizeDragEnd","showInAttachedElement","closeOnOverlayClick","closeOnEscKeydown","closeBtn","_state$cancelBtn","cancelBtn","_state$confirmBtn","confirmBtn","zIndex","destroyOnClose","sizeDraggable","forceRender","lazy","_useConfig","useConfig","classPrefix","drawerAttach","useAttach","maskRef","useRef","containerRef","drawerWrapperRef","prefixCls","closeIcon","isValidElement","_useDrag","useDrag","dragSizeValue","enableDrag","draggableLineStyles","draggingStyles","_useState","useState","_useState2","animationStart","setAnimationStart","sizeValue","useMemo","sizeMap","small","medium","large","useLockStyle","drawerWrapper","current","useImperativeHandle","show","hide","destroy","update","options","prevState","useEffect","_containerRef$current","_containerRef$current2","focus","call","useDeepEffect","onMaskClick","e","trigger","onClickCloseBtn","onKeyDownEsc","key","onCancelClick","onConfirmClick","contentWrapperStyle","transform","width","includes","height","renderDrawerButton","btn","defaultProps","result","isString","React","createElement","Button","isObject","isFunction","renderFooter","defaultFooter","renderCancelBtn","theme","onClick","renderConfirmBtn","footerStyle","display","justifyContent","Fragment","parseTNode","renderOverlay","CSSTransition","timeout","classNames","nodeRef","renderCloseBtn","renderHeader","renderBody","mountOnEnter","isUndefined","unmountOnExit","appear","enter","exit","onEnter","onEntered","onExit","onExited","Portal","classnames","concat","_defineProperty","tabIndex","onKeyDown","onMouseDown","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBO,IAAMA,gBAAyD,GAAA;AACpEC,EAAAA,aAAe,EAAA,SAAA;AACfC,EAAAA,eAAiB,EAAA,WAAA;AACjBC,EAAAA,gBAAkB,EAAA,QAAA;AAClBC,EAAAA,WAAa,EAAA,KAAA;AACf,EAAA;AAMMC,IAAAA,MAAS,gBAAAC,UAAA,CAAwC,UAACC,aAAA,EAAeC,GAAQ,EAAA;AAE7E,EAAA,IAAAC,kBAAA,GAAmBC,kBAAkB,QAAQ,CAAA;IAAAC,mBAAA,GAAAC,cAAA,CAAAH,kBAAA,EAAA,CAAA,CAAA;AAAtCI,IAAAA,KAAA,GAAAF,mBAAA,CAAA,CAAA,CAAA;AAAOG,IAAAA,CAAC,GAAAH,mBAAA,CAAA,CAAA,CAAA,CAAA;EACf,IAAAI,cAAA,GAAsBC,cAAc;AAAEC,MAAAA,SAAA,EAAWC,SAAAA;AAAY,KAAC,CAAA;IAAtDD,WAAU,GAAAF,cAAA,CAAVE,SAAU,CAAA;AACZ,EAAA,IAAAE,WAAA,GAAcL,CAAE,CAAAD,KAAA,CAAMO,OAAO,CAAA,CAAA;AAC7B,EAAA,IAAAC,UAAA,GAAaP,CAAE,CAAAD,KAAA,CAAMS,MAAM,CAAA,CAAA;AAE3B,EAAA,IAAAC,KAAA,GAAQC,eAA6B,CAAAjB,aAAA,EAAekB,kBAAkB,CAAA,CAAA;AAC5E,EAAA,IAAQC,IAAM,GAA2CH,KAAA,CAAjDG,IAAM;IAAAC,QAAA,GAA2CJ,KAAA,CAA3CI,QAAA;IAAUC,MAAQ,GAAyBL,KAAA,CAAjCK,MAAQ;IAAAC,MAAA,GAAyBN,KAAA,CAAzBM,MAAA;AAAWC,IAAAA,qCAAcP,KAAA,EAAAQ,SAAA,CAAA,CAAA;AACnD,EAAA,IAAAC,YAAA,GAAoBC,WAAA,CAAAC,aAAA,CAAA;AAA2BC,MAAAA,QAAU,EAAA,KAAA;KAAUL,EAAAA,SAAA,CAAW,CAAA;IAAAM,aAAA,GAAAxB,cAAA,CAAAoB,YAAA,EAAA,CAAA,CAAA;AAA7EK,IAAAA,KAAO,GAAAD,aAAA,CAAA,CAAA,CAAA;AAAAE,IAAAA,QAAQ,GAAAF,aAAA,CAAA,CAAA,CAAA,CAAA;AAChB,EAAA,IACJG,SAAA,GA4BEF,KAAA,CA5BFE,SAAA;IACAC,KAAA,GA2BEH,KAAA,CA3BFG,KAAA;IACAC,OAAA,GA0BEJ,KAAA,CA1BFI,OAAA;IACAC,MAAA,GAyBEL,KAAA,CAzBFK,MAAA;IACAC,WAAA,GAwBEN,KAAA,CAxBFM,WAAA;IACMC,SAAA,GAuBJP,KAAA,CAvBFQ,IAAM;IACNC,SAAA,GAsBET,KAAA,CAtBFS,SAAA;IACAC,YAAA,GAqBEV,KAAA,CArBFU,YAAA;IACAC,aAAA,GAoBEX,KAAA,CApBFW,aAAA;IACAC,QAAA,GAmBEZ,KAAA,CAnBFY,QAAA;IACAC,SAAA,GAkBEb,KAAA,CAlBFa,SAAA;IACAC,OAAA,GAiBEd,KAAA,CAjBFc,OAAA;IACAC,eAAA,GAgBEf,KAAA,CAhBFe,eAAA;IACAC,cAAA,GAeEhB,KAAA,CAfFgB,cAAA;IACAC,YAAA,GAcEjB,KAAA,CAdFiB,YAAA;IACAC,aAAA,GAaElB,KAAA,CAbFkB,aAAA;IACAC,qBAAA,GAYEnB,KAAA,CAZFmB,qBAAA;IACAC,mBAAA,GAWEpB,KAAA,CAXFoB,mBAAA;IACAC,iBAAA,GAUErB,KAAA,CAVFqB,iBAAA;IACAC,QAAA,GASEtB,KAAA,CATFsB,QAAA;IAAAC,gBAAA,GASEvB,KAAA,CARFwB,SAAY;AAAZA,IAAAA,SAAY,GAAAD,gBAAA,KAAAvC,KAAAA,CAAAA,GAAAA,UAAA,GAAAuC,gBAAA;IAAAE,iBAAA,GAQVzB,KAAA,CAPF0B,UAAa;AAAbA,IAAAA,UAAa,GAAAD,iBAAA,KAAA3C,KAAAA,CAAAA,GAAAA,WAAA,GAAA2C,iBAAA;IACbE,MAAA,GAME3B,KAAA,CANF2B,MAAA;IACAC,cAAA,GAKE5B,KAAA,CALF4B,cAAA;IACAC,aAAA,GAIE7B,KAAA,CAJF6B,aAAA;IACAC,WAAA,GAGE9B,KAAA,CAHF8B,WAAA;IACAhC,QAAA,GAEEE,KAAA,CAFFF,QAAA;IACAiC,IAAA,GACE/B,KAAA,CADF+B,IAAA,CAAA;EAGI,IAAAvB,IAAA,GAAOD,cAAAA,IAAAA,IAAAA,uBAAAA,YAAa/B,KAAM,CAAAgC,IAAA,CAAA;AAC1B,EAAA,IAAAwB,UAAA,GAAkBC,SAAU,EAAA;IAA1BC,WAAY,GAAAF,UAAA,CAAZE,WAAY,CAAA;AACd,EAAA,IAAAC,YAAA,GAAeC,SAAU,CAAA,QAAA,EAAU/B,MAAM,CAAA,CAAA;AACzC,EAAA,IAAAgC,OAAA,GAAUC,OAAuB,IAAI,CAAA,CAAA;AACrC,EAAA,IAAAC,YAAA,GAAeD,OAAuB,IAAI,CAAA,CAAA;AAC1C,EAAA,IAAAE,gBAAA,GAAmBF,OAAoB,IAAI,CAAA,CAAA;AACjD,EAAA,IAAMG,sBAAeP,WAAA,EAAA,SAAA,CAAA,CAAA;AAErB,EAAA,IAAMQ,yBAAYC,cAAe,CAAArB,QAAQ,CAAI,GAAAA,QAAA,sCAAY1C,WAAU,EAAA,IAAA,CAAA,CAAA;EACnE,IAAAgE,QAAA,GAA2EC,OAAA,CACzEpC,SAAA,EACAoB,aAAA,EACAX,aACF,CAAA;IAJQ4B,aAAA,GAAAF,QAAA,CAAAE,aAAA;IAAeC,UAAY,GAAAH,QAAA,CAAZG,UAAY;IAAAC,mBAAA,GAAAJ,QAAA,CAAAI,mBAAA;IAAqBC,0BAAAA;AAKxD,EAAA,IAAAC,SAAA,GAA4CC,SAAS/C,OAAO,CAAA;IAAAgD,UAAA,GAAA7E,cAAA,CAAA2E,SAAA,EAAA,CAAA,CAAA;AAArDG,IAAAA,cAAA,GAAAD,UAAA,CAAA,CAAA,CAAA;AAAgBE,IAAAA,iBAAiB,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;AAElC,EAAA,IAAAG,SAAA,GAAYC,QAAQ,YAAM;AAC9B,IAAA,IAAMC,UAAU;AAAEC,MAAAA,KAAA,EAAO;AAASC,MAAAA,MAAQ,EAAA,OAAA;AAASC,MAAAA,OAAO,OAAA;KAAQ,CAAA;AAC3D,IAAA,OAAAd,aAAA,IAAiBW,QAAQjD,IAAS,CAAA,IAAAA,IAAA,CAAA;AAC3C,GAAG,EAAA,CAACsC,aAAe,EAAAtC,IAAI,CAAC,CAAA,CAAA;AAExBqD,EAAAA,YAAA,CAAAhE,aAAA,CAAAA,aAAA,KAAkBG,KAAA,CAAA,EAAA,EAAA,EAAA;AAAOuD,IAAAA,WAAAA;IAAWO,aAAe,EAAAtB,gBAAA,CAAiBuB,OAAAA;IAAS,CAAA,CAAA;EAC7EC,mBAAA,CAAoB7F,KAAK,YAAA;IAAA,OAAO;MAC9B8F,IAAO,EAAA,SAAPA,IAAOA,GAAA;AACIhE,QAAAA,QAAA,CAAA;AAAEG,UAAAA,OAAS,EAAA,IAAA;AAAK,SAAC,CAAA,CAAA;OAC5B;MACA8D,IAAO,EAAA,SAAPA,IAAOA,GAAA;AACIjE,QAAAA,QAAA,CAAA;AAAEG,UAAAA,OAAS,EAAA,KAAA;AAAM,SAAC,CAAA,CAAA;OAC7B;MACA+D,OAAU,EAAA,SAAVA,OAAUA,GAAA;AACRlE,QAAAA,QAAA,CAAS;AAAEG,UAAAA,OAAA,EAAS,KAAO;AAAAwB,UAAAA,cAAA,EAAgB,IAAA;AAAK,SAAC,CAAA,CAAA;OACnD;AACAwC,MAAAA,QAAAA,SAAAA,OAAOC,OAAS,EAAA;QACdpE,QAAA,CAAS,UAACqE,SAAe,EAAA;AAAA,UAAA,OAAAzE,aAAA,CAAAA,aAAA,CAAKyE,EAAAA,EAAAA,SAAW,GAAGD;SAAU,CAAA,CAAA;AACxD,OAAA;KACA,CAAA;AAAA,GAAA,CAAA,CAAA;AAEFE,EAAAA,SAAA,CAAU,YAAM;AACd,IAAA,IAAInE,OAAS,EAAA;MAAA,IAAAoE,qBAAA,EAAAC,sBAAA,CAAA;MAEX,CAAAD,qBAAA,GAAAjC,YAAA,CAAawB,mFAAbS,qBAAA,CAAsBE,KAAQ,cAAAD,sBAAA,KAAA,KAAA,CAAA,IAA9BA,sBAAA,CAAAE,IAAA,CAAAH,qBAA8B,CAAA,CAAA;AAChC,KAAA;AACF,GAAA,EAAG,CAACpE,OAAO,CAAC,CAAA,CAAA;AAEZwE,EAAAA,aAAA,CAAc,YAAM;AAEd,IAAA,IAAA9E,QAAA,EAAU,OAAA;IACdG,QAAA,CAAS,UAACqE,SAAe,EAAA;AAAA,MAAA,OAAAzE,aAAA,CAAAA,aAAA,CAAKyE,EAAAA,EAAAA,SAAW,GAAGpF;KAAQ,CAAA,CAAA;AACtD,GAAG,EAAA,CAACA,KAAO,EAAAe,QAAQ,CAAC,CAAA,CAAA;EAEpB,SAAS4E,YAAYC,CAAqC,EAAA;AACvC9D,IAAAA,cAAA,KAAAA,IAAAA,IAAAA,cAAA,KAAAA,KAAAA,CAAAA,IAAAA,cAAA,CAAA;AAAE8D,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AACrB,IAAA,CAAA1D,mBAAA,KAAA,IAAA,IAAAA,mBAAA,KAAA,KAAA,CAAA,GAAAA,mBAAA,GAAuB5C,MAAM4C,mBAAwB,MAAAN,OAAA,KAAA,IAAA,IAAAA,OAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAA,CAAU;AAAEgE,MAAAA,CAAG,EAAHA,CAAG;MAAAC,OAAA,EAASpH,gBAAiB,CAAAC,aAAAA;AAAc,KAAC,CAAA,CAAA,CAAA;AAChH,GAAA;EACA,SAASoH,gBAAgBF,CAAqC,EAAA;AAC1C/D,IAAAA,eAAA,KAAAA,IAAAA,IAAAA,eAAA,KAAAA,KAAAA,CAAAA,IAAAA,eAAA,CAAA;AAAE+D,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AACvBhE,IAAAA,OAAA,KAAAA,IAAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAU;AAAEgE,MAAAA,CAAA,EAAAA,CAAA;MAAGC,OAAS,EAAApH,gBAAA,CAAiBE,eAAAA;AAAgB,KAAC,CAAA,CAAA;AAC5D,GAAA;EACA,SAASoH,aAAaH,CAAwC,EAAA;AAC5D,IAAA,IAAIA,EAAEI,GAAQ,KAAA,QAAA,EAAU,OAAA;AAETjE,IAAAA,YAAA,KAAAA,IAAAA,IAAAA,YAAA,KAAAA,KAAAA,CAAAA,IAAAA,YAAA,CAAA;AAAE6D,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AACnB,IAAA,CAAAzD,iBAAA,KAAA,IAAA,IAAAA,iBAAA,KAAA,KAAA,CAAA,GAAAA,iBAAA,GAAqB7C,MAAM6C,iBAAsB,MAAAP,OAAA,KAAA,IAAA,IAAAA,OAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAA,CAAU;AAAEgE,MAAAA,CAAG,EAAHA,CAAG;MAAAC,OAAA,EAASpH,gBAAiB,CAAAI,WAAAA;AAAY,KAAC,CAAA,CAAA,CAAA;AAC1G,GAAA;EACA,SAASoH,cAAcL,CAAwC,EAAA;AAClDlE,IAAAA,QAAA,KAAAA,IAAAA,IAAAA,QAAA,KAAAA,KAAAA,CAAAA,IAAAA,QAAA,CAAA;AAAEkE,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AAChBhE,IAAAA,OAAA,KAAAA,IAAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAU;AAAEgE,MAAAA,CAAA,EAAAA,CAAA;MAAGC,OAAS,EAAApH,gBAAA,CAAiBG,gBAAAA;AAAiB,KAAC,CAAA,CAAA;AAC7D,GAAA;EACA,SAASsH,eAAeN,CAAwC,EAAA;AAClDjE,IAAAA,SAAA,KAAAA,IAAAA,IAAAA,SAAA,KAAAA,KAAAA,CAAAA,IAAAA,SAAA,CAAA;AAAEiE,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AACnB,GAAA;EAEA,IAAMO,mBAAsB,GAAA7B,OAAA,CAC1B,YAAA;IAAA,OAAO;MACL8B,SAAA,EAAWlF,OAAW,IAAAiD,cAAA,GAAiB,eAAkB,GAAA,KAAA,CAAA;AACzDkC,MAAAA,KAAA,EAAO,CAAC,MAAQ,EAAA,OAAO,EAAEC,QAAS,CAAA/E,SAAS,IAAI8C,SAAY,GAAA,EAAA;AAC3DkC,MAAAA,MAAA,EAAQ,CAAC,KAAO,EAAA,QAAQ,EAAED,QAAS,CAAA/E,SAAS,IAAI8C,SAAY,GAAA,EAAA;KAC9D,CAAA;GAAA,EACA,CAACnD,OAAA,EAASK,SAAW,EAAA8C,SAAA,EAAWF,cAAc,CAChD,CAAA,CAAA;EAEM,IAAAqC,kBAAA,GAAqB,SAArBA,kBAAAA,CAAsBC,GAAA,EAA+BC,YAA8B,EAAA;IACvF,IAAIC,MAAS,GAAA,IAAA,CAAA;AAET,IAAA,IAAAC,QAAA,CAASH,GAAG,CAAG,EAAA;AACjBE,MAAAA,MAAA,kBAAUE,KAAA,CAAAC,aAAA,CAAAC,MAAA,EAAApG,aAAA,CAAA,EAAA,EAAW+F,YAAA,CAAA,EAAeD,GAAI,CAAA,CAAA;AAC1C,KAAA,MAAA,iBAAWhD,cAAe,CAAAgD,GAAG,CAAG,EAAA;AACrBE,MAAAA,MAAA,GAAAF,GAAA,CAAA;AACX,KAAA,MAAA,IAAWO,QAAS,CAAAP,GAAG,CAAG,EAAA;AACxBE,MAAAA,MAAA,kBAAUE,KAAA,CAAAC,aAAA,CAAAC,MAAA,EAAApG,aAAA,CAAAA,aAAA,CAAW+F,EAAAA,EAAAA,YAAA,CAAmBD,EAAAA,GAAA,CAAY,CAAA,CAAA;AACtD,KAAA,MAAA,IAAWQ,UAAW,CAAAR,GAAG,CAAG,EAAA;MAC1BE,MAAA,GAASF,GAAI,EAAA,CAAA;AACf,KAAA;AAEO,IAAA,OAAAE,MAAA,CAAA;GACT,CAAA;AAEA,EAAA,IAAMO,eAAe,SAAfA,eAAqB;AACzB,IAAA,IAAMC,gBAAgB,SAAhBA,gBAAsB;AACpB,MAAA,IAAAC,eAAA,GAAkBZ,mBAAmBlE,SAAW,EAAA;AACpD+E,QAAAA,KAAO,EAAA,SAAA;AACPC,QAAAA,OAAS,EAAA,SAATA,OAASA,CAAC1B,CAA2C,EAAA;AAAA,UAAA,OAAAK,aAAA,KAAAA,IAAAA,IAAAA,aAAA,uBAAAA,aAAA,CAAgBL,CAAC,CAAA,CAAA;AAAA,SAAA;QACtE5E,qBAAcuC,SAAA,EAAA,UAAA,CAAA;AAChB,OAAC,CAAA,CAAA;AACK,MAAA,IAAAgE,gBAAA,GAAmBf,mBAAmBhE,UAAY,EAAA;AACtD6E,QAAAA,KAAO,EAAA,SAAA;AACPC,QAAAA,OAAS,EAAA,SAATA,OAASA,CAAC1B,CAA2C,EAAA;AAAA,UAAA,OAAAM,cAAA,KAAAA,IAAAA,IAAAA,cAAA,uBAAAA,cAAA,CAAiBN,CAAC,CAAA,CAAA;AAAA,SAAA;QACvE5E,qBAAcuC,SAAA,EAAA,WAAA,CAAA;AAChB,OAAC,CAAA,CAAA;AAED,MAAA,IAAMiE,WAAc,GAAA;AAClBC,QAAAA,OAAS,EAAA,MAAA;AACTC,QAAAA,cAAA,EAAgBnG,SAAc,KAAA,OAAA,GAAU,YAAe,GAAA,UAAA;OACzD,CAAA;AAEA,MAAA,sBACGsF,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAI7F,QAAAA,KAAO,EAAAuG,WAAAA;AACT,OAAA,EAAAjG,SAAA,KAAc,OACb,kBAAAsF,KAAA,CAAAC,aAAA,CAAAD,KAAA,CAAAc,QAAA,EAAA,IAAA,EACGJ,gBAAiB,EAAA,GAAA,EAAEH,eACtB,CAAA,kBAGGP,KAAA,CAAAC,aAAA,CAAAD,KAAA,CAAAc,QAAA,EAAA,IAAA,EAAAP,eAAA,EAAgB,GAAE,EAAAG,gBACrB,CAEJ,CAAA,CAAA;KAEJ,CAAA;AAEA,IAAA,sBAAQV,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;MAAI9F,qBAAcuC,SAAA,EAAA,UAAA,CAAA;KAAA,EAAsBqE,UAAW,CAAAtH,MAAA,EAAQ,IAAM,EAAA6G,aAAA,EAAe,CAAE,CAAA,CAAA;GAC5F,CAAA;EAEM,IAAAU,aAAA,GAAgBzG,8BACnByF,KAAA,CAAAC,aAAA,CAAAgB,aAAA,EAAA;AAAc,IAAA,IAAA,EAAI5G,OAAA;AAAS6G,IAAAA,OAAS,EAAA,GAAA;AAAKC,IAAAA,sBAAezE,SAAA,EAAA,OAAA,CAAA;AAAkB0E,IAAAA,OAAS,EAAA9E,OAAAA;AAAA,GAAA,iBACjF0D,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAI7H,IAAAA,GAAK,EAAAkE,OAAA;AAASnC,IAAAA,qBAAcuC,SAAA,EAAA,QAAA,CAAA;AAAmB+D,IAAAA,OAAS,EAAA3B,WAAAA;AAAA,GAAa,CAC5E,CAAA,CAAA;EAEI,IAAAuC,cAAA,GAAiB9F,2BACpByE,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIQ,IAAAA,OAAS,EAAAxB,eAAA;IAAiB9E,qBAAcuC,SAAA,EAAA,aAAA,CAAA;GAAA,EAC1CC,SACH,CAAA,CAAA;EAEI,IAAA2E,YAAA,GAAe9H,yBAAWwG,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAI9F,qBAAcuC,SAAA,EAAA,UAAA,CAAA;GAAA,EAAsBlD,MAAO,CAAA,CAAA;EAC/E,IAAM+H,4BAAcvB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAI9F,qBAAcuC,SAAA,EAAA,QAAA,CAAA;AAAA,GAAA,EAAoBpD,QAAQC,QAAS,CAAA,CAAA;AAE3E,EAAA,sBACGyG,KAAA,CAAAC,aAAA,CAAAgB,aAAA,EAAA;AACC,IAAA,IAAA,EAAI5G,OAAA;AACJ+G,IAAAA,OAAS,EAAA3E,gBAAA;IACT+E,YAAc,EAAAC,WAAA,CAAY1F,WAAW,CAAA,GAAIC,OAAO,CAACD,WAAA;AACjD2F,IAAAA,aAAe,EAAA7F,cAAA;AACfqF,IAAAA,SAAS;AAAES,MAAAA,MAAA,EAAQ;AAAIC,MAAAA,KAAO,EAAA,EAAA;AAAIC,MAAAA,MAAM,GAAA;KAAI;IAC5CC,OAAA,EAAS,SAATA,OAAAA,GAAA;AAAA,MAAA,OAAenH,YAAe,KAAfA,IAAAA,IAAAA,YAAe,KAAfA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,YAAe,EAAA,CAAA;AAAA,KAAA;IAC9BoH,SAAA,EAAW,SAAXA,SAAAA,GAAA;MAAA,OAAiBxE,iBAAA,CAAkB,IAAI,CAAA,CAAA;AAAA,KAAA;IACvCyE,MAAA,EAAQ,SAARA,MAAAA,GAAA;AAAA,MAAA,OAAcpH,aAAgB,KAAhBA,IAAAA,IAAAA,aAAgB,KAAhBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,aAAgB,EAAA,CAAA;AAAA,KAAA;IAC9BqH,QAAA,EAAU,SAAVA,QAAAA,GAAA;MAAA,OAAgB1E,iBAAA,CAAkB,KAAK,CAAA,CAAA;AAAA,KAAA;AAAA,GAAA,iBAEtCyC,KAAA,CAAAC,aAAA,CAAAiC,MAAA,EAAA;AAAO5H,IAAAA,MAAQ,EAAA8B,YAAA;AAAchE,IAAAA,GAAK,EAAAqE,gBAAAA;AAAA,GAAA,iBAChCuD,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACC7H,IAAAA,GAAK,EAAAoE,YAAA;AACLrC,IAAAA,WAAWgI,UAAW,CAAAzF,SAAA,EAAWvC,SAAW,KAAAiI,MAAA,CAAG1F,wBAAchC,SAAa,GAAA2H,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAD,EAAAA,EAAAA,EAAAA,CAAAA,MAAA,CACpE1F,SAAoB,EAAA,QAAA,CAAA,EAAArC,OAAA,CAAA+H,EAAAA,EAAAA,CAAAA,MAAA,CACpB1F,SAAsB,EAAA,UAAA,CAAA,EAAAtB,qBAAA,CAAA,EAAA,EAAA,CAAAgH,MAAA,CACtB1F,SAAA,qBAA4B,CAACnC,WAAA,CAClC,CAAA;AACDH,IAAAA,KAAO,EAAAN,aAAA,CAAA;AAAE8B,MAAAA,MAAQ,EAARA,MAAAA;AAAQ,KAAA,EAAGxB,KAAM,CAAA;IAC1BkI,QAAU,EAAA,CAAA,CAAA;AACVC,IAAAA,SAAW,EAAArD,YAAAA;GAAA,EAEV8B,8BACAhB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACC9F,IAAAA,WAAWgI,UAAW,CAAAC,EAAAA,CAAAA,MAAA,CAAG1F,SAA8B,EAAA,mBAAA,CAAA,EAAA,EAAA,CAAA0F,MAAA,CAAG1F,yCAA+BhC,SAAW,CAAA,CAAA;AACpGN,IAAAA,KAAO,EAAAN,aAAA,CAAAA,aAAA,CAAKwF,EAAAA,EAAAA,mBAAA,GAAwBpC,cAAe,CAAA;GAElD,EAAAmE,cAAA,EACAC,cACAC,UACA,EAAA,CAAC,CAAC9H,MAAU,IAAA4G,YAAA,EACZ,EAAAvE,aAAA,mBAAkBkE,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAI7F,IAAAA,KAAO,EAAA6C,mBAAA;AAAqBuF,IAAAA,WAAa,EAAAxF,UAAAA;AAAY,GAAA,CAC9E,CACF,CACF,CACF,CAAA,CAAA;AAEJ,CAAC,EAAA;AAED/E,MAAA,CAAOwK,WAAc,GAAA,QAAA;;;;"}