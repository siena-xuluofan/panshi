{"version":3,"file":"DateRangePicker.js","sources":["../../../components/date-picker/DateRangePicker.tsx"],"sourcesContent":["import React, { forwardRef, useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport dayjs from 'dayjs';\nimport {\n  formatDate,\n  formatTime,\n  getDefaultFormat,\n  initYearMonthTime,\n  isValidDate,\n  parseToDayjs,\n} from '@tdesign/common-js/date-picker/format';\nimport { addMonth, extractTimeObj, subtractMonth } from '@tdesign/common-js/date-picker/utils';\nimport log from '@tdesign/common-js/log/index';\nimport useConfig from '../hooks/useConfig';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport useLatest from '../hooks/useLatest';\nimport useUpdateEffect from '../hooks/useUpdateEffect';\nimport { RangeInputPopup } from '../range-input';\nimport { dateRangePickerDefaultProps } from './defaultProps';\nimport useRange from './hooks/useRange';\nimport RangePanel from './panel/RangePanel';\nimport { dateCorrection } from './utils';\n\nimport type { StyledProps } from '../common';\nimport type { DateRangeValue, PresetDate, TdDateRangePickerProps } from './type';\n\nexport interface DateRangePickerProps extends TdDateRangePickerProps, StyledProps {}\n\nconst DateRangePicker = forwardRef<HTMLDivElement, DateRangePickerProps>((originalProps, ref) => {\n  const { classPrefix, datePicker: globalDatePickerConfig } = useConfig();\n\n  const props = useDefaultProps<DateRangePickerProps>(originalProps, dateRangePickerDefaultProps);\n\n  const {\n    className,\n    style,\n    disabled,\n    mode,\n    enableTimePicker,\n    disableDate,\n    firstDayOfWeek = globalDatePickerConfig.firstDayOfWeek,\n    presets,\n    timePickerProps,\n    presetsPlacement,\n    panelPreselection,\n    cancelRangeSelectLimit,\n    onPick,\n    disableTime,\n    needConfirm,\n  } = props;\n\n  const {\n    inputValue,\n    popupVisible,\n    rangeInputProps,\n    popupProps,\n    value,\n    year,\n    month,\n    time,\n    activeIndex,\n    isHoverCell,\n    setActiveIndex,\n    onChange,\n    setIsHoverCell,\n    setInputValue,\n    setPopupVisible,\n    setTime,\n    setYear,\n    setMonth,\n    isFirstValueSelected,\n    setIsFirstValueSelected,\n    cacheValue,\n    setCacheValue,\n  } = useRange(props);\n\n  const { format, timeFormat, valueType } = getDefaultFormat({\n    mode,\n    enableTimePicker,\n    format: props.format,\n    valueType: props.valueType,\n  });\n\n  // 记录面板是否选中过\n  const [isSelected, setIsSelected] = useState(false);\n\n  const handleSyncPanelValue = (value: DateRangeValue) => {\n    // 同年同月时，确保右侧面板月份比左侧大 避免两侧面板月份一致\n    const nextMonth = value.map((v: string) => parseToDayjs(v, format).month());\n    const nextYear = value.map((v: string) => parseToDayjs(v, format).year());\n    if (nextYear[0] === nextYear[1] && nextMonth[0] === nextMonth[1]) {\n      nextMonth[0] === 11 ? (nextMonth[0] -= 1) : (nextMonth[1] += 1);\n    }\n    setMonth(nextMonth);\n    setYear(nextYear);\n  };\n\n  const handlePopupInvisible = () => {\n    setPopupVisible(false);\n    props.popupProps?.onVisibleChange?.(false, {});\n  };\n\n  const onTriggerNeedConfirm = useLatest(() => {\n    if (needConfirm || !enableTimePicker || popupVisible) return;\n\n    const nextValue = [...inputValue];\n    const notValidIndex = nextValue.findIndex((v) => !v || !isValidDate(v, format));\n\n    // Only proceed when both ends have valid values\n    if (notValidIndex === -1 && nextValue.length === 2) {\n      const currentValue = formatDate(value || [], { format });\n\n      // Only trigger onChange when value actually changes\n      if (currentValue[0] !== nextValue[0] || currentValue[1] !== nextValue[1]) {\n        const formattedValue = formatDate(nextValue, { format, targetFormat: valueType, autoSwap: true });\n        onChange(formattedValue, {\n          dayjsValue: nextValue.map((v) => parseToDayjs(v, format)),\n          trigger: 'confirm',\n        });\n      }\n    } else {\n      // If there's invalid input, restore to original value\n      setInputValue(formatDate(value || [], { format }));\n    }\n  });\n\n  useEffect(() => {\n    if (value === cacheValue) return;\n    // 面板展开重置数据\n    if (popupVisible) {\n      setIsSelected(false);\n      setCacheValue(formatDate(value || [], { format }));\n      setTime(\n        formatTime(\n          value || [dayjs().format(timeFormat), dayjs().format(timeFormat)],\n          format,\n          timeFormat,\n          props.defaultTime,\n        ),\n      );\n\n      // 空数据重置为当前年月\n      if (!value.length) {\n        const { year: defaultYear, month: defaultMonth } = initYearMonthTime({ value, mode, format, enableTimePicker });\n        setYear(defaultYear);\n        setMonth(defaultMonth);\n      } else if (value.length === 2 && !enableTimePicker) {\n        handleSyncPanelValue(value);\n      } else {\n        setYear(value.map((v: string) => parseToDayjs(v, format).year()));\n        setMonth(value.map((v: string) => parseToDayjs(v, format).month()));\n      }\n    } else {\n      setActiveIndex(0);\n      setIsHoverCell(false);\n      setIsFirstValueSelected(false);\n      setInputValue(formatDate(value || [], { format }));\n    }\n    // eslint-disable-next-line\n  }, [popupVisible]);\n\n  // Listen to popupVisible changes, handle auto-confirm for needConfirm=false\n  useUpdateEffect(() => {\n    onTriggerNeedConfirm.current();\n  }, [popupVisible]);\n\n  // 日期 hover\n  function onCellMouseEnter(date: Date) {\n    setIsHoverCell(true);\n    const nextValue = [...inputValue];\n    nextValue[activeIndex] = formatDate(date, { format });\n    setInputValue(nextValue);\n  }\n\n  // 日期 leave\n  function onCellMouseLeave() {\n    setIsHoverCell(false);\n    setInputValue(cacheValue);\n  }\n\n  // 日期点击\n  function onCellClick(date: Date, { e }) {\n    onPick?.(date, { e, partial: activeIndex ? 'end' : 'start' });\n\n    setIsHoverCell(false);\n    setIsSelected(true);\n\n    const nextValue = [...inputValue];\n    nextValue[activeIndex] = formatDate(date, { format });\n    setCacheValue(nextValue);\n    setInputValue(nextValue);\n\n    // 有时间选择器走 confirm 逻辑\n    if (enableTimePicker) return;\n\n    // 确保两端都是有效值\n    const notValidIndex = nextValue.findIndex((v) => !v || !isValidDate(v, format));\n\n    // 当两端都有有效值时更改 value\n    if (notValidIndex === -1 && nextValue.length === 2) {\n      // 二次修改时当其中一侧不符合上次区间规范时，清空另一侧数据\n      if (!isFirstValueSelected && parseToDayjs(nextValue[0], format).isAfter(parseToDayjs(nextValue[1], format))) {\n        nextValue[activeIndex ? 0 : 1] = '';\n        setCacheValue(nextValue);\n        setInputValue(nextValue);\n      } else {\n        onChange(formatDate(nextValue, { format, targetFormat: valueType, autoSwap: true }), {\n          dayjsValue: nextValue.map((v) => parseToDayjs(v, format)),\n          trigger: 'pick',\n        });\n      }\n    }\n\n    // 首次点击不关闭、确保两端都有有效值并且无时间选择器时点击后自动关闭\n    if (!isFirstValueSelected || !activeIndex) {\n      let nextIndex = notValidIndex;\n      if (nextIndex === -1) nextIndex = activeIndex ? 0 : 1;\n      setActiveIndex(nextIndex);\n      setIsFirstValueSelected(!!nextValue[0]);\n    } else {\n      handlePopupInvisible();\n    }\n  }\n\n  // 头部快速切换\n  function onJumperClick({ trigger, partial }) {\n    const partialIndex = partial === 'start' ? 0 : 1;\n\n    const monthCountMap = { date: 1, week: 1, month: 12, quarter: 12, year: 120 };\n    const monthCount = monthCountMap[mode] || 0;\n    const current = new Date(year[partialIndex], month[partialIndex]);\n\n    let next = null;\n    if (trigger === 'prev') {\n      next = subtractMonth(current, monthCount);\n    } else if (trigger === 'current') {\n      next = new Date();\n    } else if (trigger === 'next') {\n      next = addMonth(current, monthCount);\n    }\n\n    let nextYear = [...year];\n    nextYear[partialIndex] = next.getFullYear();\n    let nextMonth = [...month];\n    nextMonth[partialIndex] = next.getMonth();\n    const onlyYearSelect = ['year', 'quarter', 'month'].includes(mode);\n\n    const correctedDate = dateCorrection(partialIndex, nextYear, nextMonth, onlyYearSelect);\n    nextYear = correctedDate.nextYear;\n    nextMonth = correctedDate.nextMonth;\n\n    setYear(nextYear);\n    setMonth(nextMonth);\n  }\n\n  // time-picker 点击\n  function onTimePickerChange(val: string) {\n    const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(val);\n\n    const nextInputValue = [...inputValue];\n    const changedInputValue = inputValue[activeIndex];\n    const currentDate = !dayjs(changedInputValue, format).isValid()\n      ? dayjs().year(year[activeIndex]).month(month[activeIndex])\n      : dayjs(changedInputValue, format);\n    // am pm 12小时制转化 24小时制\n    let nextHours = hours;\n    if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n    if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n\n    const nextDate = currentDate.hour(nextHours).minute(minutes).second(seconds).millisecond(milliseconds).toDate();\n    nextInputValue[activeIndex] = nextDate;\n\n    const nextTime = [...time];\n    nextTime[activeIndex] = val;\n    setTime(nextTime);\n\n    setIsSelected(true);\n    setInputValue(formatDate(nextInputValue, { format }));\n    setCacheValue(formatDate(nextInputValue, { format }));\n  }\n\n  // 确定\n  function onConfirmClick({ e }) {\n    const nextValue = [...inputValue];\n    props?.onConfirm?.({ e, date: nextValue, partial: activeIndex ? 'end' : 'start' });\n\n    const notValidIndex = nextValue.findIndex((v) => !v || !isValidDate(v, format));\n\n    // 当两端都有有效值时更改 value\n    if (notValidIndex === -1 && nextValue.length === 2) {\n      // 二次修改时当其中一侧不符合上次区间规范时，清空另一侧数据\n      if (!isFirstValueSelected && parseToDayjs(nextValue[0], format).isAfter(parseToDayjs(nextValue[1], format))) {\n        nextValue[activeIndex ? 0 : 1] = '';\n        setCacheValue(nextValue);\n        setInputValue(nextValue);\n      } else {\n        onChange(formatDate(nextValue, { format, targetFormat: valueType, autoSwap: true }), {\n          dayjsValue: nextValue.map((v) => parseToDayjs(v, format)),\n          trigger: 'confirm',\n        });\n      }\n    }\n\n    // 首次点击不关闭、确保两端都有有效值并且无时间选择器时点击后自动关闭\n    if (!isFirstValueSelected || !activeIndex) {\n      let nextIndex = notValidIndex;\n      if (nextIndex === -1) nextIndex = activeIndex ? 0 : 1;\n      setActiveIndex(nextIndex);\n      setIsFirstValueSelected(!!nextValue[0]);\n    } else if (nextValue.length === 2) {\n      handlePopupInvisible();\n    }\n  }\n\n  // 预设\n  function onPresetClick(\n    preset: DateRangeValue | (() => DateRangeValue),\n    context: { preset: PresetDate; e: React.MouseEvent<HTMLDivElement> },\n  ) {\n    let presetValue = preset;\n    if (typeof preset === 'function') {\n      presetValue = preset();\n    }\n    if (!Array.isArray(presetValue)) {\n      log.error('DateRangePicker', `preset: ${preset} must be Array!`);\n    } else {\n      const formattedPreset = formatDate(presetValue, { format, targetFormat: valueType });\n      setInputValue(formattedPreset);\n      setCacheValue(formattedPreset);\n      setTime(formatTime(formattedPreset, format, timeFormat, props.defaultTime));\n\n      setIsSelected(true);\n      setIsFirstValueSelected(true);\n\n      handleSyncPanelValue(formattedPreset);\n      handlePopupInvisible();\n      onChange(formattedPreset, { dayjsValue: formattedPreset.map((p) => parseToDayjs(p, format)), trigger: 'preset' });\n      props.onPresetClick?.(context);\n    }\n  }\n\n  function onYearChange(nextVal: number, { partial }) {\n    let partialIndex = partial === 'start' ? 0 : 1;\n    if (enableTimePicker) partialIndex = activeIndex;\n\n    let nextYear = [...year];\n    let nextMonth = [...month];\n    nextYear[partialIndex] = nextVal;\n    // 年/季度/月份场景下，头部只有年选择器\n    const onlyYearSelect = ['year', 'quarter', 'month'].includes(mode);\n\n    const correctedDate = dateCorrection(partialIndex, nextYear, nextMonth, onlyYearSelect);\n    nextYear = correctedDate.nextYear;\n    nextMonth = correctedDate.nextMonth;\n\n    setYear(nextYear);\n    !onlyYearSelect && setMonth(nextMonth);\n  }\n\n  function onMonthChange(nextVal: number, { partial }) {\n    let partialIndex = partial === 'start' ? 0 : 1;\n    if (enableTimePicker) partialIndex = activeIndex;\n    setMonth((currentMonth) => {\n      const nextMonth = [...currentMonth];\n      nextMonth[partialIndex] = nextVal;\n      // 保证左侧时间不大于右侧\n      if (year[0] === year[1]) {\n        if (partialIndex === 0) {\n          // 操作了左侧区间, 处理右侧区间小于或等于左侧区间的场景，交互上始终报错右侧比左侧大 1\n          if (nextMonth[1] <= nextMonth[0]) {\n            nextMonth[1] = nextMonth[0] + 1;\n            if (nextMonth[1] === 12) {\n              // 处理跨年的边界场景\n              nextMonth[1] = 0;\n              setYear((currentYear) => [currentYear[0], currentYear[1] + 1]);\n            }\n          }\n        }\n        if (partialIndex === 1) {\n          // 操作了右侧区间, 处理右侧区间小于或等于左侧区间的场景，交互上始终报错左侧比右侧小 1\n          nextMonth[0] = Math.min(nextMonth[0], nextMonth[1]);\n          if (nextMonth[0] >= nextMonth[1]) {\n            nextMonth[0] -= 1;\n            if (nextMonth[0] === -1) {\n              // 处理跨年的边界场景\n              nextMonth[0] = 11;\n              setYear((currentYear) => [currentYear[0] - 1, currentYear[1]]);\n            }\n          }\n        }\n      }\n      return nextMonth;\n    });\n  }\n\n  const panelProps = {\n    hoverValue: isHoverCell ? inputValue : [],\n    value: isSelected ? cacheValue : value,\n    isFirstValueSelected,\n    panelPreselection,\n    year,\n    month,\n    mode,\n    format,\n    presets,\n    time,\n    disableDate,\n    firstDayOfWeek,\n    timePickerProps,\n    enableTimePicker,\n    presetsPlacement,\n    activeIndex,\n    popupVisible,\n    cancelRangeSelectLimit,\n    needConfirm,\n    onCellClick,\n    onCellMouseEnter,\n    onCellMouseLeave,\n    onJumperClick,\n    onConfirmClick,\n    onPresetClick,\n    onYearChange,\n    onMonthChange,\n    onTimePickerChange,\n    disableTime,\n  };\n\n  return (\n    <div className={classNames(`${classPrefix}-date-range-picker`, className)} style={style} ref={ref}>\n      <RangeInputPopup\n        disabled={disabled}\n        status={props.status}\n        tips={props.tips}\n        inputValue={inputValue}\n        popupProps={popupProps}\n        rangeInputProps={rangeInputProps}\n        popupVisible={popupVisible}\n        panel={<RangePanel {...panelProps} />}\n      />\n    </div>\n  );\n});\n\nDateRangePicker.displayName = 'DateRangePicker';\n\nexport default DateRangePicker;\n"],"names":["DateRangePicker","forwardRef","originalProps","ref","_useConfig","useConfig","classPrefix","globalDatePickerConfig","datePicker","props","useDefaultProps","dateRangePickerDefaultProps","className","style","disabled","mode","enableTimePicker","disableDate","_props$firstDayOfWeek","firstDayOfWeek","presets","timePickerProps","presetsPlacement","panelPreselection","cancelRangeSelectLimit","onPick","disableTime","needConfirm","_useRange","useRange","inputValue","popupVisible","rangeInputProps","popupProps","value","year","month","time","activeIndex","isHoverCell","setActiveIndex","onChange","setIsHoverCell","setInputValue","setPopupVisible","setTime","setYear","setMonth","isFirstValueSelected","setIsFirstValueSelected","cacheValue","setCacheValue","_getDefaultFormat","getDefaultFormat","format","valueType","timeFormat","_useState","useState","_useState2","_slicedToArray","isSelected","setIsSelected","handleSyncPanelValue","nextMonth","map","v","parseToDayjs","nextYear","handlePopupInvisible","_props$popupProps","_props$popupProps$onV","onVisibleChange","call","onTriggerNeedConfirm","useLatest","nextValue","_toConsumableArray","notValidIndex","findIndex","isValidDate","length","currentValue","formatDate","formattedValue","targetFormat","autoSwap","dayjsValue","trigger","useEffect","formatTime","dayjs","defaultTime","_initYearMonthTime","initYearMonthTime","defaultYear","defaultMonth","useUpdateEffect","current","onCellMouseEnter","date","onCellMouseLeave","onCellClick","_ref","e","partial","isAfter","nextIndex","onJumperClick","_ref2","partialIndex","monthCountMap","week","quarter","monthCount","Date","next","subtractMonth","addMonth","getFullYear","getMonth","onlyYearSelect","includes","correctedDate","dateCorrection","onTimePickerChange","val","_extractTimeObj","extractTimeObj","hours","minutes","seconds","milliseconds","meridiem","nextInputValue","changedInputValue","currentDate","isValid","nextHours","test","nextDate","hour","minute","second","millisecond","toDate","nextTime","onConfirmClick","_ref3","_props$onConfirm","onConfirm","onPresetClick","preset","context","presetValue","Array","isArray","log","error","concat","_props$onPresetClick","formattedPreset","p","onYearChange","nextVal","_ref4","onMonthChange","_ref5","currentMonth","currentYear","Math","min","panelProps","hoverValue","React","createElement","classNames","RangeInputPopup","status","tips","panel","RangePanel","_objectSpread","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BMA,IAAAA,eAAkB,gBAAAC,UAAA,CAAiD,UAACC,aAAA,EAAeC,GAAQ,EAAA;AAC/F,EAAA,IAAAC,UAAA,GAA4DC,SAAU,EAAA;IAA9DC,WAAA,GAAAF,UAAA,CAAAE,WAAA;IAAyBC,sBAAA,GAAAH,UAAA,CAAZI,UAAY,CAAA;AAE3B,EAAA,IAAAC,KAAA,GAAQC,eAAsC,CAAAR,aAAA,EAAeS,2BAA2B,CAAA,CAAA;AAExF,EAAA,IACJC,SAAA,GAeEH,KAAA,CAfFG,SAAA;IACAC,KAAA,GAcEJ,KAAA,CAdFI,KAAA;IACAC,QAAA,GAaEL,KAAA,CAbFK,QAAA;IACAC,IAAA,GAYEN,KAAA,CAZFM,IAAA;IACAC,gBAAA,GAWEP,KAAA,CAXFO,gBAAA;IACAC,WAAA,GAUER,KAAA,CAVFQ,WAAA;IAAAC,qBAAA,GAUET,KAAA,CATFU;AAAAA,IAAAA,oDAAiBZ,sBAAuB,CAAAY,cAAA,GAAAD,qBAAA;IACxCE,OAAA,GAQEX,KAAA,CARFW,OAAA;IACAC,eAAA,GAOEZ,KAAA,CAPFY,eAAA;IACAC,gBAAA,GAMEb,KAAA,CANFa,gBAAA;IACAC,iBAAA,GAKEd,KAAA,CALFc,iBAAA;IACAC,sBAAA,GAIEf,KAAA,CAJFe,sBAAA;IACAC,MAAA,GAGEhB,KAAA,CAHFgB,MAAA;IACAC,WAAA,GAEEjB,KAAA,CAFFiB,WAAA;IACAC,WAAA,GACElB,KAAA,CADFkB,WAAA,CAAA;AAGI,EAAA,IAAAC,SAAA,GAuBFC,SAASpB,KAAK,CAAA;IAtBhBqB,UAAA,GAAAF,SAAA,CAAAE,UAAA;IACAC,YAAA,GAAAH,SAAA,CAAAG,YAAA;IACAC,eAAA,GAAAJ,SAAA,CAAAI,eAAA;IACAC,UAAA,GAAAL,SAAA,CAAAK,UAAA;IACAC,KAAA,GAAAN,SAAA,CAAAM,KAAA;IACAC,IAAA,GAAAP,SAAA,CAAAO,IAAA;IACAC,KAAA,GAAAR,SAAA,CAAAQ,KAAA;IACAC,IAAA,GAAAT,SAAA,CAAAS,IAAA;IACAC,WAAA,GAAAV,SAAA,CAAAU,WAAA;IACAC,WAAA,GAAAX,SAAA,CAAAW,WAAA;IACAC,cAAA,GAAAZ,SAAA,CAAAY,cAAA;IACAC,QAAA,GAAAb,SAAA,CAAAa,QAAA;IACAC,cAAA,GAAAd,SAAA,CAAAc,cAAA;IACAC,aAAA,GAAAf,SAAA,CAAAe,aAAA;IACAC,eAAA,GAAAhB,SAAA,CAAAgB,eAAA;IACAC,OAAA,GAAAjB,SAAA,CAAAiB,OAAA;IACAC,OAAA,GAAAlB,SAAA,CAAAkB,OAAA;IACAC,QAAA,GAAAnB,SAAA,CAAAmB,QAAA;IACAC,oBAAA,GAAApB,SAAA,CAAAoB,oBAAA;IACAC,uBAAA,GAAArB,SAAA,CAAAqB,uBAAA;IACAC,UAAA,GAAAtB,SAAA,CAAAsB,UAAA;IACAC,aAAA,GAAAvB,SAAA,CAAAuB,aAAA,CAAA;EAGF,IAAAC,iBAAA,GAA0CC,gBAAiB,CAAA;AACzDtC,MAAAA,IAAA,EAAAA,IAAA;AACAC,MAAAA,gBAAA,EAAAA,gBAAA;MACAsC,QAAQ7C,KAAM,CAAA6C,MAAA;MACdC,WAAW9C,KAAM,CAAA8C,SAAAA;AACnB,KAAC,CAAA;IALOD,MAAA,GAAAF,iBAAA,CAAAE,MAAA;IAAQE,UAAY,GAAAJ,iBAAA,CAAZI,UAAY;IAAAD,SAAA,GAAAH,iBAAA,CAAAG,SAAA,CAAA;AAQ5B,EAAA,IAAAE,SAAA,GAAoCC,SAAS,KAAK,CAAA;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAA3CI,IAAAA,UAAA,GAAAF,UAAA,CAAA,CAAA,CAAA;AAAYG,IAAAA,aAAa,GAAAH,UAAA,CAAA,CAAA,CAAA,CAAA;AAE1B,EAAA,IAAAI,oBAAA,GAAuB,SAAvBA,oBAAAA,CAAwB7B,MAA0B,EAAA;AAEhD,IAAA,IAAA8B,SAAA,GAAY9B,MAAM,CAAA+B,GAAA,CAAI,UAACC,CAAA,EAAA;MAAA,OAAcC,aAAaD,CAAG,EAAAZ,MAAM,CAAE,CAAAlB,KAAA,EAAO,CAAA;KAAA,CAAA,CAAA;AACpE,IAAA,IAAAgC,QAAA,GAAWlC,MAAM,CAAA+B,GAAA,CAAI,UAACC,CAAA,EAAA;MAAA,OAAcC,aAAaD,CAAG,EAAAZ,MAAM,CAAE,CAAAnB,IAAA,EAAM,CAAA;KAAA,CAAA,CAAA;AACxE,IAAA,IAAIiC,SAAS,CAAO,CAAA,KAAAA,QAAA,CAAS,MAAMJ,SAAU,CAAA,CAAA,CAAA,KAAOA,UAAU,CAAI,CAAA,EAAA;AAChEA,MAAAA,SAAA,CAAU,OAAO,EAAM,GAAAA,SAAA,CAAU,CAAM,CAAA,IAAA,CAAA,GAAMA,UAAU,CAAM,CAAA,IAAA,CAAA,CAAA;AAC/D,KAAA;IACAjB,QAAA,CAASiB,SAAS,CAAA,CAAA;IAClBlB,OAAA,CAAQsB,QAAQ,CAAA,CAAA;GAClB,CAAA;AAEA,EAAA,IAAMC,uBAAuB,SAAvBA,uBAA6B;IAAA,IAAAC,iBAAA,EAAAC,qBAAA,CAAA;IACjC3B,eAAA,CAAgB,KAAK,CAAA,CAAA;IACrB,CAAA0B,iBAAA,GAAA7D,KAAA,CAAMwB,UAAY,MAAAqC,IAAAA,IAAAA,iBAAA,KAAAC,KAAAA,CAAAA,IAAAA,CAAAA,qBAAA,GAAlBD,iBAAA,CAAkBE,eAAA,cAAAD,qBAAA,KAAA,KAAA,CAAA,IAAlBA,qBAAA,CAAAE,IAAA,CAAAH,iBAAA,EAAoC,KAAO,EAAA,EAAE,CAAA,CAAA;GAC/C,CAAA;AAEM,EAAA,IAAAI,oBAAA,GAAuBC,UAAU,YAAM;AACvC,IAAA,IAAAhD,WAAA,IAAe,CAACX,gBAAoB,IAAAe,YAAA,EAAc,OAAA;AAEhD,IAAA,IAAA6C,SAAA,GAAAC,kBAAA,CAAgB/C,UAAU,CAAA,CAAA;AAC1B,IAAA,IAAAgD,aAAA,GAAgBF,SAAU,CAAAG,SAAA,CAAU,UAACb,CAAA,EAAA;MAAA,OAAM,CAACA,CAAA,IAAK,CAACc,WAAA,CAAYd,CAAG,EAAAZ,MAAM,CAAC,CAAA;KAAA,CAAA,CAAA;IAG9E,IAAIwB,aAAkB,KAAA,CAAA,CAAA,IAAMF,SAAU,CAAAK,MAAA,KAAW,CAAG,EAAA;AAClD,MAAA,IAAMC,eAAeC,UAAW,CAAAjD,KAAA,IAAS,EAAI,EAAA;AAAEoB,QAAAA,QAAAA,MAAAA;AAAO,OAAC,CAAA,CAAA;AAGvD,MAAA,IAAI4B,aAAa,CAAO,CAAA,KAAAN,SAAA,CAAU,MAAMM,YAAa,CAAA,CAAA,CAAA,KAAON,UAAU,CAAI,CAAA,EAAA;AAClE,QAAA,IAAAQ,cAAA,GAAiBD,WAAWP,SAAW,EAAA;AAAEtB,UAAAA,QAAAA;AAAQ+B,UAAAA,YAAc,EAAA9B,SAAA;AAAW+B,UAAAA,QAAU,EAAA,IAAA;AAAK,SAAC,CAAA,CAAA;QAChG7C,QAAA,CAAS2C,cAAgB,EAAA;AACvBG,UAAAA,UAAA,EAAYX,UAAUX,GAAI,CAAA,UAACC;mBAAMC,YAAa,CAAAD,CAAA,EAAGZ,MAAM,CAAC,CAAA;WAAA,CAAA;AACxDkC,UAAAA,OAAS,EAAA,SAAA;AACX,SAAC,CAAA,CAAA;AACH,OAAA;AACF,KAAO,MAAA;AAEL7C,MAAAA,aAAA,CAAcwC,WAAWjD,KAAS,IAAA,IAAI;AAAEoB,QAAAA,MAAA,EAAAA,MAAAA;AAAO,OAAC,CAAC,CAAA,CAAA;AACnD,KAAA;AACF,GAAC,CAAA,CAAA;AAEDmC,EAAAA,SAAA,CAAU,YAAM;IACd,IAAIvD,KAAU,KAAAgB,UAAA,EAAY,OAAA;AAE1B,IAAA,IAAInB,YAAc,EAAA;MAChB+B,aAAA,CAAc,KAAK,CAAA,CAAA;AACnBX,MAAAA,aAAA,CAAcgC,WAAWjD,KAAS,IAAA,IAAI;AAAEoB,QAAAA,MAAA,EAAAA,MAAAA;AAAO,OAAC,CAAC,CAAA,CAAA;AACjDT,MAAAA,OAAA,CACE6C,UAAA,CACExD,KAAA,IAAS,CAACyD,KAAA,EAAQ,CAAArC,MAAA,CAAOE,UAAU,CAAA,EAAGmC,KAAM,EAAA,CAAErC,MAAO,CAAAE,UAAU,CAAC,CAAA,EAChEF,MAAA,EACAE,UAAA,EACA/C,KAAM,CAAAmF,WACR,CACF,CAAA,CAAA;AAGI,MAAA,IAAA,CAAC1D,MAAM+C,MAAQ,EAAA;QACjB,IAAAY,kBAAA,GAAmDC,iBAAkB,CAAA;AAAE5D,YAAAA,KAAO,EAAPA,KAAO;AAAAnB,YAAAA,IAAA,EAAAA,IAAA;AAAMuC,YAAAA,MAAQ,EAARA,MAAQ;AAAAtC,YAAAA,gBAAA,EAAAA,gBAAAA;AAAiB,WAAC,CAAA;UAAhG+E,WAAa,GAAAF,kBAAA,CAAnB1D,IAAA;UAA0B6D,YAAa,GAAAH,kBAAA,CAApBzD,KAAA,CAAA;QAC3BU,OAAA,CAAQiD,WAAW,CAAA,CAAA;QACnBhD,QAAA,CAASiD,YAAY,CAAA,CAAA;OACZ,MAAA,IAAA9D,KAAA,CAAM+C,MAAW,KAAA,CAAA,IAAK,CAACjE,gBAAkB,EAAA;QAClD+C,oBAAA,CAAqB7B,KAAK,CAAA,CAAA;AAC5B,OAAO,MAAA;AACGY,QAAAA,OAAA,CAAAZ,KAAA,CAAM+B,GAAI,CAAA,UAACC,CAAc,EAAA;UAAA,OAAAC,YAAA,CAAaD,GAAGZ,MAAM,CAAA,CAAEnB,IAAK,EAAC,CAAA;AAAA,SAAA,CAAC,CAAA,CAAA;AACvDY,QAAAA,QAAA,CAAAb,KAAA,CAAM+B,GAAI,CAAA,UAACC,CAAc,EAAA;UAAA,OAAAC,YAAA,CAAaD,GAAGZ,MAAM,CAAA,CAAElB,KAAM,EAAC,CAAA;AAAA,SAAA,CAAC,CAAA,CAAA;AACpE,OAAA;AACF,KAAO,MAAA;MACLI,cAAA,CAAe,CAAC,CAAA,CAAA;MAChBE,cAAA,CAAe,KAAK,CAAA,CAAA;MACpBO,uBAAA,CAAwB,KAAK,CAAA,CAAA;AAC7BN,MAAAA,aAAA,CAAcwC,WAAWjD,KAAS,IAAA,IAAI;AAAEoB,QAAAA,MAAA,EAAAA,MAAAA;AAAO,OAAC,CAAC,CAAA,CAAA;AACnD,KAAA;AAEF,GAAA,EAAG,CAACvB,YAAY,CAAC,CAAA,CAAA;AAGjBkE,EAAAA,eAAA,CAAgB,YAAM;IACpBvB,oBAAA,CAAqBwB,OAAQ,EAAA,CAAA;AAC/B,GAAA,EAAG,CAACnE,YAAY,CAAC,CAAA,CAAA;EAGjB,SAASoE,iBAAiBC,IAAY,EAAA;IACpC1D,cAAA,CAAe,IAAI,CAAA,CAAA;AACb,IAAA,IAAAkC,SAAA,GAAAC,kBAAA,CAAgB/C,UAAU,CAAA,CAAA;AAChC8C,IAAAA,SAAA,CAAUtC,WAAe,CAAA,GAAA6C,UAAA,CAAWiB,IAAM,EAAA;AAAE9C,MAAAA,QAAAA,MAAAA;AAAO,KAAC,CAAA,CAAA;IACpDX,aAAA,CAAciC,SAAS,CAAA,CAAA;AACzB,GAAA;EAGA,SAASyB,gBAAmBA,GAAA;IAC1B3D,cAAA,CAAe,KAAK,CAAA,CAAA;IACpBC,aAAA,CAAcO,UAAU,CAAA,CAAA;AAC1B,GAAA;AAGA,EAAA,SAASoD,WAAYA,CAAAF,IAAA,EAAAG,IAAA,EAAmB;AAAA,IAAA,IAALC,CAAA,GAAAD,IAAA,CAAAC,CAAA,CAAA;AACjC/E,IAAAA,MAAA,aAAAA,MAAA,KAAA,KAAA,CAAA,IAAAA,MAAA,CAAS2E,MAAM;AAAEI,MAAAA,CAAA,EAAAA,CAAA;AAAGC,MAAAA,SAASnE,WAAc,GAAA,KAAA,GAAQ,OAAA;AAAQ,KAAC,CAAA,CAAA;IAE5DI,cAAA,CAAe,KAAK,CAAA,CAAA;IACpBoB,aAAA,CAAc,IAAI,CAAA,CAAA;AAEZ,IAAA,IAAAc,SAAA,GAAAC,kBAAA,CAAgB/C,UAAU,CAAA,CAAA;AAChC8C,IAAAA,SAAA,CAAUtC,WAAe,CAAA,GAAA6C,UAAA,CAAWiB,IAAM,EAAA;AAAE9C,MAAAA,QAAAA,MAAAA;AAAO,KAAC,CAAA,CAAA;IACpDH,aAAA,CAAcyB,SAAS,CAAA,CAAA;IACvBjC,aAAA,CAAciC,SAAS,CAAA,CAAA;AAGnB,IAAA,IAAA5D,gBAAA,EAAkB,OAAA;AAGhB,IAAA,IAAA8D,aAAA,GAAgBF,SAAU,CAAAG,SAAA,CAAU,UAACb,CAAA,EAAA;MAAA,OAAM,CAACA,CAAA,IAAK,CAACc,WAAA,CAAYd,CAAG,EAAAZ,MAAM,CAAC,CAAA;KAAA,CAAA,CAAA;IAG9E,IAAIwB,aAAkB,KAAA,CAAA,CAAA,IAAMF,SAAU,CAAAK,MAAA,KAAW,CAAG,EAAA;MAElD,IAAI,CAACjC,oBAAA,IAAwBmB,YAAa,CAAAS,SAAA,CAAU,CAAI,CAAA,EAAAtB,MAAM,CAAE,CAAAoD,OAAA,CAAQvC,YAAa,CAAAS,SAAA,CAAU,CAAI,CAAA,EAAAtB,MAAM,CAAC,CAAG,EAAA;QACjGsB,SAAA,CAAAtC,WAAA,GAAc,IAAI,CAAK,CAAA,GAAA,EAAA,CAAA;QACjCa,aAAA,CAAcyB,SAAS,CAAA,CAAA;QACvBjC,aAAA,CAAciC,SAAS,CAAA,CAAA;AACzB,OAAO,MAAA;AACInC,QAAAA,QAAA,CAAA0C,UAAA,CAAWP,WAAW;AAAEtB,UAAAA,MAAA,EAAAA,MAAA;AAAQ+B,UAAAA,cAAc9B,SAAW;AAAA+B,UAAAA,QAAA,EAAU,IAAA;AAAK,SAAC,CAAG,EAAA;AACnFC,UAAAA,UAAA,EAAYX,UAAUX,GAAI,CAAA,UAACC;mBAAMC,YAAa,CAAAD,CAAA,EAAGZ,MAAM,CAAC,CAAA;WAAA,CAAA;AACxDkC,UAAAA,OAAS,EAAA,MAAA;AACX,SAAC,CAAA,CAAA;AACH,OAAA;AACF,KAAA;AAGI,IAAA,IAAA,CAACxC,oBAAwB,IAAA,CAACV,WAAa,EAAA;MACzC,IAAIqE,SAAY,GAAA7B,aAAA,CAAA;MAChB,IAAI6B,SAAc,KAAA,CAAA,CAAA,EAAIA,SAAA,GAAYrE,cAAc,CAAI,GAAA,CAAA,CAAA;MACpDE,cAAA,CAAemE,SAAS,CAAA,CAAA;AACA1D,MAAAA,uBAAA,CAAA,CAAC,CAAC2B,SAAA,CAAU,CAAE,CAAA,CAAA,CAAA;AACxC,KAAO,MAAA;AACgBP,MAAAA,oBAAA,EAAA,CAAA;AACvB,KAAA;AACF,GAAA;EAGA,SAASuC,aAAcA,CAAAC,KAAA,EAAsB;AAAA,IAAA,IAApBrB,OAAS,GAAAqB,KAAA,CAATrB,OAAS;MAAAiB,OAAA,GAAAI,KAAA,CAAAJ,OAAA,CAAA;IAC1B,IAAAK,YAAA,GAAeL,OAAY,KAAA,OAAA,GAAU,CAAI,GAAA,CAAA,CAAA;AAEzC,IAAA,IAAAM,aAAA,GAAgB;AAAEX,MAAAA,IAAA,EAAM,CAAG;AAAAY,MAAAA,IAAA,EAAM,CAAG;AAAA5E,MAAAA,KAAA,EAAO,EAAI;AAAA6E,MAAAA,OAAA,EAAS,EAAI;AAAA9E,MAAAA,IAAA,EAAM,GAAA;KAAI,CAAA;AACtE,IAAA,IAAA+E,UAAA,GAAaH,cAAchG,IAAS,CAAA,IAAA,CAAA,CAAA;AAC1C,IAAA,IAAMmF,UAAU,IAAIiB,IAAA,CAAKhF,IAAK,CAAA2E,YAAA,CAAA,EAAe1E,MAAM0E,YAAa,CAAA,CAAA,CAAA;IAEhE,IAAIM,IAAO,GAAA,IAAA,CAAA;IACX,IAAI5B,YAAY,MAAQ,EAAA;AACf4B,MAAAA,IAAA,GAAAC,aAAA,CAAcnB,SAASgB,UAAU,CAAA,CAAA;AAC1C,KAAA,MAAA,IAAW1B,YAAY,SAAW,EAAA;AAChC4B,MAAAA,IAAA,GAAO,IAAID,IAAK,EAAA,CAAA;AAClB,KAAA,MAAA,IAAW3B,YAAY,MAAQ,EAAA;AACtB4B,MAAAA,IAAA,GAAAE,QAAA,CAASpB,SAASgB,UAAU,CAAA,CAAA;AACrC,KAAA;AAEI,IAAA,IAAA9C,QAAA,GAAAS,kBAAA,CAAe1C,IAAI,CAAA,CAAA;IACdiC,QAAA,CAAA0C,YAAA,CAAA,GAAgBM,KAAKG,WAAY,EAAA,CAAA;AACtC,IAAA,IAAAvD,SAAA,GAAAa,kBAAA,CAAgBzC,KAAK,CAAA,CAAA;IACf4B,SAAA,CAAA8C,YAAA,CAAA,GAAgBM,KAAKI,QAAS,EAAA,CAAA;AACxC,IAAA,IAAMC,iBAAiB,CAAC,MAAA,EAAQ,WAAW,OAAO,CAAA,CAAEC,SAAS3G,IAAI,CAAA,CAAA;IAEjE,IAAM4G,aAAgB,GAAAC,cAAA,CAAed,YAAc,EAAA1C,QAAA,EAAUJ,WAAWyD,cAAc,CAAA,CAAA;IACtFrD,QAAA,GAAWuD,aAAc,CAAAvD,QAAA,CAAA;IACzBJ,SAAA,GAAY2D,aAAc,CAAA3D,SAAA,CAAA;IAE1BlB,OAAA,CAAQsB,QAAQ,CAAA,CAAA;IAChBrB,QAAA,CAASiB,SAAS,CAAA,CAAA;AACpB,GAAA;EAGA,SAAS6D,mBAAmBC,GAAa,EAAA;AACjC,IAAA,IAAAC,eAAA,GAAsDC,eAAeF,GAAG,CAAA;MAAtEG,wBAAAA;MAAOC,OAAS,GAAAH,eAAA,CAATG,OAAS;MAAAC,OAAA,GAAAJ,eAAA,CAAAI,OAAA;MAASC,+BAAAA;MAAcC,QAAS,GAAAN,eAAA,CAATM,QAAS,CAAA;AAElD,IAAA,IAAAC,cAAA,GAAAzD,kBAAA,CAAqB/C,UAAU,CAAA,CAAA;AACrC,IAAA,IAAMyG,oBAAoBzG,UAAW,CAAAQ,WAAA,CAAA,CAAA;AAC/B,IAAA,IAAAkG,WAAA,GAAc,CAAC7C,KAAM,CAAA4C,iBAAA,EAAmBjF,MAAM,CAAE,CAAAmF,OAAA,KAClD9C,KAAM,EAAA,CAAExD,KAAKA,IAAK,CAAAG,WAAA,CAAY,EAAEF,KAAM,CAAAA,KAAA,CAAME,YAAY,CACxD,GAAAqD,KAAA,CAAM4C,mBAAmBjF,MAAM,CAAA,CAAA;IAEnC,IAAIoF,SAAY,GAAAT,KAAA,CAAA;AAChB,IAAA,IAAI,KAAM,CAAAU,IAAA,CAAKN,QAAQ,CAAA,IAAKK,SAAc,KAAA,EAAA,EAAiBA,SAAA,IAAA,EAAA,CAAA;AAC3D,IAAA,IAAI,KAAM,CAAAC,IAAA,CAAKN,QAAQ,CAAA,IAAKK,SAAY,GAAA,EAAA,EAAiBA,SAAA,IAAA,EAAA,CAAA;IAEzD,IAAME,QAAW,GAAAJ,WAAA,CAAYK,IAAK,CAAAH,SAAS,EAAEI,MAAO,CAAAZ,OAAO,CAAE,CAAAa,MAAA,CAAOZ,OAAO,CAAA,CAAEa,WAAY,CAAAZ,YAAY,EAAEa,MAAO,EAAA,CAAA;AAC9GX,IAAAA,cAAA,CAAehG,WAAe,CAAA,GAAAsG,QAAA,CAAA;AAExB,IAAA,IAAAM,QAAA,GAAArE,kBAAA,CAAexC,IAAI,CAAA,CAAA;AACzB6G,IAAAA,QAAA,CAAS5G,WAAe,CAAA,GAAAwF,GAAA,CAAA;IACxBjF,OAAA,CAAQqG,QAAQ,CAAA,CAAA;IAEhBpF,aAAA,CAAc,IAAI,CAAA,CAAA;AAClBnB,IAAAA,aAAA,CAAcwC,UAAW,CAAAmD,cAAA,EAAgB;AAAEhF,MAAAA,MAAA,EAAAA,MAAAA;AAAO,KAAC,CAAC,CAAA,CAAA;AACpDH,IAAAA,aAAA,CAAcgC,UAAW,CAAAmD,cAAA,EAAgB;AAAEhF,MAAAA,MAAA,EAAAA,MAAAA;AAAO,KAAC,CAAC,CAAA,CAAA;AACtD,GAAA;EAGS,SAAA6F,cAAAA,CAAAC,KAAA,EAAsB;AAAA,IAAA,IAAAC,gBAAA,CAAA;AAAA,IAAA,IAAL7C,CAAA,GAAA4C,KAAA,CAAA5C,CAAA,CAAA;AAClB,IAAA,IAAA5B,SAAA,GAAAC,kBAAA,CAAgB/C,UAAU,CAAA,CAAA;AACzBrB,IAAAA,KAAA,aAAAA,KAAA,KAAA,KAAA,CAAA,IAAA,CAAA4I,gBAAA,GAAA5I,KAAA,CAAA6I,SAAA,MAAAD,IAAAA,IAAAA,gBAAA,eAAAA,gBAAA,CAAA5E,IAAA,CAAAhE,KAAA,EAAY;AAAE+F,MAAAA,CAAG,EAAHA,CAAG;AAAAJ,MAAAA,IAAA,EAAMxB;AAAW6B,MAAAA,OAAS,EAAAnE,WAAA,GAAc,KAAQ,GAAA,OAAA;AAAQ,KAAC,CAAA,CAAA;AAE3E,IAAA,IAAAwC,aAAA,GAAgBF,SAAU,CAAAG,SAAA,CAAU,UAACb,CAAA,EAAA;MAAA,OAAM,CAACA,CAAA,IAAK,CAACc,WAAA,CAAYd,CAAG,EAAAZ,MAAM,CAAC,CAAA;KAAA,CAAA,CAAA;IAG9E,IAAIwB,aAAkB,KAAA,CAAA,CAAA,IAAMF,SAAU,CAAAK,MAAA,KAAW,CAAG,EAAA;MAElD,IAAI,CAACjC,oBAAA,IAAwBmB,YAAa,CAAAS,SAAA,CAAU,CAAI,CAAA,EAAAtB,MAAM,CAAE,CAAAoD,OAAA,CAAQvC,YAAa,CAAAS,SAAA,CAAU,CAAI,CAAA,EAAAtB,MAAM,CAAC,CAAG,EAAA;QACjGsB,SAAA,CAAAtC,WAAA,GAAc,IAAI,CAAK,CAAA,GAAA,EAAA,CAAA;QACjCa,aAAA,CAAcyB,SAAS,CAAA,CAAA;QACvBjC,aAAA,CAAciC,SAAS,CAAA,CAAA;AACzB,OAAO,MAAA;AACInC,QAAAA,QAAA,CAAA0C,UAAA,CAAWP,WAAW;AAAEtB,UAAAA,MAAA,EAAAA,MAAA;AAAQ+B,UAAAA,cAAc9B,SAAW;AAAA+B,UAAAA,QAAA,EAAU,IAAA;AAAK,SAAC,CAAG,EAAA;AACnFC,UAAAA,UAAA,EAAYX,UAAUX,GAAI,CAAA,UAACC;mBAAMC,YAAa,CAAAD,CAAA,EAAGZ,MAAM,CAAC,CAAA;WAAA,CAAA;AACxDkC,UAAAA,OAAS,EAAA,SAAA;AACX,SAAC,CAAA,CAAA;AACH,OAAA;AACF,KAAA;AAGI,IAAA,IAAA,CAACxC,oBAAwB,IAAA,CAACV,WAAa,EAAA;MACzC,IAAIqE,SAAY,GAAA7B,aAAA,CAAA;MAChB,IAAI6B,SAAc,KAAA,CAAA,CAAA,EAAIA,SAAA,GAAYrE,cAAc,CAAI,GAAA,CAAA,CAAA;MACpDE,cAAA,CAAemE,SAAS,CAAA,CAAA;AACA1D,MAAAA,uBAAA,CAAA,CAAC,CAAC2B,SAAA,CAAU,CAAE,CAAA,CAAA,CAAA;AACxC,KAAA,MAAA,IAAWA,SAAU,CAAAK,MAAA,KAAW,CAAG,EAAA;AACZZ,MAAAA,oBAAA,EAAA,CAAA;AACvB,KAAA;AACF,GAAA;AAGS,EAAA,SAAAkF,aAAAA,CACPC,QACAC,OACA,EAAA;IACA,IAAIC,WAAc,GAAAF,MAAA,CAAA;AACd,IAAA,IAAA,OAAOA,WAAW,UAAY,EAAA;MAChCE,WAAA,GAAcF,MAAO,EAAA,CAAA;AACvB,KAAA;AACA,IAAA,IAAI,CAACG,KAAA,CAAMC,OAAQ,CAAAF,WAAW,CAAG,EAAA;MAC3BG,GAAA,CAAAC,KAAA,CAAM,iBAAmB,aAAAC,MAAA,CAAWP,MAAuB,EAAA,iBAAA,CAAA,CAAA,CAAA;AACjE,KAAO,MAAA;AAAA,MAAA,IAAAQ,oBAAA,CAAA;AACL,MAAA,IAAMC,kBAAkB9E,UAAW,CAAAuE,WAAA,EAAa;AAAEpG,QAAAA,MAAQ,EAARA,MAAQ;AAAA+B,QAAAA,YAAA,EAAc9B,SAAAA;AAAU,OAAC,CAAA,CAAA;MACnFZ,aAAA,CAAcsH,eAAe,CAAA,CAAA;MAC7B9G,aAAA,CAAc8G,eAAe,CAAA,CAAA;AAC7BpH,MAAAA,OAAA,CAAQ6C,WAAWuE,eAAiB,EAAA3G,MAAA,EAAQE,UAAY,EAAA/C,KAAA,CAAMmF,WAAW,CAAC,CAAA,CAAA;MAE1E9B,aAAA,CAAc,IAAI,CAAA,CAAA;MAClBb,uBAAA,CAAwB,IAAI,CAAA,CAAA;MAE5Bc,oBAAA,CAAqBkG,eAAe,CAAA,CAAA;AACf5F,MAAAA,oBAAA,EAAA,CAAA;MACrB5B,QAAA,CAASwH,eAAiB,EAAA;AAAE1E,QAAAA,UAAY,EAAA0E,eAAA,CAAgBhG,IAAI,UAACiG,CAAA,EAAA;AAAA,UAAA,OAAM/F,YAAa,CAAA+F,CAAA,EAAG5G,MAAM,CAAC,CAAA;SAAG,CAAA;AAAAkC,QAAAA,OAAA,EAAS,QAAA;AAAS,OAAC,CAAA,CAAA;AAChH,MAAA,CAAAwE,oBAAA,GAAAvJ,KAAA,CAAM8I,oDAANS,KAAAA,CAAAA,IAAAA,oBAAA,CAAAvF,IAAA,CAAAhE,KAAA,EAAsBgJ,OAAO,CAAA,CAAA;AAC/B,KAAA;AACF,GAAA;AAEA,EAAA,SAASU,YAAaA,CAAAC,OAAA,EAAAC,KAAA,EAA8B;AAAA,IAAA,IAAX5D,OAAA,GAAA4D,KAAA,CAAA5D,OAAA,CAAA;IACnC,IAAAK,YAAA,GAAeL,OAAY,KAAA,OAAA,GAAU,CAAI,GAAA,CAAA,CAAA;AACzC,IAAA,IAAAzF,gBAAA,EAAiC8F,YAAA,GAAAxE,WAAA,CAAA;AAEjC,IAAA,IAAA8B,QAAA,GAAAS,kBAAA,CAAe1C,IAAI,CAAA,CAAA;AACnB,IAAA,IAAA6B,SAAA,GAAAa,kBAAA,CAAgBzC,KAAK,CAAA,CAAA;AACzBgC,IAAAA,QAAA,CAAS0C,YAAgB,CAAA,GAAAsD,OAAA,CAAA;AAEzB,IAAA,IAAM3C,iBAAiB,CAAC,MAAA,EAAQ,WAAW,OAAO,CAAA,CAAEC,SAAS3G,IAAI,CAAA,CAAA;IAEjE,IAAM4G,aAAgB,GAAAC,cAAA,CAAed,YAAc,EAAA1C,QAAA,EAAUJ,WAAWyD,cAAc,CAAA,CAAA;IACtFrD,QAAA,GAAWuD,aAAc,CAAAvD,QAAA,CAAA;IACzBJ,SAAA,GAAY2D,aAAc,CAAA3D,SAAA,CAAA;IAE1BlB,OAAA,CAAQsB,QAAQ,CAAA,CAAA;AACf,IAAA,CAAAqD,cAAA,IAAkB1E,SAASiB,SAAS,CAAA,CAAA;AACvC,GAAA;AAEA,EAAA,SAASsG,aAAcA,CAAAF,OAAA,EAAAG,KAAA,EAA8B;AAAA,IAAA,IAAX9D,OAAA,GAAA8D,KAAA,CAAA9D,OAAA,CAAA;IACpC,IAAAK,YAAA,GAAeL,OAAY,KAAA,OAAA,GAAU,CAAI,GAAA,CAAA,CAAA;AACzC,IAAA,IAAAzF,gBAAA,EAAiC8F,YAAA,GAAAxE,WAAA,CAAA;IACrCS,QAAA,CAAS,UAACyH,YAAiB,EAAA;AACnB,MAAA,IAAAxG,SAAA,GAAAa,kBAAA,CAAgB2F,YAAY,CAAA,CAAA;AAClCxG,MAAAA,SAAA,CAAU8C,YAAgB,CAAA,GAAAsD,OAAA,CAAA;MAEtB,IAAAjI,IAAA,CAAK,CAAO,CAAA,KAAAA,IAAA,CAAK,CAAI,CAAA,EAAA;QACvB,IAAI2E,iBAAiB,CAAG,EAAA;UAElB,IAAA9C,SAAA,CAAU,CAAM,CAAA,IAAAA,SAAA,CAAU,CAAI,CAAA,EAAA;YACtBA,SAAA,CAAA,CAAA,CAAA,GAAKA,UAAU,CAAK,CAAA,GAAA,CAAA,CAAA;AAC1B,YAAA,IAAAA,SAAA,CAAU,OAAO,EAAI,EAAA;AAEvBA,cAAAA,SAAA,CAAU,CAAK,CAAA,GAAA,CAAA,CAAA;cACPlB,OAAA,CAAA,UAAC2H;uBAAgB,CAACA,WAAA,CAAY,IAAIA,WAAY,CAAA,CAAA,CAAA,GAAK,CAAC,CAAC,CAAA;eAAA,CAAA,CAAA;AAC/D,aAAA;AACF,WAAA;AACF,SAAA;QACA,IAAI3D,iBAAiB,CAAG,EAAA;AAEtB9C,UAAAA,SAAA,CAAU,KAAK0G,IAAK,CAAAC,GAAA,CAAI3G,SAAU,CAAA,CAAA,CAAA,EAAIA,UAAU,CAAE,CAAA,CAAA,CAAA;UAC9C,IAAAA,SAAA,CAAU,CAAM,CAAA,IAAAA,SAAA,CAAU,CAAI,CAAA,EAAA;AAChCA,YAAAA,SAAA,CAAU,CAAM,CAAA,IAAA,CAAA,CAAA;AACZ,YAAA,IAAAA,SAAA,CAAU,OAAO,CAAI,CAAA,EAAA;AAEvBA,cAAAA,SAAA,CAAU,CAAK,CAAA,GAAA,EAAA,CAAA;cACPlB,OAAA,CAAA,UAAC2H;uBAAgB,CAACA,WAAA,CAAY,KAAK,CAAG,EAAAA,WAAA,CAAY,EAAE,CAAC,CAAA;eAAA,CAAA,CAAA;AAC/D,aAAA;AACF,WAAA;AACF,SAAA;AACF,OAAA;AACO,MAAA,OAAAzG,SAAA,CAAA;AACT,KAAC,CAAA,CAAA;AACH,GAAA;AAEA,EAAA,IAAM4G,UAAa,GAAA;AACjBC,IAAAA,UAAA,EAAYtI,WAAc,GAAAT,UAAA,GAAa,EAAC;AACxCI,IAAAA,KAAA,EAAO2B,aAAaX,UAAa,GAAAhB,KAAA;AACjCc,IAAAA,oBAAA,EAAAA,oBAAA;AACAzB,IAAAA,iBAAA,EAAAA,iBAAA;AACAY,IAAAA,IAAA,EAAAA,IAAA;AACAC,IAAAA,KAAA,EAAAA,KAAA;AACArB,IAAAA,IAAA,EAAAA,IAAA;AACAuC,IAAAA,MAAA,EAAAA,MAAA;AACAlC,IAAAA,OAAA,EAAAA,OAAA;AACAiB,IAAAA,IAAA,EAAAA,IAAA;AACApB,IAAAA,WAAA,EAAAA,WAAA;AACAE,IAAAA,cAAA,EAAAA,cAAA;AACAE,IAAAA,eAAA,EAAAA,eAAA;AACAL,IAAAA,gBAAA,EAAAA,gBAAA;AACAM,IAAAA,gBAAA,EAAAA,gBAAA;AACAgB,IAAAA,WAAA,EAAAA,WAAA;AACAP,IAAAA,YAAA,EAAAA,YAAA;AACAP,IAAAA,sBAAA,EAAAA,sBAAA;AACAG,IAAAA,WAAA,EAAAA,WAAA;AACA2E,IAAAA,WAAA,EAAAA,WAAA;AACAH,IAAAA,gBAAA,EAAAA,gBAAA;AACAE,IAAAA,gBAAA,EAAAA,gBAAA;AACAO,IAAAA,aAAA,EAAAA,aAAA;AACAuC,IAAAA,cAAA,EAAAA,cAAA;AACAI,IAAAA,aAAA,EAAAA,aAAA;AACAY,IAAAA,YAAA,EAAAA,YAAA;AACAG,IAAAA,aAAA,EAAAA,aAAA;AACAzC,IAAAA,kBAAA,EAAAA,kBAAA;AACAnG,IAAAA,WAAA,EAAAA,WAAAA;GACF,CAAA;AAEA,EAAA,sBACGoJ,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAInK,SAAW,EAAAoK,UAAA,CAAAjB,EAAAA,CAAAA,MAAA,CAAczJ,WAAA,EAAA,oBAAA,CAAA,EAAiCM,SAAS,CAAA;AAAGC,IAAAA,KAAA,EAAAA,KAAA;AAAcV,IAAAA,GAAA,EAAAA,GAAAA;AAAA,GAAA,iBACtF2K,KAAA,CAAAC,aAAA,CAAAE,eAAA,EAAA;AACCnK,IAAAA,QAAA,EAAAA,QAAA;IACAoK,QAAQzK,KAAM,CAAAyK,MAAA;IACdC,MAAM1K,KAAM,CAAA0K,IAAA;AACZrJ,IAAAA,UAAA,EAAAA,UAAA;AACAG,IAAAA,UAAA,EAAAA,UAAA;AACAD,IAAAA,eAAA,EAAAA,eAAA;AACAD,IAAAA,YAAA,EAAAA,YAAA;IACAqJ,sBAAQN,KAAA,CAAAC,aAAA,CAAAM,UAAA,EAAAC,aAAA,CAAeV,EAAAA,EAAAA,UAAA,CAAY,CAAA;AAAA,GACrC,CACF,CAAA,CAAA;AAEJ,CAAC,EAAA;AAED5K,eAAA,CAAgBuL,WAAc,GAAA,iBAAA;;;;"}