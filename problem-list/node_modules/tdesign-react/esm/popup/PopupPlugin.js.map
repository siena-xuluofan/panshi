{"version":3,"file":"PopupPlugin.js","sources":["../../../components/popup/PopupPlugin.tsx"],"sourcesContent":["import { createPopper, Instance, Placement, type Options } from '@popperjs/core';\nimport classNames from 'classnames';\nimport { isString } from 'lodash-es';\nimport React, { useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport { getAttach } from '../_util/dom';\nimport { off, on } from '../_util/listener';\nimport { render, unmount } from '../_util/react-render';\nimport type { TNode } from '../common';\nimport PluginContainer from '../common/PluginContainer';\nimport ConfigProvider from '../config-provider';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport { popupDefaultProps } from './defaultProps';\nimport type { TdPopupProps } from './type';\n\nexport interface PopupPluginApi {\n  config: TdPopupProps;\n}\n\ntype TriggerEl = string | HTMLElement;\n\nexport interface OverlayProps extends TdPopupProps {\n  triggerEl: TriggerEl;\n  renderCallback: (instance: HTMLElement) => void;\n}\n\nconst triggers = ['click', 'hover', 'focus', 'context-menu'] as const;\n\nlet popperInstance: Instance;\nlet overlayInstance: HTMLElement;\nlet timeout: NodeJS.Timeout;\nlet triggerEl: HTMLElement;\n\nconst componentName = 't-popup';\n\nconst triggerType = (triggerProps: string) =>\n  triggers.reduce(\n    (map, trigger) => ({\n      ...map,\n      [trigger]: triggerProps.includes(trigger),\n    }),\n    {} as Record<(typeof triggers)[number], boolean>,\n  );\n\nfunction getPopperPlacement(placement: TdPopupProps['placement']) {\n  return placement.replace(/-(left|top)$/, '-start').replace(/-(right|bottom)$/, '-end') as Placement;\n}\n\nconst Overlay: React.FC<OverlayProps> = (originalProps) => {\n  const props = useDefaultProps(originalProps, popupDefaultProps);\n  const {\n    trigger,\n    content,\n    showArrow,\n    disabled,\n    overlayInnerClassName,\n    hideEmptyPopup,\n    overlayClassName,\n    overlayStyle,\n    zIndex,\n    overlayInnerStyle,\n    renderCallback,\n  } = props;\n\n  const [visibleState, setVisibleState] = useState(false);\n  const popperRef = useRef<HTMLDivElement>(null);\n  const overlayRef = useRef<HTMLDivElement>(null);\n\n  const hidePopup = hideEmptyPopup && isString(content) && ['', undefined, null].includes(content);\n\n  const stylePopper = (): React.CSSProperties => {\n    let style = {};\n    if (hidePopup) {\n      style = { visibility: 'hidden', pointerEvents: 'none' };\n    }\n    return {\n      ...style,\n      zIndex,\n      ...overlayStyle,\n    };\n  };\n\n  // useMemo\n  const hasTrigger = useMemo(() => triggerType(trigger), [trigger]);\n  const overlayClasses = useMemo(\n    () => [\n      `${componentName}__content`,\n      {\n        [`${componentName}__content--text`]: content === 'string',\n        [`${componentName}__content--arrow`]: showArrow,\n        [`${componentName}-is-disabled`]: disabled,\n      },\n      overlayInnerClassName,\n    ],\n    [content, overlayInnerClassName, showArrow, disabled],\n  );\n\n  // method\n  const handleMouseLeave = () => {\n    setVisibleState(false);\n    removeOverlayInstance();\n    popperInstance?.destroy();\n    popperInstance = null;\n  };\n  const handleMouseEnter = () => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n  };\n\n  const overlayInnerStyleMerge = () => {\n    if (!overlayInnerStyle || !triggerEl || !popperRef.current) {\n      return {};\n    }\n    if (typeof overlayInnerStyle === 'object') {\n      return overlayInnerStyle;\n    }\n    return overlayInnerStyle(triggerEl, popperRef.current);\n  };\n\n  // mounted\n  useLayoutEffect(() => {\n    setVisibleState(true);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const eventProps = hasTrigger.hover && {\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave,\n    onMouseMove: handleMouseEnter,\n  };\n\n  const hasArrowModifier = (props.popperOptions as Options)?.modifiers?.some((modifier) => modifier.name === 'arrow');\n\n  // render node\n  const renderNode = (\n    <div\n      ref={(ref) => {\n        popperRef.current = ref;\n        renderCallback(ref);\n      }}\n      className={classNames([componentName, overlayClassName])}\n      style={stylePopper()}\n      {...eventProps}\n    >\n      <div ref={overlayRef} className={classNames(overlayClasses)} style={overlayInnerStyleMerge()}>\n        {content}\n        {showArrow && (\n          <div className={`${componentName}__arrow`} {...(hasArrowModifier && { 'data-popper-arrow': '' })} />\n        )}\n      </div>\n    </div>\n  );\n\n  return visibleState ? (\n    <CSSTransition appear timeout={0} in={visibleState} nodeRef={popperRef}>\n      {renderNode}\n    </CSSTransition>\n  ) : null;\n};\n\nfunction removeOverlayInstance() {\n  if (overlayInstance) {\n    unmount(overlayInstance);\n    overlayInstance.remove();\n    overlayInstance = null;\n  }\n  if (popperInstance) {\n    popperInstance.destroy();\n    popperInstance = null;\n  }\n}\n\nexport type PluginMethod = (triggerEl: TriggerEl, content: TNode, popupProps?: TdPopupProps) => Promise<Instance>;\n\nconst renderInstance = (props, attach: HTMLElement): Promise<HTMLElement> =>\n  new Promise((resolve) => {\n    const pGlobalConfig = ConfigProvider.getGlobalConfig();\n    render(\n      <PluginContainer globalConfig={pGlobalConfig}>\n        <Overlay {...props} renderCallback={(instance) => resolve(instance)} />\n      </PluginContainer>,\n      attach,\n    );\n  });\n\nconst createPopupInstance: PluginMethod = async (trigger, content, popupProps) => {\n  const hasTrigger = triggerType(popupProps?.trigger || 'hover');\n  const currentTriggerEl = getAttach(trigger);\n  if (triggerEl && hasTrigger.click) {\n    return;\n  }\n  triggerEl = currentTriggerEl;\n  removeOverlayInstance();\n\n  let attach = getAttach(popupProps?.attach || 'body');\n\n  const delay = [].concat(popupProps?.delay ?? [250, 150]);\n  const closeDelay = delay[1] ?? delay[0];\n\n  if (attach === document.body) {\n    // don't allow mount on body directly\n    const popupDom = document.createElement('div');\n    document.body.appendChild(popupDom);\n    attach = popupDom;\n\n    overlayInstance = attach;\n  }\n\n  const instance = await renderInstance({ ...{ ...popupProps, content, triggerEl } }, attach);\n\n  if (hasTrigger.hover) {\n    const mouseoutEvent = () => {\n      timeout = setTimeout(removeOverlayInstance, closeDelay);\n      off(triggerEl, 'mouseleave', mouseoutEvent);\n    };\n    on(triggerEl, 'mouseleave', mouseoutEvent);\n  } else if (hasTrigger.focus) {\n    const focusoutEvent = () => {\n      timeout = setTimeout(removeOverlayInstance, closeDelay);\n      off(triggerEl, 'focusout', focusoutEvent);\n    };\n    on(triggerEl, 'focusout', focusoutEvent);\n  }\n\n  popperInstance = createPopper(triggerEl, instance, {\n    placement: getPopperPlacement(popupProps?.placement || ('top' as TdPopupProps['placement'])),\n    ...popupProps?.popperOptions,\n  });\n  return popperInstance;\n};\n\nconst PopupPlugin: PluginMethod = (trigger, content, popupProps) => createPopupInstance(trigger, content, popupProps);\n\nexport default PopupPlugin;\n"],"names":["triggers","popperInstance","overlayInstance","timeout","triggerEl","componentName","triggerType","triggerProps","reduce","map","trigger","_objectSpread","_defineProperty","includes","getPopperPlacement","placement","replace","Overlay","originalProps","_props$popperOptions","props","useDefaultProps","popupDefaultProps","content","showArrow","disabled","overlayInnerClassName","hideEmptyPopup","overlayClassName","overlayStyle","zIndex","overlayInnerStyle","renderCallback","_useState","useState","_useState2","_slicedToArray","visibleState","setVisibleState","popperRef","useRef","overlayRef","hidePopup","isString","stylePopper","style","visibility","pointerEvents","hasTrigger","useMemo","overlayClasses","concat","handleMouseLeave","_popperInstance","removeOverlayInstance","destroy","handleMouseEnter","clearTimeout","overlayInnerStyleMerge","current","_typeof","useLayoutEffect","eventProps","hover","onMouseEnter","onMouseLeave","onMouseMove","hasArrowModifier","popperOptions","modifiers","some","modifier","name","renderNode","React","createElement","ref","className","classNames","CSSTransition","appear","nodeRef","unmount","remove","renderInstance","attach","Promise","resolve","pGlobalConfig","ConfigProvider","getGlobalConfig","render","PluginContainer","globalConfig","instance","createPopupInstance","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","popupProps","_popupProps$delay","_delay$","currentTriggerEl","delay","closeDelay","popupDom","_mouseoutEvent","_focusoutEvent","wrap","_context","prev","next","getAttach","click","abrupt","document","body","appendChild","sent","mouseoutEvent","setTimeout","off","on","focus","focusoutEvent","createPopper","stop","_x","_x2","_x3","apply","arguments","PopupPlugin"],"mappings":"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"}