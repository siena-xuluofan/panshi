{"version":3,"file":"dep-bc453549.js","sources":["../../../components/select/util/helper.ts","../../../components/select/base/Option.tsx","../../../components/select/hooks/useOptions.ts"],"sourcesContent":["import { ReactElement } from 'react';\nimport { get, isPlainObject } from 'lodash-es';\nimport Option from '../base/Option';\nimport OptionGroup from '../base/OptionGroup';\nimport { isSelectOptionGroup } from '../hooks/useOptions';\n\nimport type { SelectKeysType, SelectOption, SelectValue, TdOptionProps, TdSelectProps } from '../type';\n\ntype SelectLabeledValue = Required<Omit<TdOptionProps, 'disabled'>>;\n\nexport type ValueToOption = {\n  [value: string | number]: TdOptionProps;\n};\n\nexport const getKeyMapping = (keys: SelectKeysType) => {\n  const valueKey = keys?.value || 'value';\n  const labelKey = keys?.label || 'label';\n  const disabledKey = keys?.disabled || 'disabled';\n  return { valueKey, labelKey, disabledKey };\n};\n\nexport const setValueToOptionFormOptionDom = (\n  dom: ReactElement,\n  valueToOption: ValueToOption,\n  keys: SelectKeysType,\n) => {\n  const { valueKey, labelKey } = getKeyMapping(keys);\n  const { value, label, children } = dom.props;\n  // eslint-disable-next-line no-param-reassign\n  valueToOption[value] = {\n    ...dom.props,\n    [valueKey]: value,\n    [labelKey]: label || children || value,\n  };\n};\n\n// 获取 value => option，用于快速基于 value 找到对应的 option\nexport const getValueToOption = (\n  children: ReactElement,\n  options: SelectOption[],\n  keys: SelectKeysType,\n): ValueToOption => {\n  const { valueKey, labelKey } = getKeyMapping(keys);\n  const valueToOption = {};\n\n  // options 优先级高于 children\n  if (Array.isArray(options)) {\n    options.forEach((option) => {\n      if (isSelectOptionGroup(option)) {\n        option.children?.forEach((child) => {\n          valueToOption[get(child, valueKey)] = {\n            ...child,\n            value: get(child, valueKey),\n            label: get(child, labelKey),\n          };\n        });\n      } else {\n        valueToOption[get(option, valueKey)] = {\n          ...option,\n          value: get(option, valueKey),\n          label: get(option, labelKey),\n        };\n      }\n    });\n    return valueToOption;\n  }\n\n  if (isPlainObject(children)) {\n    if (children.type === Option) {\n      setValueToOptionFormOptionDom(children, valueToOption, keys);\n      return valueToOption;\n    }\n\n    if (children.type === OptionGroup) {\n      const groupChildren = children.props.children;\n\n      if (Array.isArray(groupChildren)) {\n        groupChildren.forEach((item) => {\n          setValueToOptionFormOptionDom(item, valueToOption, keys);\n        });\n        return valueToOption;\n      }\n    }\n  }\n\n  /**\n   * children如果存在ReactElement和map函数混写的情况，会出现嵌套数组\n   */\n  if (Array.isArray(children)) {\n    const handlerElement = (item: ReactElement) => {\n      if (item.type === Option) {\n        setValueToOptionFormOptionDom(item, valueToOption, keys);\n      }\n\n      if (item.type === OptionGroup) {\n        const groupChildren = (item.props as SelectOption).children;\n        if (Array.isArray(groupChildren)) {\n          groupChildren.forEach((groupItem) => {\n            setValueToOptionFormOptionDom(groupItem, valueToOption, keys);\n          });\n        }\n      }\n\n      if (Array.isArray(item)) {\n        item.forEach((child) => {\n          handlerElement(child);\n        });\n      }\n    };\n    children.forEach((item: ReactElement) => handlerElement(item));\n  }\n\n  return valueToOption;\n};\n\n// 获取单选的 label\nexport const getLabel = (\n  children: ReactElement,\n  value: SelectValue<TdOptionProps>,\n  options: TdOptionProps[],\n  keys: SelectKeysType,\n) => {\n  const { valueKey } = getKeyMapping(keys);\n\n  let selectedLabel = '';\n  // 处理带 options 属性的情况\n  if (Array.isArray(options)) {\n    options.some((option) => {\n      if ([get(value, valueKey), value].includes(option.value)) {\n        selectedLabel = option.label;\n        return true;\n      }\n      return false;\n    });\n\n    return selectedLabel;\n  }\n\n  if (isPlainObject(children)) {\n    selectedLabel = children.props.label;\n\n    if (children.type === OptionGroup) {\n      const groupChildren = children.props.children;\n\n      if (Array.isArray(groupChildren)) {\n        groupChildren.some((item) => {\n          const selectedValue = isPlainObject(value) ? get(value, 'value') : value;\n          if (isPlainObject(item.props) && item.props.value === selectedValue) {\n            selectedLabel = item.props.label || item.props.children;\n            return true;\n          }\n          return false;\n        });\n      }\n    }\n  }\n\n  if (Array.isArray(children)) {\n    children.some((item: ReactElement) => {\n      // 处理分组\n      if (item.type === OptionGroup) {\n        const groupChildren = item.props.children;\n        if (Array.isArray(groupChildren)) {\n          const isSelected = groupChildren.some((item) => {\n            const selectedValue = isPlainObject(value) ? get(value, 'value') : value;\n            if (isPlainObject(item.props) && item.props.value === selectedValue) {\n              selectedLabel = item.props.label || item.props.children;\n              return true;\n            }\n            return false;\n          });\n          return isSelected;\n        }\n      }\n      const selectedValue = isPlainObject(value) ? get(value, 'value') : value;\n      if (isPlainObject(item.props) && item.props.value === selectedValue) {\n        selectedLabel = item.props.label || item.props.children;\n        return true;\n      }\n      return false;\n    });\n  }\n\n  return selectedLabel;\n};\n\nexport const getMultipleTags = (values: SelectValue[], keys: SelectKeysType) => {\n  const { labelKey, valueKey } = getKeyMapping(keys);\n  const tags = values.map((item) => ({\n    label: get(item, labelKey) || item.toString(),\n    value: get(item, valueKey) || item,\n  }));\n  return tags;\n};\n\nexport const getSelectValueArr = (\n  values: SelectValue | SelectValue[],\n  activeValue: SelectValue,\n  selected?: boolean,\n  valueType?: TdSelectProps['valueType'],\n  keys?: SelectKeysType,\n  objVal?: SelectValue,\n) => {\n  const { valueKey } = getKeyMapping(keys);\n  // eslint-disable-next-line no-param-reassign\n  values = Array.isArray(values) ? values : [];\n\n  if (Array.isArray(values)) {\n    let currentValues = [...values];\n    const isValueObj = valueType === 'object';\n    if (selected) {\n      currentValues = currentValues.filter((item: SelectLabeledValue) => {\n        if (isValueObj) {\n          if (isPlainObject(activeValue)) {\n            return get(item, valueKey) !== get(activeValue, valueKey);\n          }\n          return get(item, valueKey) !== activeValue;\n        }\n        return item !== activeValue;\n      });\n    } else {\n      const item = isValueObj ? objVal : activeValue;\n\n      currentValues.push(item as SelectValue);\n    }\n    return currentValues;\n  }\n};\n\n/**\n * 计算 `onChange` 事件回调的 `selectedOptions` 参数\n * @param value 所有已选中的值\n * @param selectedValue 当前选择/取消选择的特定选项\n */\nexport const getSelectedOptions = (\n  value: SelectValue,\n  multiple: TdSelectProps['multiple'],\n  valueType: TdSelectProps['valueType'],\n  keys: SelectKeysType,\n  valueToOption: ValueToOption,\n  selectedValue?: SelectValue,\n) => {\n  const { valueKey } = getKeyMapping(keys);\n  const isObjectType = valueType === 'object';\n\n  // 所有可选项\n  const tmpPropOptions = Object.values(valueToOption);\n\n  // 当前所有选中的选项\n  let currentSelectedOptions = [];\n  // 当前选中的选项\n  let currentOption: SelectOption;\n  // 全选值\n  let allSelectedValue: Array<SelectValue>;\n\n  if (multiple) {\n    currentSelectedOptions = isObjectType\n      ? (value as Array<SelectValue>)\n      : tmpPropOptions?.filter?.((v) => (value as Array<string | number>).includes?.(v[valueKey]));\n\n    allSelectedValue = isObjectType ? currentSelectedOptions : currentSelectedOptions?.map((v) => v[valueKey]);\n\n    currentOption = isObjectType\n      ? (value as Array<SelectValue>).find((v) => v[valueKey] === selectedValue)\n      : currentSelectedOptions?.find((option) => option[valueKey] === selectedValue);\n  } else {\n    currentSelectedOptions = isObjectType ? [value] : tmpPropOptions?.filter?.((v) => value === v[valueKey]) || [];\n    allSelectedValue = currentSelectedOptions;\n    currentOption = isObjectType ? value : currentSelectedOptions?.find((option) => option[valueKey] === selectedValue);\n  }\n\n  return { currentSelectedOptions, currentOption, allSelectedValue };\n};\n","import React, { useEffect, useMemo, useState } from 'react';\nimport classNames from 'classnames';\nimport { get, isNumber, isString } from 'lodash-es';\n\nimport useConfig from '../../hooks/useConfig';\nimport useDomRefCallback from '../../hooks/useDomRefCallback';\nimport useRipple from '../../hooks/useRipple';\nimport { getKeyMapping } from '../util/helper';\n\nimport type { StyledProps } from '../../common';\nimport type { SelectKeysType, SelectOption, SelectValue, TdOptionProps, TdSelectProps } from '../type';\n\n/**\n * Option 组件属性\n */\nexport interface SelectOptionProps\n  extends StyledProps,\n    TdOptionProps,\n    Pick<TdSelectProps, 'size' | 'multiple' | 'max'> {\n  selectedValue?: SelectValue;\n  children?: React.ReactNode;\n  onSelect?: (\n    value: string | number,\n    context: {\n      label?: string;\n      selected?: boolean;\n      event: React.MouseEvent<HTMLLIElement>;\n      restData?: Record<string, any>;\n    },\n  ) => void;\n  onCheckAllChange?: (checkAll: boolean, e: React.MouseEvent<HTMLLIElement>) => void;\n  restData?: Record<string, any>;\n  keys?: SelectKeysType;\n  optionLength?: number;\n  isVirtual?: boolean;\n  onRowMounted?: (rowData: { ref: HTMLElement; data: SelectOption }) => void;\n}\n\nconst componentType = 'select';\n\nconst Option: React.FC<SelectOptionProps> = (props) => {\n  const {\n    disabled: propDisabled,\n    label: propLabel,\n    title: propTitle,\n    selectedValue,\n    checkAll,\n    multiple,\n    size,\n    max,\n    keys,\n    value,\n    onSelect,\n    children,\n    content,\n    restData,\n    style,\n    className,\n    isVirtual,\n  } = props;\n\n  const label = propLabel || value;\n  const disabled = propDisabled || (multiple && Array.isArray(selectedValue) && max && selectedValue.length >= max);\n  const initCheckedStatus = !(Array.isArray(selectedValue) && selectedValue.length === props.optionLength);\n\n  let selected: boolean;\n  let indeterminate: boolean;\n  // 处理存在禁用项时，全选状态无法来回切换的问题\n  const [allSelectableChecked, setAllSelectableChecked] = useState(initCheckedStatus);\n\n  const titleContent = useMemo(() => {\n    // 外部设置 props，说明希望受控\n    const controlledTitle = Reflect.has(props, 'title');\n    if (controlledTitle) return propTitle;\n    if (typeof label === 'string') return label;\n    return null;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propTitle, label]);\n\n  const { classPrefix } = useConfig();\n\n  // 使用斜八角动画\n  const [optionRef, setRefCurrent] = useDomRefCallback();\n  useRipple(optionRef);\n\n  useEffect(() => {\n    if (isVirtual && optionRef) {\n      props.onRowMounted?.({\n        ref: optionRef,\n        data: props,\n      });\n    }\n    // eslint-disable-next-line\n  }, [isVirtual, optionRef]);\n\n  const { valueKey } = getKeyMapping(keys);\n  // 处理单选场景\n  if (!multiple) {\n    selected =\n      isNumber(selectedValue) || isString(selectedValue)\n        ? value === selectedValue\n        : value === get(selectedValue, valueKey);\n  }\n\n  // 处理多选场景\n  if (multiple && Array.isArray(selectedValue)) {\n    selected = selectedValue.some((item) => {\n      if (isNumber(item) || isString(item)) {\n        // 如果非 object 类型\n        return item === value;\n      }\n      return get(item, valueKey) === value;\n    });\n    if (props.checkAll) {\n      selected = selectedValue.length === props.optionLength;\n      indeterminate = selectedValue.length > 0 && !selected;\n    }\n  }\n\n  const handleSelect = (event: React.MouseEvent<HTMLLIElement>) => {\n    if (!disabled && !checkAll) {\n      onSelect(value, { label: String(label), selected, event, restData });\n    }\n    if (checkAll) {\n      props.onCheckAllChange?.(allSelectableChecked, event);\n      setAllSelectableChecked(!allSelectableChecked);\n    }\n  };\n\n  const renderItem = () => {\n    const displayContent = children || content || label;\n    if (multiple) {\n      return (\n        <label\n          className={classNames(`${classPrefix}-checkbox`, {\n            [`${classPrefix}-is-indeterminate`]: indeterminate,\n            [`${classPrefix}-is-disabled`]: disabled,\n            [`${classPrefix}-is-checked`]: selected,\n          })}\n          title={titleContent}\n        >\n          <input\n            type=\"checkbox\"\n            className={classNames(`${classPrefix}-checkbox__former`)}\n            value=\"\"\n            disabled={disabled && !selected}\n            onClick={(e) => {\n              e.stopPropagation();\n              e.nativeEvent.stopImmediatePropagation();\n            }}\n          />\n          <span className={classNames(`${classPrefix}-checkbox__input`)}></span>\n          <span className={classNames(`${classPrefix}-checkbox__label`)}>{displayContent}</span>\n        </label>\n      );\n    }\n    return <span title={titleContent}>{displayContent}</span>;\n  };\n\n  return (\n    <li\n      className={classNames(className, `${classPrefix}-${componentType}-option`, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-selected`]: selected,\n        [`${classPrefix}-size-s`]: size === 'small',\n        [`${classPrefix}-size-l`]: size === 'large',\n      })}\n      key={value}\n      onClick={handleSelect}\n      ref={setRefCurrent}\n      style={style}\n    >\n      {renderItem()}\n    </li>\n  );\n};\n\nexport default Option;\n","import { get } from 'lodash-es';\nimport React, { ReactElement, ReactNode, useEffect, useState } from 'react';\nimport Option from '../base/Option';\nimport OptionGroup from '../base/OptionGroup';\nimport { getKeyMapping, getValueToOption, type ValueToOption } from '../util/helper';\n\nimport type { SelectKeysType, SelectOption, SelectOptionGroup, SelectValue, TdOptionProps } from '../type';\n\nexport function isSelectOptionGroup(option: SelectOption): option is SelectOptionGroup {\n  return !!option && 'group' in option && 'children' in option;\n}\n\ntype OptionValueType = SelectValue<SelectOption>;\n\n// 处理 options 的逻辑\nfunction useOptions(\n  keys: SelectKeysType,\n  options: SelectOption[],\n  children: ReactNode,\n  valueType: 'object' | 'value',\n  value: OptionValueType,\n  reserveKeyword: boolean,\n) {\n  const [valueToOption, setValueToOption] = useState<ValueToOption>({});\n  const [currentOptions, setCurrentOptions] = useState<SelectOption[]>([]);\n  const [tmpPropOptions, setTmpPropOptions] = useState<SelectOption[]>([]);\n  const [selectedOptions, setSelectedOptions] = useState<SelectOption[]>([]);\n\n  // 处理设置 option 的逻辑\n  useEffect(() => {\n    let transformedOptions = options;\n\n    const arrayChildren = React.Children.toArray(children);\n    const optionChildren = arrayChildren.filter((v: ReactElement) => v.type === Option || v.type === OptionGroup);\n    const isChildrenFilterable = arrayChildren.length > 0 && optionChildren.length === arrayChildren.length;\n    if (reserveKeyword && currentOptions.length && isChildrenFilterable) return;\n\n    if (isChildrenFilterable) {\n      const handlerOptionElement = (v) => {\n        if (React.isValidElement<SelectOption>(v)) {\n          if (v.type === OptionGroup) {\n            return {\n              ...v.props,\n              group: v.props.label,\n              children: v.props.children?.map((v) => handlerOptionElement(v)),\n            };\n          }\n          return {\n            ...v.props,\n            label: v.props.label || v.props.children,\n          };\n        }\n        return { label: v };\n      };\n      transformedOptions = arrayChildren?.map<SelectOption>((v) => handlerOptionElement(v));\n    }\n    if (keys) {\n      const { valueKey, labelKey } = getKeyMapping(keys);\n      // 如果有定制 keys 先做转换\n      transformedOptions = transformedOptions?.map<SelectOption>((option) => ({\n        ...option,\n        value: get(option, valueKey),\n        label: get(option, labelKey),\n      }));\n    }\n    setCurrentOptions(transformedOptions);\n    setTmpPropOptions(transformedOptions);\n\n    setValueToOption(getValueToOption(children as ReactElement, options as TdOptionProps[], keys) || {});\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [options, keys, children, reserveKeyword]);\n\n  // 同步 value 对应的 options\n  useEffect(() => {\n    const { valueKey, labelKey } = getKeyMapping(keys);\n\n    setSelectedOptions((oldSelectedOptions: SelectOption[]) => {\n      const createOptionFromValue = (item: OptionValueType) => {\n        if (valueType === 'value') {\n          return (\n            valueToOption[item as string | number] ||\n            oldSelectedOptions.find((option) => get(option, valueKey) === item) || {\n              [valueKey]: item,\n              [labelKey]: item,\n            }\n          );\n        }\n        if (typeof item === 'object' && item !== null) {\n          return item;\n        }\n        return [];\n      };\n\n      // 多选\n      if (Array.isArray(value)) {\n        return value.map(createOptionFromValue);\n      }\n\n      // 单选\n      if (value !== undefined && value !== null) {\n        const option = createOptionFromValue(value);\n        return option ? [option] : [];\n      }\n\n      return [];\n    });\n  }, [value, keys, valueType, valueToOption, setSelectedOptions]);\n\n  return {\n    currentOptions,\n    setCurrentOptions,\n    tmpPropOptions,\n    setTmpPropOptions,\n    valueToOption,\n    setValueToOption,\n    selectedOptions,\n    setSelectedOptions,\n  };\n}\n\nexport default useOptions;\n"],"names":["getKeyMapping","keys","valueKey","value","labelKey","label","disabledKey","disabled","setValueToOptionFormOptionDom","dom","valueToOption","_getKeyMapping","_dom$props","props","children","_objectSpread","_defineProperty","getValueToOption","options","_getKeyMapping2","Array","isArray","forEach","option","isSelectOptionGroup","_option$children","child","get","isPlainObject","type","Option","OptionGroup","groupChildren","item","handlerElement","groupItem","getLabel","_getKeyMapping3","selectedLabel","some","includes","selectedValue","isSelected","getMultipleTags","values","_getKeyMapping4","tags","map","toString","getSelectValueArr","activeValue","selected","valueType","objVal","_getKeyMapping5","currentValues","_toConsumableArray","isValueObj","filter","push","getSelectedOptions","multiple","_getKeyMapping6","isObjectType","tmpPropOptions","Object","currentSelectedOptions","currentOption","allSelectedValue","_tmpPropOptions$filte","_currentSelectedOptio","_currentSelectedOptio2","call","v","_value$includes","find","_tmpPropOptions$filte2","_currentSelectedOptio3","componentType","propDisabled","propLabel","propTitle","title","checkAll","size","max","onSelect","content","restData","style","className","isVirtual","length","initCheckedStatus","optionLength","indeterminate","_useState","useState","_useState2","_slicedToArray","allSelectableChecked","setAllSelectableChecked","titleContent","useMemo","controlledTitle","Reflect","has","_useConfig","useConfig","classPrefix","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","optionRef","setRefCurrent","useRipple","useEffect","_props$onRowMounted","onRowMounted","ref","data","isNumber","isString","handleSelect","event","String","_props$onCheckAllChan","onCheckAllChange","renderItem","displayContent","React","createElement","classNames","concat","onClick","e","stopPropagation","nativeEvent","stopImmediatePropagation","key","useOptions","reserveKeyword","setValueToOption","_useState3","_useState4","currentOptions","setCurrentOptions","_useState5","_useState6","setTmpPropOptions","_useState7","_useState8","selectedOptions","setSelectedOptions","transformedOptions","arrayChildren","Children","toArray","optionChildren","isChildrenFilterable","handlerOptionElement","isValidElement","_v$props$children","group","_transformedOptions","oldSelectedOptions","createOptionFromValue","_typeof"],"mappings":"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"}