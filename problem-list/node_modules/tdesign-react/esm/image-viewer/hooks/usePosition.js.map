{"version":3,"file":"usePosition.js","sources":["../../../../components/image-viewer/hooks/usePosition.ts"],"sourcesContent":["import { useRef, useState } from 'react';\nimport useMouseEvent from '../../hooks/useMouseEvent';\n\nexport type PositionType = [number, number];\n\ninterface PositionOptions {\n  initPosition?: PositionType;\n}\n\nconst usePosition = (imgRef: React.RefObject<HTMLDivElement>, options?: PositionOptions) => {\n  const { initPosition = [0, 0] } = options || {};\n\n  const [position, setPosition] = useState<PositionType>(initPosition);\n  const lastScreenPositionRef = useRef<{ x: number; y: number } | null>(null);\n\n  useMouseEvent(imgRef, {\n    onDown: (e) => {\n      const { screenX, screenY } = e;\n      lastScreenPositionRef.current = { x: screenX, y: screenY };\n    },\n    onMove: (e) => {\n      if (!lastScreenPositionRef.current) return;\n\n      const { screenX, screenY } = e;\n      const { x: lastX, y: lastY } = lastScreenPositionRef.current;\n\n      setPosition(([x, y]) => [x + screenX - lastX, y + screenY - lastY]);\n\n      lastScreenPositionRef.current = { x: screenX, y: screenY };\n    },\n    onUp: () => {\n      lastScreenPositionRef.current = null;\n    },\n  });\n\n  return {\n    position,\n  };\n};\n\nexport default usePosition;\n"],"names":["usePosition","imgRef","options","_ref","_ref$initPosition","initPosition","_useState","useState","_useState2","_slicedToArray","position","setPosition","lastScreenPositionRef","useRef","useMouseEvent","onDown","e","screenX","screenY","current","x","y","onMove","_lastScreenPositionRe","lastX","lastY","_ref2","_ref3","onUp"],"mappings":";;;;;;;;;;;AASMA,IAAAA,WAAA,GAAc,SAAdA,WAAAA,CAAeC,MAAA,EAAyCC,OAA8B,EAAA;AACpF,EAAA,IAAAC,IAAA,GAA4BD,WAAW,EAAC;IAAAE,iBAAA,GAAAD,IAAA,CAAtCE;IAAAA,qCAAe,KAAA,CAAA,GAAA,CAAC,CAAA,EAAG,CAAC,CAAE,GAAAD,iBAAA,CAAA;AAE9B,EAAA,IAAAE,SAAA,GAAgCC,SAAuBF,YAAY,CAAA;IAAAG,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAA5DI,IAAAA,QAAA,GAAAF,UAAA,CAAA,CAAA,CAAA;AAAUG,IAAAA,WAAW,GAAAH,UAAA,CAAA,CAAA,CAAA,CAAA;AACtB,EAAA,IAAAI,qBAAA,GAAwBC,OAAwC,IAAI,CAAA,CAAA;EAE1EC,aAAA,CAAcb,MAAQ,EAAA;AACpBc,IAAAA,MAAA,EAAQ,SAARA,MAAAA,CAASC,CAAM,EAAA;AACP,MAAA,IAAEC,OAAS,GAAYD,CAAA,CAArBC,OAAS;QAAAC,OAAA,GAAYF,CAAA,CAAZE,OAAA,CAAA;MACjBN,qBAAA,CAAsBO,OAAU,GAAA;AAAEC,QAAAA,CAAG,EAAAH,OAAA;AAASI,QAAAA,GAAGH,OAAAA;OAAQ,CAAA;KAC3D;AACAI,IAAAA,MAAA,EAAQ,SAARA,MAAAA,CAASN,CAAM,EAAA;AACb,MAAA,IAAI,CAACJ,qBAAsB,CAAAO,OAAA,EAAS,OAAA;AAE9B,MAAA,IAAEF,OAAS,GAAYD,CAAA,CAArBC,OAAS;QAAAC,OAAA,GAAYF,CAAA,CAAZE,OAAA,CAAA;AACjB,MAAA,IAAAK,qBAAA,GAA+BX,qBAAsB,CAAAO,OAAA;QAA1CK,KAAA,GAAAD,qBAAA,CAAHH,CAAG;QAAUK,KAAA,GAAAF,qBAAA,CAAHF,CAAG,CAAA;MAErBV,WAAA,CAAY,UAAAe,KAAA,EAAA;AAAA,QAAA,IAAAC,KAAA,GAAAlB,cAAA,CAAAiB,KAAA,EAAA,CAAA,CAAA;AAAEN,UAAAA,CAAG,GAAAO,KAAA,CAAA,CAAA,CAAA;AAAAN,UAAAA,CAAC,GAAAM,KAAA,CAAA,CAAA,CAAA,CAAA;AAAA,QAAA,OAAM,CAACP,CAAI,GAAAH,OAAA,GAAUO,KAAO,EAAAH,CAAA,GAAIH,OAAU,GAAAO,KAAK,CAAC,CAAA;OAAA,CAAA,CAAA;MAElEb,qBAAA,CAAsBO,OAAU,GAAA;AAAEC,QAAAA,CAAG,EAAAH,OAAA;AAASI,QAAAA,GAAGH,OAAAA;OAAQ,CAAA;KAC3D;AACAU,IAAAA,MAAM,SAANA,OAAY;MACVhB,qBAAA,CAAsBO,OAAU,GAAA,IAAA,CAAA;AAClC,KAAA;AACF,GAAC,CAAA,CAAA;EAEM,OAAA;AACLT,IAAAA,QAAA,EAAAA,QAAAA;GACF,CAAA;AACF;;;;"}