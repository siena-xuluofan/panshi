{"version":3,"file":"SubMenu.js","sources":["../../../components/menu/SubMenu.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { FC, ReactElement, useContext, useMemo, useRef } from 'react';\nimport { CSSTransition } from 'react-transition-group';\n\nimport parseTNode from '../_util/parseTNode';\nimport FakeArrow from '../common/FakeArrow';\nimport useConfig from '../hooks/useConfig';\nimport useControlled from '../hooks/useControlled';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useRipple from '../hooks/useRipple';\nimport { Popup, type PopupPlacement } from '../popup';\nimport { calculatePaddingLeft } from './_util/calculatePaddingLeft';\nimport { checkIsMenuGroup, checkIsSubMenu } from './_util/checkMenuType';\nimport checkSubMenuChildrenActive from './_util/checkSubMenuChildrenActive';\nimport { getSubMenuMaxHeight } from './_util/getSubMenuChildStyle';\nimport { MenuContext } from './MenuContext';\n\nimport type { StyledProps } from '../common';\nimport type { TdSubmenuProps } from './type';\n\nexport interface SubMenuProps extends TdSubmenuProps, StyledProps {}\n\nexport interface SubMenuWithCustomizeProps extends SubMenuProps {\n  level?: number;\n}\n\nconst SubAccordion: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { content, children = content, disabled, icon, title, value, className, style, level = 1, popupProps } = props;\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const [open, setOpen] = useControlled(popupProps, 'visible', restPopupProps.onVisibleChange);\n\n  const { classPrefix } = useConfig();\n\n  const { expanded = [], onExpand, active, expandType, theme = 'light' } = useContext(MenuContext);\n\n  const isPopUp = expandType === 'popup';\n  // 非 popup 展开\n  const isExpand = expanded.includes(value) && !disabled && !isPopUp;\n\n  const handleClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    e.stopPropagation();\n    onExpand(value, expanded);\n    setOpen(false, {});\n  };\n\n  const handleVisibleChange = (visible: boolean, ctx) => {\n    setOpen(visible, ctx);\n  };\n\n  const popupChildren = React.Children.map(children, (child) =>\n    React.cloneElement(child as ReactElement<any>, {\n      className: classNames(\n        `${classPrefix}-menu__item--plain`,\n        `${classPrefix}-submenu__item`,\n        `${classPrefix}-submenu__item--icon`,\n        (child as ReactElement<any>).props?.className,\n      ),\n    }),\n  );\n\n  // 计算有多少子节点并设置最大高度，为做出动画效果\n  const childStyle = {\n    maxHeight: isExpand || (open && isPopUp) ? getSubMenuMaxHeight(children) : 0,\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return isExpand;\n  }, [disabled, isPopUp, open, isExpand]);\n\n  // 计算左边距，兼容多层级子菜单\n  const menuPaddingLeft = calculatePaddingLeft(level - 1);\n\n  const fakeArrowStyle = isPopUp && level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const contentRef = useRef<HTMLUListElement>(null);\n\n  const transitionCallbacks = {\n    onEnter: () => {\n      contentRef.current.style.height = `${contentRef?.current.scrollHeight}px`;\n    },\n    onEntered: () => {\n      contentRef.current.style.height = 'auto';\n    },\n    onExit: () => {\n      contentRef.current.style.height = `${contentRef?.current.scrollHeight}px`;\n    },\n    onExiting: () => {\n      contentRef.current.style.height = '0px';\n    },\n  };\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      key=\"popup\"\n      style={childStyle}\n    >\n      {popupChildren}\n    </ul>\n  );\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      style={style}\n    >\n      <div\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-opened`]: isOpen,\n          [`${classPrefix}-is-active`]: checkSubMenuChildrenActive(children, active),\n        })}\n        onClick={handleClick}\n      >\n        {parseTNode(icon)}\n        <span className={`${classPrefix}-menu__content`}>{title}</span>\n        <FakeArrow style={fakeArrowStyle} isActive={isOpen} disabled={disabled} />\n      </div>\n      {!isPopUp && (\n        <CSSTransition in={isOpen} appear timeout={300} nodeRef={contentRef} {...transitionCallbacks}>\n          <ul\n            key=\"normal\"\n            style={\n              {\n                ...childStyle,\n                '--padding-left': `${menuPaddingLeft}px`,\n                overflow: 'hidden',\n              } as React.CSSProperties\n            }\n            className={classNames(`${classPrefix}-menu__sub`, `${classPrefix}-slide-down-enter-active`)}\n            ref={contentRef}\n          >\n            {popupChildren}\n          </ul>\n        </CSSTransition>\n      )}\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        placement=\"right-top\"\n        content={pupContent}\n        visible={open}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubTitleMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { className, style, children, disabled, icon, title, value, level = 1, popupProps } = props;\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const [open, setOpen] = useControlled(popupProps, 'visible', restPopupProps.onVisibleChange);\n  const { active, onChange, expandType, theme = 'light' } = useContext(MenuContext);\n  const { classPrefix } = useConfig();\n\n  const handleClick = () => onChange(value);\n\n  const handleVisibleChange = (visible: boolean, ctx) => {\n    setOpen(visible, ctx);\n  };\n\n  // 斜八角动画\n  const [subMenuDom, setRefCurrent] = useDomRefCallback();\n\n  useRipple(subMenuDom);\n\n  // popup 导航\n  const isPopUp = expandType === 'popup';\n  // 当前二级导航激活\n  const isActive = checkSubMenuChildrenActive(children, active) || active === value;\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return false;\n  }, [disabled, isPopUp, open]);\n\n  const fakeArrowStyle = level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n    >\n      {children}\n    </ul>\n  );\n\n  let placement = 'right-top';\n  if (level < 2) {\n    placement = 'bottom-left';\n  }\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-opened`]: open,\n      })}\n    >\n      <div\n        ref={setRefCurrent}\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-active`]: isActive,\n          [`${classPrefix}-is-opened`]: open,\n        })}\n        onClick={handleClick}\n        style={style}\n      >\n        {parseTNode(icon)}\n        <span className={`${classPrefix}-menu__content`}>{title}</span>\n        {isPopUp && <FakeArrow style={fakeArrowStyle} isActive={level === 1 && open} />}\n      </div>\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          `${classPrefix}-is-head-menu`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        placement={placement as PopupPlacement}\n        content={pupContent}\n        visible={open}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { mode } = useContext(MenuContext);\n  const { children, level = 1 } = props;\n\n  const changeItemLevel = (item: React.ReactElement<any>) => {\n    if (checkIsSubMenu(item)) {\n      return React.cloneElement(item, {\n        level: level + 1,\n      });\n    }\n    if (checkIsMenuGroup(item)) {\n      const groupChildren = React.Children.map(item.props.children, (item: React.ReactElement) =>\n        changeItemLevel(item),\n      );\n      return React.cloneElement(\n        item,\n        {\n          level: level + 1,\n        },\n        groupChildren,\n      );\n    }\n    return item;\n  };\n\n  // 如果是第二层及以及的 subMenu 需要添加 notFirstLevelSubMenu 属性\n  const childElement = React.Children.map(children, (item: React.ReactElement) => changeItemLevel(item));\n\n  if (mode === 'accordion') return <SubAccordion {...props}>{childElement}</SubAccordion>;\n  if (mode === 'title') return <SubTitleMenu {...props}>{childElement}</SubTitleMenu>;\n  return null;\n};\n\nSubMenu.displayName = 'SubMenu';\n\nexport default SubMenu;\n"],"names":["SubAccordion","props","content","_props$children","children","disabled","icon","title","value","className","style","_props$level","level","popupProps","_ref","overlayClassName","overlayInnerClassName","restPopupProps","_objectWithoutProperties","_excluded","_useControlled","useControlled","onVisibleChange","_useControlled2","_slicedToArray","open","setOpen","_useConfig","useConfig","classPrefix","_useContext","useContext","MenuContext","_useContext$expanded","expanded","onExpand","active","expandType","_useContext$theme","theme","isPopUp","isExpand","includes","handleClick","e","stopPropagation","handleVisibleChange","visible","ctx","popupChildren","React","Children","map","child","_child$props","cloneElement","classNames","concat","childStyle","maxHeight","getSubMenuMaxHeight","isOpen","useMemo","menuPaddingLeft","calculatePaddingLeft","fakeArrowStyle","transform","contentRef","useRef","transitionCallbacks","onEnter","current","height","scrollHeight","onEntered","onExit","onExiting","pupContent","createElement","_defineProperty","key","submenu","checkSubMenuChildrenActive","onClick","parseTNode","FakeArrow","isActive","CSSTransition","_objectSpread","appear","timeout","nodeRef","overflow","ref","Popup","placement","SubTitleMenu","_props$level2","_ref4","_excluded2","_useControlled3","_useControlled4","_useContext2","onChange","_useContext2$theme","_useConfig2","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","subMenuDom","setRefCurrent","useRipple","SubMenu","_useContext3","mode","_props$level3","changeItemLevel","item","checkIsSubMenu","checkIsMenuGroup","groupChildren","childElement","displayName"],"mappings":"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"}