{"version":3,"file":"dep-14e24380.js","sources":["../../../components/checkbox/CheckboxGroup.tsx","../../../components/checkbox/Checkbox.tsx"],"sourcesContent":["import React, { ReactElement, useCallback, useEffect, useMemo, useState } from 'react';\nimport classNames from 'classnames';\nimport { isNumber } from 'lodash-es';\nimport { CheckContext, type CheckContextValue, type CheckProps } from '../common/Check';\nimport useConfig from '../hooks/useConfig';\nimport useControlled from '../hooks/useControlled';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport Checkbox from './Checkbox';\nimport { checkboxGroupDefaultProps } from './defaultProps';\n\nimport type { StyledProps } from '../common';\nimport type { CheckboxProps } from './Checkbox';\nimport type {\n  CheckboxGroupValue,\n  CheckboxOption,\n  CheckboxOptionObj,\n  TdCheckboxGroupProps,\n  TdCheckboxProps,\n} from './type';\n\nexport interface CheckboxGroupProps<T extends CheckboxGroupValue = CheckboxGroupValue>\n  extends TdCheckboxGroupProps<T>,\n    StyledProps {\n  children?: React.ReactNode;\n}\n\nconst getCheckboxValue = (v: CheckboxOption) => {\n  switch (typeof v) {\n    case 'number':\n      return v as number;\n    case 'string':\n      return v as string;\n    case 'object': {\n      const vs = v as CheckboxOptionObj;\n      return vs.value;\n    }\n    default:\n      return undefined;\n  }\n};\n\n/**\n * 多选选项组，里面可以嵌套 <Checkbox />\n */\nconst CheckboxGroup = <T extends CheckboxGroupValue = CheckboxGroupValue>(props: CheckboxGroupProps<T>) => {\n  type ItemType = T[number];\n  const { classPrefix } = useConfig();\n  const {\n    onChange,\n    disabled,\n    className,\n    style,\n    children,\n    max,\n    options = [],\n    readonly,\n  } = useDefaultProps<CheckboxGroupProps<T>>(props, checkboxGroupDefaultProps);\n\n  // 去掉所有 checkAll 之后的 options\n  const intervalOptions =\n    Array.isArray(options) && options.length > 0\n      ? options\n      : React.Children.map(\n          children,\n          (child: ReactElement<CheckboxProps>) =>\n            (child?.type as any)?.displayName === Checkbox.displayName && child.props,\n        ) || [];\n\n  const optionsWithoutCheckAll = intervalOptions.filter((t) => typeof t !== 'object' || !t.checkAll);\n  const optionsWithoutCheckAllValues = [];\n  optionsWithoutCheckAll.forEach((v: string | number) => {\n    const vs = getCheckboxValue(v);\n    optionsWithoutCheckAllValues.push(vs);\n  });\n\n  const { enabledValues, disabledValues } = useMemo(() => {\n    const enabledValues = [];\n    const disabledValues = [];\n    optionsWithoutCheckAll.forEach((option) => {\n      const isOptionDisabled = typeof option === 'object' && (option.disabled || option.readonly);\n      const value = getCheckboxValue(option);\n\n      if (isOptionDisabled || disabled || readonly) {\n        disabledValues.push(value);\n      } else {\n        enabledValues.push(value);\n      }\n    });\n    return { enabledValues, disabledValues };\n  }, [optionsWithoutCheckAll, disabled, readonly]);\n\n  const [internalValue, setInternalValue] = useControlled(props, 'value', onChange);\n  const [localMax, setLocalMax] = useState(max);\n\n  const getCheckedSet = useCallback(() => {\n    if (!Array.isArray(internalValue)) {\n      return new Set<ItemType>([]);\n    }\n    return new Set<ItemType>([].concat(internalValue));\n  }, [internalValue]);\n  const checkedSet = useMemo(() => getCheckedSet(), [getCheckedSet]);\n\nconst indeterminate = useMemo(() => {\n  const allValues = [...enabledValues, ...disabledValues];\n  const checkedCount = allValues.filter((value) => checkedSet.has(value)).length;\n  return checkedCount > 0 && checkedCount < allValues.length;\n}, [checkedSet, enabledValues, disabledValues]); \n\n  const checkAllChecked = useMemo(() => {\n    const checkableValues = enabledValues.filter((value) => checkedSet.has(value));\n    return enabledValues.length > 0 && checkableValues.length === enabledValues.length;\n  }, [checkedSet, enabledValues]);\n\n  useEffect(() => {\n    if (!isNumber(max)) {\n      return;\n    }\n    if (max < checkedSet.size) {\n      console.warn('[TDesign] max should be less than the length of value, change is invalid');\n    } else {\n      setLocalMax(max);\n    }\n  }, [max, checkedSet]);\n\n  const context: CheckContextValue = {\n    inject: (\n      checkProps: CheckProps & {\n        // check 组件不关心 value 的类型，只关心是否存在，所以为了兼容 checkbox group 的类型\n        // 此处覆盖 checkbox 默认 value 的类型，使用 checkbox group 的 generic type 代替\n        value: ItemType;\n      },\n    ) => {\n      // 如果已经受控，则不注入\n      if (typeof checkProps.checked !== 'undefined') {\n        return checkProps;\n      }\n\n      const { value: checkValue } = checkProps;\n\n      return {\n        ...checkProps,\n        checked: checkProps.checkAll ? checkAllChecked : checkedSet.has(checkValue),\n        indeterminate: checkProps.checkAll ? indeterminate : checkProps.indeterminate,\n        disabled: checkProps.disabled || disabled || (checkedSet.size >= localMax && !checkedSet.has(checkValue)),\n        readonly: checkProps.readonly || readonly,\n        onChange(checked, { e }) {\n          if (typeof checkProps.onChange === 'function') {\n            checkProps.onChange(checked, { e });\n          }\n\n          const checkedSet = getCheckedSet();\n\n          if (checkProps.checkAll) {\n            const checkedEnabledValues = enabledValues.filter((value) => checkedSet.has(value));\n            const allEnabledChecked = enabledValues.length > 0 && checkedEnabledValues.length === enabledValues.length;\n            if (!allEnabledChecked) {\n              enabledValues.forEach((value) => {\n                if (!checkedSet.has(value)) {\n                  checkedSet.add(value);\n                }\n              });\n            } else {\n              enabledValues.forEach((value) => {\n                if (checkedSet.has(value)) {\n                  checkedSet.delete(value);\n                }\n              });\n            }\n          } else if (checked) {\n            if (checkedSet.size >= localMax && isNumber(max)) return;\n            checkedSet.add(checkValue);\n          } else {\n            checkedSet.delete(checkValue);\n          }\n\n          const currentOptionChecked = optionsWithoutCheckAll.find((item: CheckboxProps) => item.value === checkValue);\n\n          // 此处 `as` 是因为 `Array.from` 会导致 `checkSet` 的 generic type 丢失\n          setInternalValue(Array.from(checkedSet) as T, {\n            e,\n            current: checkProps.checkAll ? undefined : (checkValue as TdCheckboxProps),\n            type: checked ? 'check' : 'uncheck',\n            option: checkProps.checkAll ? undefined : currentOptionChecked,\n          });\n        },\n      };\n    },\n  };\n\n  // options 和 children 的抉择,在未明确说明时，暂时以 options 优先\n  const useOptions = Array.isArray(options) && options.length !== 0;\n\n  return (\n    <div className={classNames(`${classPrefix}-checkbox-group`, className)} style={style}>\n      <CheckContext.Provider value={context}>\n        {useOptions\n          ? options.map((v: any, index) => {\n              switch (typeof v) {\n                case 'string':\n                  return (\n                    <Checkbox key={index} label={v} value={v}>\n                      {v}\n                    </Checkbox>\n                  );\n                case 'number': {\n                  return (\n                    <Checkbox key={index} label={v} value={v}>\n                      {String(v)}\n                    </Checkbox>\n                  );\n                }\n                case 'object': {\n                  const vs = v as CheckboxOptionObj;\n                  // CheckAll 的 checkBox 不存在 value,故用 checkAll_index 来保证尽量不和用户的 value 冲突.\n                  return vs.checkAll ? (\n                    <Checkbox {...vs} key={`checkAll_${index}`} indeterminate={indeterminate} />\n                  ) : (\n                    <Checkbox\n                      {...vs}\n                      key={index}\n                      disabled={vs.disabled || disabled}\n                      readonly={vs.readonly || readonly}\n                    />\n                  );\n                }\n                default:\n                  return null;\n              }\n            })\n          : children}\n      </CheckContext.Provider>\n    </div>\n  );\n};\n\nCheckboxGroup.displayName = 'CheckboxGroup';\n\nexport default CheckboxGroup;\n","import React from 'react';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport Check, { CheckProps } from '../common/Check';\nimport CheckboxGroup from './CheckboxGroup';\nimport { checkboxDefaultProps } from './defaultProps';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport type CheckboxProps = Omit<CheckProps, 'type'>;\n\nconst Checkbox = forwardRefWithStatics(\n  (props: CheckboxProps, ref: React.Ref<HTMLLabelElement>) => (\n    <Check ref={ref} type=\"checkbox\" {...useDefaultProps<CheckboxProps>(props, checkboxDefaultProps)} />\n  ),\n  { Group: CheckboxGroup },\n);\n\nCheckbox.displayName = 'Checkbox';\n\nexport default Checkbox;\n"],"names":["getCheckboxValue","v","_typeof","vs","value","CheckboxGroup","props","_useConfig","useConfig","classPrefix","_useDefaultProps","useDefaultProps","checkboxGroupDefaultProps","onChange","disabled","className","style","children","max","_useDefaultProps$opti","options","readonly","intervalOptions","Array","isArray","length","React","Children","map","child","_child$type","type","displayName","Checkbox","optionsWithoutCheckAll","filter","t","checkAll","optionsWithoutCheckAllValues","forEach","push","_useMemo","useMemo","enabledValues","disabledValues","option","isOptionDisabled","_useControlled","useControlled","_useControlled2","_slicedToArray","internalValue","setInternalValue","_useState","useState","_useState2","localMax","setLocalMax","getCheckedSet","useCallback","Set","concat","checkedSet","indeterminate","allValues","_toConsumableArray","checkedCount","has","checkAllChecked","checkableValues","useEffect","isNumber","size","console","warn","context","inject","checkProps","checked","checkValue","_objectSpread","_ref","e","checkedEnabledValues","allEnabledChecked","add","currentOptionChecked","find","item","from","current","useOptions","createElement","classNames","CheckContext","Provider","index","key","label","String","forwardRefWithStatics","ref","Check","checkboxDefaultProps","Group"],"mappings":"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"}